!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=95)}([function(e,t,n){"use strict";(function(r){var i=s(n(16)),o=s(n(29));function s(e){return e&&e.__esModule?e:{default:e}}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":(0,o.default)(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e=void 0;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(155)(t),e.exports.formatters.j=function(e){try{return(0,i.default)(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(154))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(81),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";var r=n(83);e.exports={USER_AGENT:String(r.title)+" "+String(r.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}},function(e,t,n){"use strict";var r=o(n(29)),i=o(n(17));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(4),u=n(23),a=n(13);t.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length};var l=t.isFunction=function(e){return void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)};t.isString=function(e){return void 0!==e&&"[object String]"===Object.prototype.toString.call(e)},t.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},t.isEmpty=function(e){return null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e)},t.hasMethods=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=!0,s=!1,u=void 0;try{for(var a,c=(0,i.default)(n);!(o=(a=c.next()).done);o=!0){var f=a.value;if(l(e[f]))return!1}}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}return!0};var c=t.createRandomToken=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=void 0,r="";for(n=0;n<e;n++)r+=(Math.random()*t|0).toString(t);return r};t.newTag=function(){return c(10)},t.newUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.hostType=function(e){if(e)return-1!==(e=a.parse(e,"host"))?e.host_type:void 0};var f=t.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")};t.normalizeTarget=function(e,t){if(e){if(e instanceof u)return e;if("string"==typeof e){var n=e.split("@"),r=void 0,i=void 0;switch(n.length){case 1:if(!t)return;r=e,i=t;break;case 2:r=n[0],i=n[1];break;default:r=n.slice(0,n.length-1).join("@"),i=n[n.length-1]}r=r.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(r)&&(r=r.replace(/[-.()]/g,"")),e=String(s.SIP)+":"+String(f(r))+"@"+String(i);var o;return(o=u.parse(e))?o:void 0}}else;},t.headerize=function(e){var t={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},n=e.toLowerCase().replace(/_/g,"-").split("-"),r="",i=n.length,o=void 0;for(o=0;o<i;o++)0!==o&&(r+="-"),r+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return t[r]&&(r=t[r]),r},t.sipErrorCause=function(e){for(var t in s.SIP_ERROR_CAUSES)if(-1!==s.SIP_ERROR_CAUSES[t].indexOf(e))return s.causes[t];return s.causes.SIP_FAILURE_CODE},t.getRandomTestNetIP=function(){return"192.0.2."+String((e=1,t=254,Math.floor(Math.random()*(t-e+1)+e)));var e,t},t.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,r=2147483648&t,i=1073741824&e,o=1073741824&t,s=(1073741823&e)+(1073741823&t);return i&o?2147483648^s^n^r:i|o?1073741824&s?3221225472^s^n^r:1073741824^s^n^r:s^n^r}function r(e,r,i,o,s,u,a){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(r,i,o),s),a)),n(t(e,u),r)}function i(e,r,i,o,s,u,a){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(r,i,o),s),a)),n(t(e,u),r)}function o(e,r,i,o,s,u,a){return e=n(e,n(n(function(e,t,n){return e^t^n}(r,i,o),s),a)),n(t(e,u),r)}function s(e,r,i,o,s,u,a){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(r,i,o),s),a)),n(t(e,u),r)}function u(e){var t="",n="",r=void 0;for(r=0;r<=3;r++)t+=(n="0"+String((e>>>8*r&255).toString(16))).substr(n.length-2,2);return t}var a,l=void 0,c=void 0,f=void 0,d=void 0,h=void 0,p=void 0,_=void 0,v=void 0,g=void 0;for(a=function(e){for(var t=void 0,n=e.length,r=n+8,i=16*((r-r%64)/64+1),o=new Array(i-1),s=0,u=0;u<n;)s=u%4*8,o[t=(u-u%4)/4]=o[t]|e.charCodeAt(u)<<s,u++;return s=u%4*8,o[t=(u-u%4)/4]=o[t]|128<<s,o[i-2]=n<<3,o[i-1]=n>>>29,o}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),p=1732584193,_=4023233417,v=2562383102,g=271733878,l=0;l<a.length;l+=16)c=p,f=_,d=v,h=g,p=r(p,_,v,g,a[l+0],7,3614090360),g=r(g,p,_,v,a[l+1],12,3905402710),v=r(v,g,p,_,a[l+2],17,606105819),_=r(_,v,g,p,a[l+3],22,3250441966),p=r(p,_,v,g,a[l+4],7,4118548399),g=r(g,p,_,v,a[l+5],12,1200080426),v=r(v,g,p,_,a[l+6],17,2821735955),_=r(_,v,g,p,a[l+7],22,4249261313),p=r(p,_,v,g,a[l+8],7,1770035416),g=r(g,p,_,v,a[l+9],12,2336552879),v=r(v,g,p,_,a[l+10],17,4294925233),_=r(_,v,g,p,a[l+11],22,2304563134),p=r(p,_,v,g,a[l+12],7,1804603682),g=r(g,p,_,v,a[l+13],12,4254626195),v=r(v,g,p,_,a[l+14],17,2792965006),p=i(p,_=r(_,v,g,p,a[l+15],22,1236535329),v,g,a[l+1],5,4129170786),g=i(g,p,_,v,a[l+6],9,3225465664),v=i(v,g,p,_,a[l+11],14,643717713),_=i(_,v,g,p,a[l+0],20,3921069994),p=i(p,_,v,g,a[l+5],5,3593408605),g=i(g,p,_,v,a[l+10],9,38016083),v=i(v,g,p,_,a[l+15],14,3634488961),_=i(_,v,g,p,a[l+4],20,3889429448),p=i(p,_,v,g,a[l+9],5,568446438),g=i(g,p,_,v,a[l+14],9,3275163606),v=i(v,g,p,_,a[l+3],14,4107603335),_=i(_,v,g,p,a[l+8],20,1163531501),p=i(p,_,v,g,a[l+13],5,2850285829),g=i(g,p,_,v,a[l+2],9,4243563512),v=i(v,g,p,_,a[l+7],14,1735328473),p=o(p,_=i(_,v,g,p,a[l+12],20,2368359562),v,g,a[l+5],4,4294588738),g=o(g,p,_,v,a[l+8],11,2272392833),v=o(v,g,p,_,a[l+11],16,1839030562),_=o(_,v,g,p,a[l+14],23,4259657740),p=o(p,_,v,g,a[l+1],4,2763975236),g=o(g,p,_,v,a[l+4],11,1272893353),v=o(v,g,p,_,a[l+7],16,4139469664),_=o(_,v,g,p,a[l+10],23,3200236656),p=o(p,_,v,g,a[l+13],4,681279174),g=o(g,p,_,v,a[l+0],11,3936430074),v=o(v,g,p,_,a[l+3],16,3572445317),_=o(_,v,g,p,a[l+6],23,76029189),p=o(p,_,v,g,a[l+9],4,3654602809),g=o(g,p,_,v,a[l+12],11,3873151461),v=o(v,g,p,_,a[l+15],16,530742520),p=s(p,_=o(_,v,g,p,a[l+2],23,3299628645),v,g,a[l+0],6,4096336452),g=s(g,p,_,v,a[l+7],10,1126891415),v=s(v,g,p,_,a[l+14],15,2878612391),_=s(_,v,g,p,a[l+5],21,4237533241),p=s(p,_,v,g,a[l+12],6,1700485571),g=s(g,p,_,v,a[l+3],10,2399980690),v=s(v,g,p,_,a[l+10],15,4293915773),_=s(_,v,g,p,a[l+1],21,2240044497),p=s(p,_,v,g,a[l+8],6,1873313359),g=s(g,p,_,v,a[l+15],10,4264355552),v=s(v,g,p,_,a[l+6],15,2734768916),_=s(_,v,g,p,a[l+13],21,1309151649),p=s(p,_,v,g,a[l+4],6,4149444226),g=s(g,p,_,v,a[l+11],10,3174756917),v=s(v,g,p,_,a[l+2],15,718787259),_=s(_,v,g,p,a[l+9],21,3951481745),p=n(p,c),_=n(_,f),v=n(v,d),g=n(g,h);return(u(p)+u(_)+u(v)+u(g)).toLowerCase()},t.closeMediaStream=function(e){if(e)try{var t=void 0;if(e.getTracks){t=e.getTracks();var n=!0,o=!1,s=void 0;try{for(var u,a=(0,i.default)(t);!(n=(u=a.next()).done);n=!0){u.value.stop()}}catch(e){o=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}}else{t=e.getAudioTracks();var l=!0,c=!1,f=void 0;try{for(var d,h=(0,i.default)(t);!(l=(d=h.next()).done);l=!0){d.value.stop()}}catch(e){c=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw f}}t=e.getVideoTracks();var p=!0,_=!1,v=void 0;try{for(var g,m=(0,i.default)(t);!(p=(g=m.next()).done);p=!0){g.value.stop()}}catch(e){_=!0,v=e}finally{try{!p&&m.return&&m.return()}finally{if(_)throw v}}}}catch(t){"function"!=typeof e.stop&&"object"!==(0,r.default)(e.stop)||e.stop()}},t.cloneArray=function(e){return e&&e.slice()||[]}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(50)("wks"),i=n(39),o=n(6).Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(6),i=n(3),o=n(25),s=n(20),u=n(21),a=function(e,t,n){var l,c,f,d=e&a.F,h=e&a.G,p=e&a.S,_=e&a.P,v=e&a.B,g=e&a.W,m=h?i:i[t]||(i[t]={}),y=m.prototype,S=h?r:p?r[t]:(r[t]||{}).prototype;for(l in h&&(n=t),n)(c=!d&&S&&void 0!==S[l])&&u(m,l)||(f=c?S[l]:n[l],m[l]=h&&"function"!=typeof S[l]?n[l]:v&&c?o(f,r):g&&S[l]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):_&&"function"==typeof f?o(Function.call,f):f,_&&((m.virtual||(m.virtual={}))[l]=f,e&a.R&&y&&!y[l]&&s(y,l,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t,n){var r=n(18);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports={default:n(126),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(29),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(139)),i=s(n(143)),o=s(n(29));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";e.exports=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,r){var i={CRLF:l,DIGIT:c,ALPHA:f,HEXDIG:d,WSP:h,OCTET:p,DQUOTE:_,SP:v,HTAB:g,alphanum:m,reserved:y,unreserved:S,mark:T,escaped:E,LWS:C,SWS:b,HCOLON:A,TEXT_UTF8_TRIM:w,TEXT_UTF8char:R,UTF8_NONASCII:I,UTF8_CONT:x,LHEX:function(){var e;null===(e=c())&&(/^[a-f]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[a-f]")));return e},token:k,token_nodot:O,separators:function(){var e;40===t.charCodeAt(o)?(e="(",o++):(e=null,a('"("'));null===e&&(41===t.charCodeAt(o)?(e=")",o++):(e=null,a('")"')),null===e&&(60===t.charCodeAt(o)?(e="<",o++):(e=null,a('"<"')),null===e&&(62===t.charCodeAt(o)?(e=">",o++):(e=null,a('">"')),null===e&&(64===t.charCodeAt(o)?(e="@",o++):(e=null,a('"@"')),null===e&&(44===t.charCodeAt(o)?(e=",",o++):(e=null,a('","')),null===e&&(59===t.charCodeAt(o)?(e=";",o++):(e=null,a('";"')),null===e&&(58===t.charCodeAt(o)?(e=":",o++):(e=null,a('":"')),null===e&&(92===t.charCodeAt(o)?(e="\\",o++):(e=null,a('"\\\\"')),null===e&&null===(e=_())&&(47===t.charCodeAt(o)?(e="/",o++):(e=null,a('"/"')),null===e&&(91===t.charCodeAt(o)?(e="[",o++):(e=null,a('"["')),null===e&&(93===t.charCodeAt(o)?(e="]",o++):(e=null,a('"]"')),null===e&&(63===t.charCodeAt(o)?(e="?",o++):(e=null,a('"?"')),null===e&&(61===t.charCodeAt(o)?(e="=",o++):(e=null,a('"="')),null===e&&(123===t.charCodeAt(o)?(e="{",o++):(e=null,a('"{"')),null===e&&(125===t.charCodeAt(o)?(e="}",o++):(e=null,a('"}"')),null===e&&null===(e=v())&&(e=g()))))))))))))))));return e},word:N,STAR:P,SLASH:D,EQUAL:M,LPAREN:U,RPAREN:L,RAQUOT:q,LAQUOT:H,COMMA:j,SEMI:F,COLON:G,LDQUOT:B,RDQUOT:W,comment:function e(){var t,n,r,i;if(i=o,null!==(t=U())){for(n=[],null===(r=V())&&null===(r=$())&&(r=e());null!==r;)n.push(r),null===(r=V())&&null===(r=$())&&(r=e());null!==n&&null!==(r=L())?t=[t,n,r]:(t=null,o=i)}else t=null,o=i;return t},ctext:V,quoted_string:K,quoted_string_clean:Y,qdtext:z,quoted_pair:$,SIP_URI_noparams:J,SIP_URI:X,uri_scheme:Q,uri_scheme_sips:Z,uri_scheme_sip:ee,userinfo:te,user:ne,user_unreserved:re,password:ie,hostport:oe,host:se,hostname:ue,domainlabel:ae,toplabel:le,IPv6reference:ce,IPv6address:fe,h16:de,ls32:he,IPv4address:pe,dec_octet:_e,port:ve,uri_parameters:ge,uri_parameter:me,transport_param:ye,user_param:Se,method_param:Te,ttl_param:Ee,maddr_param:Ce,lr_param:be,other_param:Ae,pname:we,pvalue:Re,paramchar:Ie,param_unreserved:xe,headers:ke,header:Oe,hname:Ne,hvalue:Pe,hnv_unreserved:De,Request_Response:function(){var e;null===(e=ct())&&(e=Me());return e},Request_Line:Me,Request_URI:Ue,absoluteURI:Le,hier_part:qe,net_path:He,abs_path:je,opaque_part:Fe,uric:Ge,uric_no_slash:Be,path_segments:We,segment:Ve,param:Ke,pchar:Ye,scheme:ze,authority:$e,srvr:Je,reg_name:Xe,query:Qe,SIP_Version:Ze,INVITEm:et,ACKm:tt,OPTIONSm:nt,BYEm:rt,CANCELm:it,REGISTERm:ot,SUBSCRIBEm:st,NOTIFYm:ut,REFERm:at,Method:lt,Status_Line:ct,Status_Code:ft,extension_code:dt,Reason_Phrase:ht,Allow_Events:function(){var e,t,n,r,i,s;if(i=o,null!==(e=Lt())){for(t=[],s=o,null!==(n=j())&&null!==(r=Lt())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=j())&&null!==(r=Lt())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Call_ID:function(){var e,n,r,i,s,u;i=o,s=o,null!==(e=N())?(u=o,64===t.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null!==n&&null!==(r=N())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?e=[e,n]:(e=null,o=s)):(e=null,o=s);null!==e&&(e=function(e){Hn=t.substring(o,e)}(i));null===e&&(o=i);return e},Contact:function(){var e,t,n,r,i,s,u;if(i=o,null===(e=P()))if(s=o,null!==(e=pt())){for(t=[],u=o,null!==(n=j())&&null!==(r=pt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=j())&&null!==(r=pt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;null!==e&&(e=function(e){var t,n;for(n=Hn.multi_header.length,t=0;t<n;t++)if(null===Hn.multi_header[t].parsed){Hn=null;break}Hn=null!==Hn?Hn.multi_header:-1}());null===e&&(o=i);return e},contact_param:pt,name_addr:_t,display_name:vt,contact_params:gt,c_p_q:mt,c_p_expires:yt,delta_seconds:St,qvalue:Tt,generic_param:Et,gen_value:Ct,Content_Disposition:function(){var e,t,n,r,i,s;if(i=o,null!==(e=bt())){for(t=[],s=o,null!==(n=F())&&null!==(r=At())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=F())&&null!==(r=At())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},disp_type:bt,disp_param:At,handling_param:wt,Content_Encoding:function(){var e,t,n,r,i,s;if(i=o,null!==(e=k())){for(t=[],s=o,null!==(n=j())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=j())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Content_Length:function(){var e,t,n;if(n=o,null!==(t=c()))for(e=[];null!==t;)e.push(t),t=c();else e=null;null!==e&&(e=void(Hn=parseInt(e.join(""))));null===e&&(o=n);return e},Content_Type:function(){var e,n;n=o,null!==(e=Rt())&&(e=function(e){Hn=t.substring(o,e)}(n));null===e&&(o=n);return e},media_type:Rt,m_type:It,discrete_type:xt,composite_type:kt,extension_token:Ot,x_token:Nt,m_subtype:Pt,m_parameter:Dt,m_value:Mt,CSeq:function(){var e,t,n,r;r=o,null!==(e=Ut())&&null!==(t=C())&&null!==(n=lt())?e=[e,t,n]:(e=null,o=r);return e},CSeq_value:Ut,Expires:function(){var e,t;t=o,null!==(e=St())&&(e=void(Hn=e));null===e&&(o=t);return e},Event:function(){var e,t,n,r,i,s,u;if(i=o,s=o,null!==(e=Lt())){for(t=[],u=o,null!==(n=F())&&null!==(r=Et())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=F())&&null!==(r=Et())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;null!==e&&(a=e[0],e=void(Hn.event=a.join("").toLowerCase()));var a;null===e&&(o=i);return e},event_type:Lt,From:function(){var e,t,n,r,i,s,u;i=o,s=o,null===(e=J())&&(e=_t());if(null!==e){for(t=[],u=o,null!==(n=F())&&null!==(r=qt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=F())&&null!==(r=qt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;null!==e&&(e=function(e){var t=Hn.tag;try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params),t&&Hn.setParam("tag",t)}catch(e){Hn=-1}}());null===e&&(o=i);return e},from_param:qt,tag_param:Ht,Max_Forwards:function(){var e,t,n;if(n=o,null!==(t=c()))for(e=[];null!==t;)e.push(t),t=c();else e=null;null!==e&&(e=void(Hn=parseInt(e.join(""))));null===e&&(o=n);return e},Min_Expires:function(){var e,t;t=o,null!==(e=St())&&(e=void(Hn=e));null===e&&(o=t);return e},Name_Addr_Header:function(){var e,t,n,r,i,s,u,a,l,c;a=o,l=o,e=[],t=vt();for(;null!==t;)e.push(t),t=vt();if(null!==e)if(null!==(t=H()))if(null!==(n=X()))if(null!==(r=q())){for(i=[],c=o,null!==(s=F())&&null!==(u=Et())?s=[s,u]:(s=null,o=c);null!==s;)i.push(s),c=o,null!==(s=F())&&null!==(u=Et())?s=[s,u]:(s=null,o=c);null!==i?e=[e,t,n,r,i]:(e=null,o=l)}else e=null,o=l;else e=null,o=l;else e=null,o=l;else e=null,o=l;null!==e&&(e=function(e){try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params)}catch(e){Hn=-1}}());null===e&&(o=a);return e},Proxy_Authenticate:function(){return jt()},challenge:jt,other_challenge:Ft,auth_param:Gt,digest_cln:Bt,realm:Wt,realm_value:Vt,domain:Kt,URI:Yt,nonce:zt,nonce_value:$t,opaque:Jt,stale:Xt,algorithm:Qt,qop_options:Zt,qop_value:en,Proxy_Require:function(){var e,t,n,r,i,s;if(i=o,null!==(e=k())){for(t=[],s=o,null!==(n=j())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=j())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Record_Route:function(){var e,t,n,r,i,s,u;if(i=o,s=o,null!==(e=tn())){for(t=[],u=o,null!==(n=j())&&null!==(r=tn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=j())&&null!==(r=tn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;null!==e&&(e=function(e){var t,n;for(n=Hn.multi_header.length,t=0;t<n;t++)if(null===Hn.multi_header[t].parsed){Hn=null;break}Hn=null!==Hn?Hn.multi_header:-1}());null===e&&(o=i);return e},rec_route:tn,Reason:function(){var e,n,r,i,s,u,l;s=o,u=o,"sip"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"SIP"'));null===e&&(e=k());if(null!==e){for(n=[],l=o,null!==(r=F())&&null!==(i=nn())?r=[r,i]:(r=null,o=l);null!==r;)n.push(r),l=o,null!==(r=F())&&null!==(i=nn())?r=[r,i]:(r=null,o=l);null!==n?e=[e,n]:(e=null,o=u)}else e=null,o=u;null!==e&&(e=function(e,t){if(Hn.protocol=t.toLowerCase(),Hn.params||(Hn.params={}),Hn.params.text&&'"'===Hn.params.text[0]){var n=Hn.params.text;Hn.text=n.substring(1,n.length-1),delete Hn.params.text}}(0,e[0]));null===e&&(o=s);return e},reason_param:nn,reason_cause:rn,Require:function(){var e,t,n,r,i,s;if(i=o,null!==(e=k())){for(t=[],s=o,null!==(n=j())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=j())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Route:function(){var e,t,n,r,i,s;if(i=o,null!==(e=on())){for(t=[],s=o,null!==(n=j())&&null!==(r=on())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=j())&&null!==(r=on())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},route_param:on,Subscription_State:function(){var e,t,n,r,i,s;if(i=o,null!==(e=sn())){for(t=[],s=o,null!==(n=F())&&null!==(r=un())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=F())&&null!==(r=un())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},substate_value:sn,subexp_params:un,event_reason_value:an,Subject:function(){var e;return e=null!==(e=w())?e:""},Supported:function(){var e,t,n,r,i,s;if(i=o,null!==(e=k())){for(t=[],s=o,null!==(n=j())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=j())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e=null!==e?e:""},To:function(){var e,t,n,r,i,s,u;i=o,s=o,null===(e=J())&&(e=_t());if(null!==e){for(t=[],u=o,null!==(n=F())&&null!==(r=ln())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=F())&&null!==(r=ln())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;null!==e&&(e=function(e){var t=Hn.tag;try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params),t&&Hn.setParam("tag",t)}catch(e){Hn=-1}}());null===e&&(o=i);return e},to_param:ln,Via:function(){var e,t,n,r,i,s;if(i=o,null!==(e=cn())){for(t=[],s=o,null!==(n=j())&&null!==(r=cn())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=j())&&null!==(r=cn())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},via_param:cn,via_params:fn,via_ttl:dn,via_maddr:hn,via_received:pn,via_branch:_n,response_port:vn,sent_protocol:gn,protocol_name:mn,transport:yn,sent_by:Sn,via_host:Tn,via_port:En,ttl:Cn,WWW_Authenticate:function(){return jt()},Session_Expires:function(){var e,t,n,r,i,s;if(i=o,null!==(e=bn())){for(t=[],s=o,null!==(n=F())&&null!==(r=An())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=F())&&null!==(r=An())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},s_e_expires:bn,s_e_params:An,s_e_refresher:wn,extension_header:function(){var e,t,n,r;r=o,null!==(e=k())&&null!==(t=A())&&null!==(n=Rn())?e=[e,t,n]:(e=null,o=r);return e},header_value:Rn,message_body:function(){var e,t;e=[],t=p();for(;null!==t;)e.push(t),t=p();return e},uuid_URI:function(){var e,n,r;r=o,"uuid:"===t.substr(o,5)?(e="uuid:",o+=5):(e=null,a('"uuid:"'));null!==e&&null!==(n=In())?e=[e,n]:(e=null,o=r);return e},uuid:In,hex4:xn,hex8:kn,hex12:On,Refer_To:function(){var e,t,n,r,i,s,u;i=o,s=o,null===(e=J())&&(e=_t());if(null!==e){for(t=[],u=o,null!==(n=F())&&null!==(r=Et())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=F())&&null!==(r=Et())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;null!==e&&(e=function(e){try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params)}catch(e){Hn=-1}}());null===e&&(o=i);return e},Replaces:function(){var e,t,n,r,i,s;if(i=o,null!==(e=Nn())){for(t=[],s=o,null!==(n=F())&&null!==(r=Pn())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=F())&&null!==(r=Pn())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},call_id:Nn,replaces_param:Pn,to_tag:Dn,from_tag:Mn,early_flag:Un};if(void 0!==r){if(void 0===i[r])throw new Error("Invalid rule name: "+e(r)+".")}else r="CRLF";var o=0,s=0,u=[];function a(e){o<s||(o>s&&(s=o,u=[]),u.push(e))}function l(){var e;return"\r\n"===t.substr(o,2)?(e="\r\n",o+=2):(e=null,a('"\\r\\n"')),e}function c(){var e;return/^[0-9]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[0-9]")),e}function f(){var e;return/^[a-zA-Z]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[a-zA-Z]")),e}function d(){var e;return/^[0-9a-fA-F]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[0-9a-fA-F]")),e}function h(){var e;return null===(e=v())&&(e=g()),e}function p(){var e;return/^[\0-\xFF]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[\\0-\\xFF]")),e}function _(){var e;return/^["]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a('["]')),e}function v(){var e;return 32===t.charCodeAt(o)?(e=" ",o++):(e=null,a('" "')),e}function g(){var e;return 9===t.charCodeAt(o)?(e="\t",o++):(e=null,a('"\\t"')),e}function m(){var e;return/^[a-zA-Z0-9]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[a-zA-Z0-9]")),e}function y(){var e;return 59===t.charCodeAt(o)?(e=";",o++):(e=null,a('";"')),null===e&&(47===t.charCodeAt(o)?(e="/",o++):(e=null,a('"/"')),null===e&&(63===t.charCodeAt(o)?(e="?",o++):(e=null,a('"?"')),null===e&&(58===t.charCodeAt(o)?(e=":",o++):(e=null,a('":"')),null===e&&(64===t.charCodeAt(o)?(e="@",o++):(e=null,a('"@"')),null===e&&(38===t.charCodeAt(o)?(e="&",o++):(e=null,a('"&"')),null===e&&(61===t.charCodeAt(o)?(e="=",o++):(e=null,a('"="')),null===e&&(43===t.charCodeAt(o)?(e="+",o++):(e=null,a('"+"')),null===e&&(36===t.charCodeAt(o)?(e="$",o++):(e=null,a('"$"')),null===e&&(44===t.charCodeAt(o)?(e=",",o++):(e=null,a('","'))))))))))),e}function S(){var e;return null===(e=m())&&(e=T()),e}function T(){var e;return 45===t.charCodeAt(o)?(e="-",o++):(e=null,a('"-"')),null===e&&(95===t.charCodeAt(o)?(e="_",o++):(e=null,a('"_"')),null===e&&(46===t.charCodeAt(o)?(e=".",o++):(e=null,a('"."')),null===e&&(33===t.charCodeAt(o)?(e="!",o++):(e=null,a('"!"')),null===e&&(126===t.charCodeAt(o)?(e="~",o++):(e=null,a('"~"')),null===e&&(42===t.charCodeAt(o)?(e="*",o++):(e=null,a('"*"')),null===e&&(39===t.charCodeAt(o)?(e="'",o++):(e=null,a('"\'"')),null===e&&(40===t.charCodeAt(o)?(e="(",o++):(e=null,a('"("')),null===e&&(41===t.charCodeAt(o)?(e=")",o++):(e=null,a('")"')))))))))),e}function E(){var e,n,r,i,s;return i=o,s=o,37===t.charCodeAt(o)?(e="%",o++):(e=null,a('"%"')),null!==e&&null!==(n=d())&&null!==(r=d())?e=[e,n,r]:(e=null,o=s),null!==e&&(e=e.join("")),null===e&&(o=i),e}function C(){var e,t,n,r,i,s;for(r=o,i=o,s=o,e=[],t=h();null!==t;)e.push(t),t=h();if(null!==e&&null!==(t=l())?e=[e,t]:(e=null,o=s),null!==(e=null!==e?e:"")){if(null!==(n=h()))for(t=[];null!==n;)t.push(n),n=h();else t=null;null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return null!==e&&(e=" "),null===e&&(o=r),e}function b(){var e;return e=null!==(e=C())?e:""}function A(){var e,n,r,i,s;for(i=o,s=o,e=[],null===(n=v())&&(n=g());null!==n;)e.push(n),null===(n=v())&&(n=g());return null!==e?(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e=":"),null===e&&(o=i),e}function w(){var e,n,r,i,s,u,a;if(s=o,u=o,null!==(n=R()))for(e=[];null!==n;)e.push(n),n=R();else e=null;if(null!==e){for(n=[],a=o,r=[],i=C();null!==i;)r.push(i),i=C();for(null!==r&&null!==(i=R())?r=[r,i]:(r=null,o=a);null!==r;){for(n.push(r),a=o,r=[],i=C();null!==i;)r.push(i),i=C();null!==r&&null!==(i=R())?r=[r,i]:(r=null,o=a)}null!==n?e=[e,n]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=function(e){return t.substring(o,e)}(s)),null===e&&(o=s),e}function R(){var e;return/^[!-~]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[!-~]")),null===e&&(e=I()),e}function I(){var e;return/^[\x80-\uFFFF]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[\\x80-\\uFFFF]")),e}function x(){var e;return/^[\x80-\xBF]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[\\x80-\\xBF]")),e}function k(){var e,n,r;if(r=o,null===(n=m())&&(45===t.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(46===t.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null===n&&(33===t.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===t.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===t.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===t.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===t.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===t.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===t.charCodeAt(o)?(n="~",o++):(n=null,a('"~"')))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=m())&&(45===t.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(46===t.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null===n&&(33===t.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===t.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===t.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===t.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===t.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===t.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===t.charCodeAt(o)?(n="~",o++):(n=null,a('"~"'))))))))))));else e=null;return null!==e&&(e=function(e){return t.substring(o,e)}(r)),null===e&&(o=r),e}function O(){var e,n,r;if(r=o,null===(n=m())&&(45===t.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(33===t.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===t.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===t.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===t.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===t.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===t.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===t.charCodeAt(o)?(n="~",o++):(n=null,a('"~"'))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=m())&&(45===t.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(33===t.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===t.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===t.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===t.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===t.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===t.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===t.charCodeAt(o)?(n="~",o++):(n=null,a('"~"')))))))))));else e=null;return null!==e&&(e=function(e){return t.substring(o,e)}(r)),null===e&&(o=r),e}function N(){var e,n,r;if(r=o,null===(n=m())&&(45===t.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(46===t.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null===n&&(33===t.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===t.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===t.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===t.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===t.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===t.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===t.charCodeAt(o)?(n="~",o++):(n=null,a('"~"')),null===n&&(40===t.charCodeAt(o)?(n="(",o++):(n=null,a('"("')),null===n&&(41===t.charCodeAt(o)?(n=")",o++):(n=null,a('")"')),null===n&&(60===t.charCodeAt(o)?(n="<",o++):(n=null,a('"<"')),null===n&&(62===t.charCodeAt(o)?(n=">",o++):(n=null,a('">"')),null===n&&(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null===n&&(92===t.charCodeAt(o)?(n="\\",o++):(n=null,a('"\\\\"')),null===n&&null===(n=_())&&(47===t.charCodeAt(o)?(n="/",o++):(n=null,a('"/"')),null===n&&(91===t.charCodeAt(o)?(n="[",o++):(n=null,a('"["')),null===n&&(93===t.charCodeAt(o)?(n="]",o++):(n=null,a('"]"')),null===n&&(63===t.charCodeAt(o)?(n="?",o++):(n=null,a('"?"')),null===n&&(123===t.charCodeAt(o)?(n="{",o++):(n=null,a('"{"')),null===n&&(125===t.charCodeAt(o)?(n="}",o++):(n=null,a('"}"')))))))))))))))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=m())&&(45===t.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(46===t.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null===n&&(33===t.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===t.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===t.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===t.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===t.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===t.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===t.charCodeAt(o)?(n="~",o++):(n=null,a('"~"')),null===n&&(40===t.charCodeAt(o)?(n="(",o++):(n=null,a('"("')),null===n&&(41===t.charCodeAt(o)?(n=")",o++):(n=null,a('")"')),null===n&&(60===t.charCodeAt(o)?(n="<",o++):(n=null,a('"<"')),null===n&&(62===t.charCodeAt(o)?(n=">",o++):(n=null,a('">"')),null===n&&(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null===n&&(92===t.charCodeAt(o)?(n="\\",o++):(n=null,a('"\\\\"')),null===n&&null===(n=_())&&(47===t.charCodeAt(o)?(n="/",o++):(n=null,a('"/"')),null===n&&(91===t.charCodeAt(o)?(n="[",o++):(n=null,a('"["')),null===n&&(93===t.charCodeAt(o)?(n="]",o++):(n=null,a('"]"')),null===n&&(63===t.charCodeAt(o)?(n="?",o++):(n=null,a('"?"')),null===n&&(123===t.charCodeAt(o)?(n="{",o++):(n=null,a('"{"')),null===n&&(125===t.charCodeAt(o)?(n="}",o++):(n=null,a('"}"'))))))))))))))))))))))));else e=null;return null!==e&&(e=function(e){return t.substring(o,e)}(r)),null===e&&(o=r),e}function P(){var e,n,r,i,s;return i=o,s=o,null!==(e=b())?(42===t.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e="*"),null===e&&(o=i),e}function D(){var e,n,r,i,s;return i=o,s=o,null!==(e=b())?(47===t.charCodeAt(o)?(n="/",o++):(n=null,a('"/"')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e="/"),null===e&&(o=i),e}function M(){var e,n,r,i,s;return i=o,s=o,null!==(e=b())?(61===t.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e="="),null===e&&(o=i),e}function U(){var e,n,r,i,s;return i=o,s=o,null!==(e=b())?(40===t.charCodeAt(o)?(n="(",o++):(n=null,a('"("')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e="("),null===e&&(o=i),e}function L(){var e,n,r,i,s;return i=o,s=o,null!==(e=b())?(41===t.charCodeAt(o)?(n=")",o++):(n=null,a('")"')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e=")"),null===e&&(o=i),e}function q(){var e,n,r,i;return r=o,i=o,62===t.charCodeAt(o)?(e=">",o++):(e=null,a('">"')),null!==e&&null!==(n=b())?e=[e,n]:(e=null,o=i),null!==e&&(e=">"),null===e&&(o=r),e}function H(){var e,n,r,i;return r=o,i=o,null!==(e=b())?(60===t.charCodeAt(o)?(n="<",o++):(n=null,a('"<"')),null!==n?e=[e,n]:(e=null,o=i)):(e=null,o=i),null!==e&&(e="<"),null===e&&(o=r),e}function j(){var e,n,r,i,s;return i=o,s=o,null!==(e=b())?(44===t.charCodeAt(o)?(n=",",o++):(n=null,a('","')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e=","),null===e&&(o=i),e}function F(){var e,n,r,i,s;return i=o,s=o,null!==(e=b())?(59===t.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e=";"),null===e&&(o=i),e}function G(){var e,n,r,i,s;return i=o,s=o,null!==(e=b())?(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=b())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e=":"),null===e&&(o=i),e}function B(){var e,t,n,r;return n=o,r=o,null!==(e=b())&&null!==(t=_())?e=[e,t]:(e=null,o=r),null!==e&&(e='"'),null===e&&(o=n),e}function W(){var e,t,n,r;return n=o,r=o,null!==(e=_())&&null!==(t=b())?e=[e,t]:(e=null,o=r),null!==e&&(e='"'),null===e&&(o=n),e}function V(){var e;return/^[!-']/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[!-']")),null===e&&(/^[*-[]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[*-[]")),null===e&&(/^[\]-~]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[\\]-~]")),null===e&&null===(e=I())&&(e=C()))),e}function K(){var e,n,r,i,s,u;if(s=o,u=o,null!==(e=b()))if(null!==(n=_())){for(r=[],null===(i=z())&&(i=$());null!==i;)r.push(i),null===(i=z())&&(i=$());null!==r&&null!==(i=_())?e=[e,n,r,i]:(e=null,o=u)}else e=null,o=u;else e=null,o=u;return null!==e&&(e=function(e){return t.substring(o,e)}(s)),null===e&&(o=s),e}function Y(){var e,n,r,i,s,u;if(s=o,u=o,null!==(e=b()))if(null!==(n=_())){for(r=[],null===(i=z())&&(i=$());null!==i;)r.push(i),null===(i=z())&&(i=$());null!==r&&null!==(i=_())?e=[e,n,r,i]:(e=null,o=u)}else e=null,o=u;else e=null,o=u;return null!==e&&(e=function(e){var n=t.substring(o,e).trim();return n.substring(1,n.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1")}(s)),null===e&&(o=s),e}function z(){var e;return null===(e=C())&&(33===t.charCodeAt(o)?(e="!",o++):(e=null,a('"!"')),null===e&&(/^[#-[]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[#-[]")),null===e&&(/^[\]-~]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[\\]-~]")),null===e&&(e=I())))),e}function $(){var e,n,r;return r=o,92===t.charCodeAt(o)?(e="\\",o++):(e=null,a('"\\\\"')),null!==e?(/^[\0-\t]/.test(t.charAt(o))?(n=t.charAt(o),o++):(n=null,a("[\\0-\\t]")),null===n&&(/^[\x0B-\f]/.test(t.charAt(o))?(n=t.charAt(o),o++):(n=null,a("[\\x0B-\\f]")),null===n&&(/^[\x0E-]/.test(t.charAt(o))?(n=t.charAt(o),o++):(n=null,a("[\\x0E-]")))),null!==n?e=[e,n]:(e=null,o=r)):(e=null,o=r),e}function J(){var e,n,r,i,s,u;return s=o,u=o,null!==(e=Q())?(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=null!==(r=te())?r:"")&&null!==(i=oe())?e=[e,n,r,i]:(e=null,o=u)):(e=null,o=u),null!==e&&(e=function(e){try{Hn.uri=new Ln(Hn.scheme,Hn.user,Hn.host,Hn.port),delete Hn.scheme,delete Hn.user,delete Hn.host,delete Hn.host_type,delete Hn.port}catch(e){Hn=-1}}()),null===e&&(o=s),e}function X(){var e,n,i,s,u,l,c,f;return c=o,f=o,null!==(e=Q())?(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(i=null!==(i=te())?i:"")&&null!==(s=oe())&&null!==(u=ge())&&null!==(l=null!==(l=ke())?l:"")?e=[e,n,i,s,u,l]:(e=null,o=f)):(e=null,o=f),null!==e&&(e=function(e){try{Hn.uri=new Ln(Hn.scheme,Hn.user,Hn.host,Hn.port,Hn.uri_params,Hn.uri_headers),delete Hn.scheme,delete Hn.user,delete Hn.host,delete Hn.host_type,delete Hn.port,delete Hn.uri_params,"SIP_URI"===r&&(Hn=Hn.uri)}catch(e){Hn=-1}}()),null===e&&(o=c),e}function Q(){var e;return null===(e=Z())&&(e=ee()),e}function Z(){var e,n,r;return n=o,"sips"===t.substr(o,4).toLowerCase()?(e=t.substr(o,4),o+=4):(e=null,a('"sips"')),null!==e&&(r=e,e=void(Hn.scheme=r.toLowerCase())),null===e&&(o=n),e}function ee(){var e,n,r;return n=o,"sip"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"sip"')),null!==e&&(r=e,e=void(Hn.scheme=r.toLowerCase())),null===e&&(o=n),e}function te(){var e,n,r,i,s,u;return i=o,s=o,null!==(e=ne())?(u=o,58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ie())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?(64===t.charCodeAt(o)?(r="@",o++):(r=null,a('"@"')),null!==r?e=[e,n,r]:(e=null,o=s)):(e=null,o=s)):(e=null,o=s),null!==e&&(e=function(e){Hn.user=decodeURIComponent(t.substring(o-1,e))}(i)),null===e&&(o=i),e}function ne(){var e,t;if(null===(t=S())&&null===(t=E())&&(t=re()),null!==t)for(e=[];null!==t;)e.push(t),null===(t=S())&&null===(t=E())&&(t=re());else e=null;return e}function re(){var e;return 38===t.charCodeAt(o)?(e="&",o++):(e=null,a('"&"')),null===e&&(61===t.charCodeAt(o)?(e="=",o++):(e=null,a('"="')),null===e&&(43===t.charCodeAt(o)?(e="+",o++):(e=null,a('"+"')),null===e&&(36===t.charCodeAt(o)?(e="$",o++):(e=null,a('"$"')),null===e&&(44===t.charCodeAt(o)?(e=",",o++):(e=null,a('","')),null===e&&(59===t.charCodeAt(o)?(e=";",o++):(e=null,a('";"')),null===e&&(63===t.charCodeAt(o)?(e="?",o++):(e=null,a('"?"')),null===e&&(47===t.charCodeAt(o)?(e="/",o++):(e=null,a('"/"'))))))))),e}function ie(){var e,n,r;for(r=o,e=[],null===(n=S())&&null===(n=E())&&(38===t.charCodeAt(o)?(n="&",o++):(n=null,a('"&"')),null===n&&(61===t.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(36===t.charCodeAt(o)?(n="$",o++):(n=null,a('"$"')),null===n&&(44===t.charCodeAt(o)?(n=",",o++):(n=null,a('","')))))));null!==n;)e.push(n),null===(n=S())&&null===(n=E())&&(38===t.charCodeAt(o)?(n="&",o++):(n=null,a('"&"')),null===n&&(61===t.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(36===t.charCodeAt(o)?(n="$",o++):(n=null,a('"$"')),null===n&&(44===t.charCodeAt(o)?(n=",",o++):(n=null,a('","')))))));return null!==e&&(e=function(e){Hn.password=t.substring(o,e)}(r)),null===e&&(o=r),e}function oe(){var e,n,r,i,s;return i=o,null!==(e=se())?(s=o,58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ve())?n=[n,r]:(n=null,o=s),null!==(n=null!==n?n:"")?e=[e,n]:(e=null,o=i)):(e=null,o=i),e}function se(){var e,n;return n=o,null===(e=ue())&&null===(e=pe())&&(e=ce()),null!==e&&(e=function(e){return Hn.host=t.substring(o,e).toLowerCase(),Hn.host}(n)),null===e&&(o=n),e}function ue(){var e,n,r,i,s,u;for(i=o,s=o,e=[],u=o,null!==(n=ae())?(46===t.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==r?n=[n,r]:(n=null,o=u)):(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=ae())?(46===t.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==r?n=[n,r]:(n=null,o=u)):(n=null,o=u);return null!==e&&null!==(n=le())?(46===t.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==(r=null!==r?r:"")?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e=function(e){return Hn.host_type="domain",t.substring(o,e)}(i)),null===e&&(o=i),e}function ae(){var e,n,r,i;if(i=o,null!==(e=m())){for(n=[],null===(r=m())&&(45===t.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(95===t.charCodeAt(o)?(r="_",o++):(r=null,a('"_"'))));null!==r;)n.push(r),null===(r=m())&&(45===t.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(95===t.charCodeAt(o)?(r="_",o++):(r=null,a('"_"'))));null!==n?e=[e,n]:(e=null,o=i)}else e=null,o=i;return e}function le(){var e,n,r,i;if(i=o,null!==(e=f())){for(n=[],null===(r=m())&&(45===t.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(95===t.charCodeAt(o)?(r="_",o++):(r=null,a('"_"'))));null!==r;)n.push(r),null===(r=m())&&(45===t.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(95===t.charCodeAt(o)?(r="_",o++):(r=null,a('"_"'))));null!==n?e=[e,n]:(e=null,o=i)}else e=null,o=i;return e}function ce(){var e,n,r,i,s;return i=o,s=o,91===t.charCodeAt(o)?(e="[",o++):(e=null,a('"["')),null!==e&&null!==(n=fe())?(93===t.charCodeAt(o)?(r="]",o++):(r=null,a('"]"')),null!==r?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(e=function(e){return Hn.host_type="IPv6",t.substring(o,e)}(i)),null===e&&(o=i),e}function fe(){var e,n,r,i,s,u,l,c,f,d,h,p,_,v,g,m;return v=o,g=o,null!==(e=de())?(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=de())?(58===t.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=de())?(58===t.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=de())?(58===t.charCodeAt(o)?(c=":",o++):(c=null,a('":"')),null!==c&&null!==(f=de())?(58===t.charCodeAt(o)?(d=":",o++):(d=null,a('":"')),null!==d&&null!==(h=de())?(58===t.charCodeAt(o)?(p=":",o++):(p=null,a('":"')),null!==p&&null!==(_=he())?e=[e,n,r,i,s,u,l,c,f,d,h,p,_]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,"::"===t.substr(o,2)?(e="::",o+=2):(e=null,a('"::"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?(58===t.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=de())?(58===t.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=de())?(58===t.charCodeAt(o)?(f=":",o++):(f=null,a('":"')),null!==f&&null!==(d=de())?(58===t.charCodeAt(o)?(h=":",o++):(h=null,a('":"')),null!==h&&null!==(p=he())?e=[e,n,r,i,s,u,l,c,f,d,h,p]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,"::"===t.substr(o,2)?(e="::",o+=2):(e=null,a('"::"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?(58===t.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=de())?(58===t.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=de())?(58===t.charCodeAt(o)?(f=":",o++):(f=null,a('":"')),null!==f&&null!==(d=he())?e=[e,n,r,i,s,u,l,c,f,d]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,"::"===t.substr(o,2)?(e="::",o+=2):(e=null,a('"::"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?(58===t.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=de())?(58===t.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=he())?e=[e,n,r,i,s,u,l,c]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,"::"===t.substr(o,2)?(e="::",o+=2):(e=null,a('"::"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?(58===t.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=he())?e=[e,n,r,i,s,u]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,"::"===t.substr(o,2)?(e="::",o+=2):(e=null,a('"::"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=he())?e=[e,n,r,i]:(e=null,o=g)):(e=null,o=g),null===e&&(g=o,"::"===t.substr(o,2)?(e="::",o+=2):(e=null,a('"::"')),null!==e&&null!==(n=he())?e=[e,n]:(e=null,o=g),null===e&&(g=o,"::"===t.substr(o,2)?(e="::",o+=2):(e=null,a('"::"')),null!==e&&null!==(n=de())?e=[e,n]:(e=null,o=g),null===e&&(g=o,null!==(e=de())?("::"===t.substr(o,2)?(n="::",o+=2):(n=null,a('"::"')),null!==n&&null!==(r=de())?(58===t.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=de())?(58===t.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=de())?(58===t.charCodeAt(o)?(c=":",o++):(c=null,a('":"')),null!==c&&null!==(f=de())?(58===t.charCodeAt(o)?(d=":",o++):(d=null,a('":"')),null!==d&&null!==(h=he())?e=[e,n,r,i,s,u,l,c,f,d,h]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,null!==(e=de())?(m=o,58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?("::"===t.substr(o,2)?(r="::",o+=2):(r=null,a('"::"')),null!==r&&null!==(i=de())?(58===t.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=de())?(58===t.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=de())?(58===t.charCodeAt(o)?(f=":",o++):(f=null,a('":"')),null!==f&&null!==(d=he())?e=[e,n,r,i,s,u,l,c,f,d]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,null!==(e=de())?(m=o,58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?("::"===t.substr(o,2)?(i="::",o+=2):(i=null,a('"::"')),null!==i&&null!==(s=de())?(58===t.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=de())?(58===t.charCodeAt(o)?(c=":",o++):(c=null,a('":"')),null!==c&&null!==(f=he())?e=[e,n,r,i,s,u,l,c,f]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,null!==(e=de())?(m=o,58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?(m=o,58===t.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=de())?i=[i,s]:(i=null,o=m),null!==(i=null!==i?i:"")?("::"===t.substr(o,2)?(s="::",o+=2):(s=null,a('"::"')),null!==s&&null!==(u=de())?(58===t.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=he())?e=[e,n,r,i,s,u,l,c]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,null!==(e=de())?(m=o,58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?(m=o,58===t.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=de())?i=[i,s]:(i=null,o=m),null!==(i=null!==i?i:"")?(m=o,58===t.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=de())?s=[s,u]:(s=null,o=m),null!==(s=null!==s?s:"")?("::"===t.substr(o,2)?(u="::",o+=2):(u=null,a('"::"')),null!==u&&null!==(l=he())?e=[e,n,r,i,s,u,l]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,null!==(e=de())?(m=o,58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?(m=o,58===t.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=de())?i=[i,s]:(i=null,o=m),null!==(i=null!==i?i:"")?(m=o,58===t.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=de())?s=[s,u]:(s=null,o=m),null!==(s=null!==s?s:"")?(m=o,58===t.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=de())?u=[u,l]:(u=null,o=m),null!==(u=null!==u?u:"")?("::"===t.substr(o,2)?(l="::",o+=2):(l=null,a('"::"')),null!==l&&null!==(c=de())?e=[e,n,r,i,s,u,l,c]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g),null===e&&(g=o,null!==(e=de())?(m=o,58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===t.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=de())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?(m=o,58===t.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=de())?i=[i,s]:(i=null,o=m),null!==(i=null!==i?i:"")?(m=o,58===t.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=de())?s=[s,u]:(s=null,o=m),null!==(s=null!==s?s:"")?(m=o,58===t.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=de())?u=[u,l]:(u=null,o=m),null!==(u=null!==u?u:"")?(m=o,58===t.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=de())?l=[l,c]:(l=null,o=m),null!==(l=null!==l?l:"")?("::"===t.substr(o,2)?(c="::",o+=2):(c=null,a('"::"')),null!==c?e=[e,n,r,i,s,u,l,c]:(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g)):(e=null,o=g))))))))))))))),null!==e&&(e=function(e){return Hn.host_type="IPv6",t.substring(o,e)}(v)),null===e&&(o=v),e}function de(){var e,t,n,r,i;return i=o,null!==(e=d())&&null!==(t=null!==(t=d())?t:"")&&null!==(n=null!==(n=d())?n:"")&&null!==(r=null!==(r=d())?r:"")?e=[e,t,n,r]:(e=null,o=i),e}function he(){var e,n,r,i;return i=o,null!==(e=de())?(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=de())?e=[e,n,r]:(e=null,o=i)):(e=null,o=i),null===e&&(e=pe()),e}function pe(){var e,n,r,i,s,u,l,c,f;return c=o,f=o,null!==(e=_e())?(46===t.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null!==n&&null!==(r=_e())?(46===t.charCodeAt(o)?(i=".",o++):(i=null,a('"."')),null!==i&&null!==(s=_e())?(46===t.charCodeAt(o)?(u=".",o++):(u=null,a('"."')),null!==u&&null!==(l=_e())?e=[e,n,r,i,s,u,l]:(e=null,o=f)):(e=null,o=f)):(e=null,o=f)):(e=null,o=f),null!==e&&(e=function(e){return Hn.host_type="IPv4",t.substring(o,e)}(c)),null===e&&(o=c),e}function _e(){var e,n,r,i;return i=o,"25"===t.substr(o,2)?(e="25",o+=2):(e=null,a('"25"')),null!==e?(/^[0-5]/.test(t.charAt(o))?(n=t.charAt(o),o++):(n=null,a("[0-5]")),null!==n?e=[e,n]:(e=null,o=i)):(e=null,o=i),null===e&&(i=o,50===t.charCodeAt(o)?(e="2",o++):(e=null,a('"2"')),null!==e?(/^[0-4]/.test(t.charAt(o))?(n=t.charAt(o),o++):(n=null,a("[0-4]")),null!==n&&null!==(r=c())?e=[e,n,r]:(e=null,o=i)):(e=null,o=i),null===e&&(i=o,49===t.charCodeAt(o)?(e="1",o++):(e=null,a('"1"')),null!==e&&null!==(n=c())&&null!==(r=c())?e=[e,n,r]:(e=null,o=i),null===e&&(i=o,/^[1-9]/.test(t.charAt(o))?(e=t.charAt(o),o++):(e=null,a("[1-9]")),null!==e&&null!==(n=c())?e=[e,n]:(e=null,o=i),null===e&&(e=c())))),e}function ve(){var e,t,n,r,i,s,u,a;return s=o,u=o,null!==(e=null!==(e=c())?e:"")&&null!==(t=null!==(t=c())?t:"")&&null!==(n=null!==(n=c())?n:"")&&null!==(r=null!==(r=c())?r:"")&&null!==(i=null!==(i=c())?i:"")?e=[e,t,n,r,i]:(e=null,o=u),null!==e&&(a=e,a=parseInt(a.join("")),Hn.port=a,e=a),null===e&&(o=s),e}function ge(){var e,n,r,i;for(e=[],i=o,59===t.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null!==n&&null!==(r=me())?n=[n,r]:(n=null,o=i);null!==n;)e.push(n),i=o,59===t.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null!==n&&null!==(r=me())?n=[n,r]:(n=null,o=i);return e}function me(){var e;return null===(e=ye())&&null===(e=Se())&&null===(e=Te())&&null===(e=Ee())&&null===(e=Ce())&&null===(e=be())&&(e=Ae()),e}function ye(){var e,n,r,i,s;return r=o,i=o,"transport="===t.substr(o,10).toLowerCase()?(e=t.substr(o,10),o+=10):(e=null,a('"transport="')),null!==e?("udp"===t.substr(o,3).toLowerCase()?(n=t.substr(o,3),o+=3):(n=null,a('"udp"')),null===n&&("tcp"===t.substr(o,3).toLowerCase()?(n=t.substr(o,3),o+=3):(n=null,a('"tcp"')),null===n&&("sctp"===t.substr(o,4).toLowerCase()?(n=t.substr(o,4),o+=4):(n=null,a('"sctp"')),null===n&&("tls"===t.substr(o,3).toLowerCase()?(n=t.substr(o,3),o+=3):(n=null,a('"tls"')),null===n&&(n=k())))),null!==n?e=[e,n]:(e=null,o=i)):(e=null,o=i),null!==e&&(s=e[1],Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.transport=s.toLowerCase())),null===e&&(o=r),e}function Se(){var e,n,r,i,s;return r=o,i=o,"user="===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"user="')),null!==e?("phone"===t.substr(o,5).toLowerCase()?(n=t.substr(o,5),o+=5):(n=null,a('"phone"')),null===n&&("ip"===t.substr(o,2).toLowerCase()?(n=t.substr(o,2),o+=2):(n=null,a('"ip"')),null===n&&(n=k())),null!==n?e=[e,n]:(e=null,o=i)):(e=null,o=i),null!==e&&(s=e[1],Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.user=s.toLowerCase())),null===e&&(o=r),e}function Te(){var e,n,r,i,s;return r=o,i=o,"method="===t.substr(o,7).toLowerCase()?(e=t.substr(o,7),o+=7):(e=null,a('"method="')),null!==e&&null!==(n=lt())?e=[e,n]:(e=null,o=i),null!==e&&(s=e[1],Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.method=s)),null===e&&(o=r),e}function Ee(){var e,n,r,i,s;return r=o,i=o,"ttl="===t.substr(o,4).toLowerCase()?(e=t.substr(o,4),o+=4):(e=null,a('"ttl="')),null!==e&&null!==(n=Cn())?e=[e,n]:(e=null,o=i),null!==e&&(s=e[1],Hn.params||(Hn.params={}),e=void(Hn.params.ttl=s)),null===e&&(o=r),e}function Ce(){var e,n,r,i,s;return r=o,i=o,"maddr="===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"maddr="')),null!==e&&null!==(n=se())?e=[e,n]:(e=null,o=i),null!==e&&(s=e[1],Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.maddr=s)),null===e&&(o=r),e}function be(){var e,n,r,i,s,u;return i=o,s=o,"lr"===t.substr(o,2).toLowerCase()?(e=t.substr(o,2),o+=2):(e=null,a('"lr"')),null!==e?(u=o,61===t.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null!==n&&null!==(r=k())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?e=[e,n]:(e=null,o=s)):(e=null,o=s),null!==e&&(Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.lr=void 0)),null===e&&(o=i),e}function Ae(){var e,n,r,i,s,u,l,c;return i=o,s=o,null!==(e=we())?(u=o,61===t.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null!==n&&null!==(r=Re())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?e=[e,n]:(e=null,o=s)):(e=null,o=s),null!==e&&(l=e[0],c=e[1],Hn.uri_params||(Hn.uri_params={}),c=void 0===c?void 0:c[1],e=void(Hn.uri_params[l.toLowerCase()]=c)),null===e&&(o=i),e}function we(){var e,t,n;if(n=o,null!==(t=Ie()))for(e=[];null!==t;)e.push(t),t=Ie();else e=null;return null!==e&&(e=e.join("")),null===e&&(o=n),e}function Re(){var e,t,n;if(n=o,null!==(t=Ie()))for(e=[];null!==t;)e.push(t),t=Ie();else e=null;return null!==e&&(e=e.join("")),null===e&&(o=n),e}function Ie(){var e;return null===(e=xe())&&null===(e=S())&&(e=E()),e}function xe(){var e;return 91===t.charCodeAt(o)?(e="[",o++):(e=null,a('"["')),null===e&&(93===t.charCodeAt(o)?(e="]",o++):(e=null,a('"]"')),null===e&&(47===t.charCodeAt(o)?(e="/",o++):(e=null,a('"/"')),null===e&&(58===t.charCodeAt(o)?(e=":",o++):(e=null,a('":"')),null===e&&(38===t.charCodeAt(o)?(e="&",o++):(e=null,a('"&"')),null===e&&(43===t.charCodeAt(o)?(e="+",o++):(e=null,a('"+"')),null===e&&(36===t.charCodeAt(o)?(e="$",o++):(e=null,a('"$"')))))))),e}function ke(){var e,n,r,i,s,u,l;if(u=o,63===t.charCodeAt(o)?(e="?",o++):(e=null,a('"?"')),null!==e)if(null!==(n=Oe())){for(r=[],l=o,38===t.charCodeAt(o)?(i="&",o++):(i=null,a('"&"')),null!==i&&null!==(s=Oe())?i=[i,s]:(i=null,o=l);null!==i;)r.push(i),l=o,38===t.charCodeAt(o)?(i="&",o++):(i=null,a('"&"')),null!==i&&null!==(s=Oe())?i=[i,s]:(i=null,o=l);null!==r?e=[e,n,r]:(e=null,o=u)}else e=null,o=u;else e=null,o=u;return e}function Oe(){var e,n,r,i,s,u,l;return i=o,s=o,null!==(e=Ne())?(61===t.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null!==n&&null!==(r=Pe())?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(u=e[0],l=e[2],u=u.join("").toLowerCase(),l=l.join(""),Hn.uri_headers||(Hn.uri_headers={}),e=void(Hn.uri_headers[u]?Hn.uri_headers[u].push(l):Hn.uri_headers[u]=[l])),null===e&&(o=i),e}function Ne(){var e,t;if(null===(t=De())&&null===(t=S())&&(t=E()),null!==t)for(e=[];null!==t;)e.push(t),null===(t=De())&&null===(t=S())&&(t=E());else e=null;return e}function Pe(){var e,t;for(e=[],null===(t=De())&&null===(t=S())&&(t=E());null!==t;)e.push(t),null===(t=De())&&null===(t=S())&&(t=E());return e}function De(){var e;return 91===t.charCodeAt(o)?(e="[",o++):(e=null,a('"["')),null===e&&(93===t.charCodeAt(o)?(e="]",o++):(e=null,a('"]"')),null===e&&(47===t.charCodeAt(o)?(e="/",o++):(e=null,a('"/"')),null===e&&(63===t.charCodeAt(o)?(e="?",o++):(e=null,a('"?"')),null===e&&(58===t.charCodeAt(o)?(e=":",o++):(e=null,a('":"')),null===e&&(43===t.charCodeAt(o)?(e="+",o++):(e=null,a('"+"')),null===e&&(36===t.charCodeAt(o)?(e="$",o++):(e=null,a('"$"')))))))),e}function Me(){var e,t,n,r,i,s;return s=o,null!==(e=lt())&&null!==(t=v())&&null!==(n=Ue())&&null!==(r=v())&&null!==(i=Ze())?e=[e,t,n,r,i]:(e=null,o=s),e}function Ue(){var e;return null===(e=X())&&(e=Le()),e}function Le(){var e,n,r,i;return i=o,null!==(e=ze())?(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n?(null===(r=qe())&&(r=Fe()),null!==r?e=[e,n,r]:(e=null,o=i)):(e=null,o=i)):(e=null,o=i),e}function qe(){var e,n,r,i,s;return i=o,null===(e=He())&&(e=je()),null!==e?(s=o,63===t.charCodeAt(o)?(n="?",o++):(n=null,a('"?"')),null!==n&&null!==(r=Qe())?n=[n,r]:(n=null,o=s),null!==(n=null!==n?n:"")?e=[e,n]:(e=null,o=i)):(e=null,o=i),e}function He(){var e,n,r,i;return i=o,"//"===t.substr(o,2)?(e="//",o+=2):(e=null,a('"//"')),null!==e&&null!==(n=$e())&&null!==(r=null!==(r=je())?r:"")?e=[e,n,r]:(e=null,o=i),e}function je(){var e,n,r;return r=o,47===t.charCodeAt(o)?(e="/",o++):(e=null,a('"/"')),null!==e&&null!==(n=We())?e=[e,n]:(e=null,o=r),e}function Fe(){var e,t,n,r;if(r=o,null!==(e=Be())){for(t=[],n=Ge();null!==n;)t.push(n),n=Ge();null!==t?e=[e,t]:(e=null,o=r)}else e=null,o=r;return e}function Ge(){var e;return null===(e=y())&&null===(e=S())&&(e=E()),e}function Be(){var e;return null===(e=S())&&null===(e=E())&&(59===t.charCodeAt(o)?(e=";",o++):(e=null,a('";"')),null===e&&(63===t.charCodeAt(o)?(e="?",o++):(e=null,a('"?"')),null===e&&(58===t.charCodeAt(o)?(e=":",o++):(e=null,a('":"')),null===e&&(64===t.charCodeAt(o)?(e="@",o++):(e=null,a('"@"')),null===e&&(38===t.charCodeAt(o)?(e="&",o++):(e=null,a('"&"')),null===e&&(61===t.charCodeAt(o)?(e="=",o++):(e=null,a('"="')),null===e&&(43===t.charCodeAt(o)?(e="+",o++):(e=null,a('"+"')),null===e&&(36===t.charCodeAt(o)?(e="$",o++):(e=null,a('"$"')),null===e&&(44===t.charCodeAt(o)?(e=",",o++):(e=null,a('","'))))))))))),e}function We(){var e,n,r,i,s,u;if(s=o,null!==(e=Ve())){for(n=[],u=o,47===t.charCodeAt(o)?(r="/",o++):(r=null,a('"/"')),null!==r&&null!==(i=Ve())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,47===t.charCodeAt(o)?(r="/",o++):(r=null,a('"/"')),null!==r&&null!==(i=Ve())?r=[r,i]:(r=null,o=u);null!==n?e=[e,n]:(e=null,o=s)}else e=null,o=s;return e}function Ve(){var e,n,r,i,s,u;for(s=o,e=[],n=Ye();null!==n;)e.push(n),n=Ye();if(null!==e){for(n=[],u=o,59===t.charCodeAt(o)?(r=";",o++):(r=null,a('";"')),null!==r&&null!==(i=Ke())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,59===t.charCodeAt(o)?(r=";",o++):(r=null,a('";"')),null!==r&&null!==(i=Ke())?r=[r,i]:(r=null,o=u);null!==n?e=[e,n]:(e=null,o=s)}else e=null,o=s;return e}function Ke(){var e,t;for(e=[],t=Ye();null!==t;)e.push(t),t=Ye();return e}function Ye(){var e;return null===(e=S())&&null===(e=E())&&(58===t.charCodeAt(o)?(e=":",o++):(e=null,a('":"')),null===e&&(64===t.charCodeAt(o)?(e="@",o++):(e=null,a('"@"')),null===e&&(38===t.charCodeAt(o)?(e="&",o++):(e=null,a('"&"')),null===e&&(61===t.charCodeAt(o)?(e="=",o++):(e=null,a('"="')),null===e&&(43===t.charCodeAt(o)?(e="+",o++):(e=null,a('"+"')),null===e&&(36===t.charCodeAt(o)?(e="$",o++):(e=null,a('"$"')),null===e&&(44===t.charCodeAt(o)?(e=",",o++):(e=null,a('","'))))))))),e}function ze(){var e,n,r,i,s;if(i=o,s=o,null!==(e=f())){for(n=[],null===(r=f())&&null===(r=c())&&(43===t.charCodeAt(o)?(r="+",o++):(r=null,a('"+"')),null===r&&(45===t.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(46===t.charCodeAt(o)?(r=".",o++):(r=null,a('"."')))));null!==r;)n.push(r),null===(r=f())&&null===(r=c())&&(43===t.charCodeAt(o)?(r="+",o++):(r=null,a('"+"')),null===r&&(45===t.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(46===t.charCodeAt(o)?(r=".",o++):(r=null,a('"."')))));null!==n?e=[e,n]:(e=null,o=s)}else e=null,o=s;return null!==e&&(e=function(e){Hn.scheme=t.substring(o,e)}(i)),null===e&&(o=i),e}function $e(){var e;return null===(e=Je())&&(e=Xe()),e}function Je(){var e,n,r,i;return r=o,i=o,null!==(e=te())?(64===t.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null!==n?e=[e,n]:(e=null,o=i)):(e=null,o=i),null!==(e=null!==e?e:"")&&null!==(n=oe())?e=[e,n]:(e=null,o=r),e=null!==e?e:""}function Xe(){var e,n;if(null===(n=S())&&null===(n=E())&&(36===t.charCodeAt(o)?(n="$",o++):(n=null,a('"$"')),null===n&&(44===t.charCodeAt(o)?(n=",",o++):(n=null,a('","')),null===n&&(59===t.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null===n&&(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null===n&&(64===t.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null===n&&(38===t.charCodeAt(o)?(n="&",o++):(n=null,a('"&"')),null===n&&(61===t.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=S())&&null===(n=E())&&(36===t.charCodeAt(o)?(n="$",o++):(n=null,a('"$"')),null===n&&(44===t.charCodeAt(o)?(n=",",o++):(n=null,a('","')),null===n&&(59===t.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null===n&&(58===t.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null===n&&(64===t.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null===n&&(38===t.charCodeAt(o)?(n="&",o++):(n=null,a('"&"')),null===n&&(61===t.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null===n&&(43===t.charCodeAt(o)?(n="+",o++):(n=null,a('"+"'))))))))));else e=null;return e}function Qe(){var e,t;for(e=[],t=Ge();null!==t;)e.push(t),t=Ge();return e}function Ze(){var e,n,r,i,s,u,l,f;if(l=o,f=o,"sip"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"SIP"')),null!==e)if(47===t.charCodeAt(o)?(n="/",o++):(n=null,a('"/"')),null!==n){if(null!==(i=c()))for(r=[];null!==i;)r.push(i),i=c();else r=null;if(null!==r)if(46===t.charCodeAt(o)?(i=".",o++):(i=null,a('"."')),null!==i){if(null!==(u=c()))for(s=[];null!==u;)s.push(u),u=c();else s=null;null!==s?e=[e,n,r,i,s]:(e=null,o=f)}else e=null,o=f;else e=null,o=f}else e=null,o=f;else e=null,o=f;return null!==e&&(e=function(e){Hn.sip_version=t.substring(o,e)}(l)),null===e&&(o=l),e}function et(){var e;return"INVITE"===t.substr(o,6)?(e="INVITE",o+=6):(e=null,a('"INVITE"')),e}function tt(){var e;return"ACK"===t.substr(o,3)?(e="ACK",o+=3):(e=null,a('"ACK"')),e}function nt(){var e;return"OPTIONS"===t.substr(o,7)?(e="OPTIONS",o+=7):(e=null,a('"OPTIONS"')),e}function rt(){var e;return"BYE"===t.substr(o,3)?(e="BYE",o+=3):(e=null,a('"BYE"')),e}function it(){var e;return"CANCEL"===t.substr(o,6)?(e="CANCEL",o+=6):(e=null,a('"CANCEL"')),e}function ot(){var e;return"REGISTER"===t.substr(o,8)?(e="REGISTER",o+=8):(e=null,a('"REGISTER"')),e}function st(){var e;return"SUBSCRIBE"===t.substr(o,9)?(e="SUBSCRIBE",o+=9):(e=null,a('"SUBSCRIBE"')),e}function ut(){var e;return"NOTIFY"===t.substr(o,6)?(e="NOTIFY",o+=6):(e=null,a('"NOTIFY"')),e}function at(){var e;return"REFER"===t.substr(o,5)?(e="REFER",o+=5):(e=null,a('"REFER"')),e}function lt(){var e,n;return n=o,null===(e=et())&&null===(e=tt())&&null===(e=nt())&&null===(e=rt())&&null===(e=it())&&null===(e=ot())&&null===(e=st())&&null===(e=ut())&&null===(e=at())&&(e=k()),null!==e&&(e=function(e){return Hn.method=t.substring(o,e),Hn.method}(n)),null===e&&(o=n),e}function ct(){var e,t,n,r,i,s;return s=o,null!==(e=Ze())&&null!==(t=v())&&null!==(n=ft())&&null!==(r=v())&&null!==(i=ht())?e=[e,t,n,r,i]:(e=null,o=s),e}function ft(){var e,t,n;return t=o,null!==(e=dt())&&(n=e,e=void(Hn.status_code=parseInt(n.join("")))),null===e&&(o=t),e}function dt(){var e,t,n,r;return r=o,null!==(e=c())&&null!==(t=c())&&null!==(n=c())?e=[e,t,n]:(e=null,o=r),e}function ht(){var e,n,r;for(r=o,e=[],null===(n=y())&&null===(n=S())&&null===(n=E())&&null===(n=I())&&null===(n=x())&&null===(n=v())&&(n=g());null!==n;)e.push(n),null===(n=y())&&null===(n=S())&&null===(n=E())&&null===(n=I())&&null===(n=x())&&null===(n=v())&&(n=g());return null!==e&&(e=function(e){Hn.reason_phrase=t.substring(o,e)}(r)),null===e&&(o=r),e}function pt(){var e,t,n,r,i,s,u;if(i=o,s=o,null===(e=J())&&(e=_t()),null!==e){for(t=[],u=o,null!==(n=F())&&null!==(r=gt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=F())&&null!==(r=gt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;return null!==e&&(e=function(e){var t;Hn.multi_header||(Hn.multi_header=[]);try{t=new qn(Hn.uri,Hn.display_name,Hn.params),delete Hn.uri,delete Hn.display_name,delete Hn.params}catch(e){t=null}Hn.multi_header.push({possition:o,offset:e,parsed:t})}(i)),null===e&&(o=i),e}function _t(){var e,t,n,r,i;return i=o,null!==(e=null!==(e=vt())?e:"")&&null!==(t=H())&&null!==(n=X())&&null!==(r=q())?e=[e,t,n,r]:(e=null,o=i),e}function vt(){var e,t,n,r,i,s,u,a;if(i=o,s=o,null!==(e=k())){for(t=[],u=o,null!==(n=C())&&null!==(r=k())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=C())&&null!==(r=k())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;return null===e&&(e=Y()),null!==e&&(a=e,e=void(Hn.display_name="string"==typeof a?a:a[1].reduce((function(e,t){return e+t[0]+t[1]}),a[0]))),null===e&&(o=i),e}function gt(){var e;return null===(e=mt())&&null===(e=yt())&&(e=Et()),e}function mt(){var e,n,r,i,s,u;return i=o,s=o,"q"===t.substr(o,1).toLowerCase()?(e=t.substr(o,1),o++):(e=null,a('"q"')),null!==e&&null!==(n=M())&&null!==(r=Tt())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],Hn.params||(Hn.params={}),e=void(Hn.params.q=u)),null===e&&(o=i),e}function yt(){var e,n,r,i,s,u;return i=o,s=o,"expires"===t.substr(o,7).toLowerCase()?(e=t.substr(o,7),o+=7):(e=null,a('"expires"')),null!==e&&null!==(n=M())&&null!==(r=St())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],Hn.params||(Hn.params={}),e=void(Hn.params.expires=u)),null===e&&(o=i),e}function St(){var e,t,n;if(n=o,null!==(t=c()))for(e=[];null!==t;)e.push(t),t=c();else e=null;return null!==e&&(e=parseInt(e.join(""))),null===e&&(o=n),e}function Tt(){var e,n,r,i,s,u,l,f;return u=o,l=o,48===t.charCodeAt(o)?(e="0",o++):(e=null,a('"0"')),null!==e?(f=o,46===t.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null!==n&&null!==(r=null!==(r=c())?r:"")&&null!==(i=null!==(i=c())?i:"")&&null!==(s=null!==(s=c())?s:"")?n=[n,r,i,s]:(n=null,o=f),null!==(n=null!==n?n:"")?e=[e,n]:(e=null,o=l)):(e=null,o=l),null!==e&&(e=function(e){return parseFloat(t.substring(o,e))}(u)),null===e&&(o=u),e}function Et(){var e,t,n,r,i,s,u,a;return r=o,i=o,null!==(e=k())?(s=o,null!==(t=M())&&null!==(n=Ct())?t=[t,n]:(t=null,o=s),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,o=i)):(e=null,o=i),null!==e&&(u=e[0],a=e[1],Hn.params||(Hn.params={}),a=void 0===a?void 0:a[1],e=void(Hn.params[u.toLowerCase()]=a)),null===e&&(o=r),e}function Ct(){var e;return null===(e=k())&&null===(e=se())&&(e=K()),e}function bt(){var e;return"render"===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"render"')),null===e&&("session"===t.substr(o,7).toLowerCase()?(e=t.substr(o,7),o+=7):(e=null,a('"session"')),null===e&&("icon"===t.substr(o,4).toLowerCase()?(e=t.substr(o,4),o+=4):(e=null,a('"icon"')),null===e&&("alert"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"alert"')),null===e&&(e=k())))),e}function At(){var e;return null===(e=wt())&&(e=Et()),e}function wt(){var e,n,r,i;return i=o,"handling"===t.substr(o,8).toLowerCase()?(e=t.substr(o,8),o+=8):(e=null,a('"handling"')),null!==e&&null!==(n=M())?("optional"===t.substr(o,8).toLowerCase()?(r=t.substr(o,8),o+=8):(r=null,a('"optional"')),null===r&&("required"===t.substr(o,8).toLowerCase()?(r=t.substr(o,8),o+=8):(r=null,a('"required"')),null===r&&(r=k())),null!==r?e=[e,n,r]:(e=null,o=i)):(e=null,o=i),e}function Rt(){var e,t,n,r,i,s,u,a;if(u=o,null!==(e=It()))if(null!==(t=D()))if(null!==(n=Pt())){for(r=[],a=o,null!==(i=F())&&null!==(s=Dt())?i=[i,s]:(i=null,o=a);null!==i;)r.push(i),a=o,null!==(i=F())&&null!==(s=Dt())?i=[i,s]:(i=null,o=a);null!==r?e=[e,t,n,r]:(e=null,o=u)}else e=null,o=u;else e=null,o=u;else e=null,o=u;return e}function It(){var e;return null===(e=xt())&&(e=kt()),e}function xt(){var e;return"text"===t.substr(o,4).toLowerCase()?(e=t.substr(o,4),o+=4):(e=null,a('"text"')),null===e&&("image"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"image"')),null===e&&("audio"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"audio"')),null===e&&("video"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"video"')),null===e&&("application"===t.substr(o,11).toLowerCase()?(e=t.substr(o,11),o+=11):(e=null,a('"application"')),null===e&&(e=Ot()))))),e}function kt(){var e;return"message"===t.substr(o,7).toLowerCase()?(e=t.substr(o,7),o+=7):(e=null,a('"message"')),null===e&&("multipart"===t.substr(o,9).toLowerCase()?(e=t.substr(o,9),o+=9):(e=null,a('"multipart"')),null===e&&(e=Ot())),e}function Ot(){var e;return null===(e=k())&&(e=Nt()),e}function Nt(){var e,n,r;return r=o,"x-"===t.substr(o,2).toLowerCase()?(e=t.substr(o,2),o+=2):(e=null,a('"x-"')),null!==e&&null!==(n=k())?e=[e,n]:(e=null,o=r),e}function Pt(){var e;return null===(e=Ot())&&(e=k()),e}function Dt(){var e,t,n,r;return r=o,null!==(e=k())&&null!==(t=M())&&null!==(n=Mt())?e=[e,t,n]:(e=null,o=r),e}function Mt(){var e;return null===(e=k())&&(e=K()),e}function Ut(){var e,t,n,r;if(n=o,null!==(t=c()))for(e=[];null!==t;)e.push(t),t=c();else e=null;return null!==e&&(r=e,e=void(Hn.value=parseInt(r.join("")))),null===e&&(o=n),e}function Lt(){var e,n,r,i,s,u;if(s=o,null!==(e=O())){for(n=[],u=o,46===t.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==r&&null!==(i=O())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,46===t.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==r&&null!==(i=O())?r=[r,i]:(r=null,o=u);null!==n?e=[e,n]:(e=null,o=s)}else e=null,o=s;return e}function qt(){var e;return null===(e=Ht())&&(e=Et()),e}function Ht(){var e,n,r,i,s,u;return i=o,s=o,"tag"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"tag"')),null!==e&&null!==(n=M())&&null!==(r=k())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.tag=u)),null===e&&(o=i),e}function jt(){var e,n,r,i,s,u,l,c;if(l=o,"digest"===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"Digest"')),null!==e)if(null!==(n=C()))if(null!==(r=Bt())){for(i=[],c=o,null!==(s=j())&&null!==(u=Bt())?s=[s,u]:(s=null,o=c);null!==s;)i.push(s),c=o,null!==(s=j())&&null!==(u=Bt())?s=[s,u]:(s=null,o=c);null!==i?e=[e,n,r,i]:(e=null,o=l)}else e=null,o=l;else e=null,o=l;else e=null,o=l;return null===e&&(e=Ft()),e}function Ft(){var e,t,n,r,i,s,u,a;if(u=o,null!==(e=k()))if(null!==(t=C()))if(null!==(n=Gt())){for(r=[],a=o,null!==(i=j())&&null!==(s=Gt())?i=[i,s]:(i=null,o=a);null!==i;)r.push(i),a=o,null!==(i=j())&&null!==(s=Gt())?i=[i,s]:(i=null,o=a);null!==r?e=[e,t,n,r]:(e=null,o=u)}else e=null,o=u;else e=null,o=u;else e=null,o=u;return e}function Gt(){var e,t,n,r;return r=o,null!==(e=k())&&null!==(t=M())?(null===(n=k())&&(n=K()),null!==n?e=[e,t,n]:(e=null,o=r)):(e=null,o=r),e}function Bt(){var e;return null===(e=Wt())&&null===(e=Kt())&&null===(e=zt())&&null===(e=Jt())&&null===(e=Xt())&&null===(e=Qt())&&null===(e=Zt())&&(e=Gt()),e}function Wt(){var e,n,r,i;return i=o,"realm"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"realm"')),null!==e&&null!==(n=M())&&null!==(r=Vt())?e=[e,n,r]:(e=null,o=i),e}function Vt(){var e,t,n;return t=o,null!==(e=Y())&&(n=e,e=void(Hn.realm=n)),null===e&&(o=t),e}function Kt(){var e,n,r,i,s,u,l,c,f;if(c=o,"domain"===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"domain"')),null!==e)if(null!==(n=M()))if(null!==(r=B()))if(null!==(i=Yt())){if(s=[],f=o,null!==(l=v()))for(u=[];null!==l;)u.push(l),l=v();else u=null;for(null!==u&&null!==(l=Yt())?u=[u,l]:(u=null,o=f);null!==u;){if(s.push(u),f=o,null!==(l=v()))for(u=[];null!==l;)u.push(l),l=v();else u=null;null!==u&&null!==(l=Yt())?u=[u,l]:(u=null,o=f)}null!==s&&null!==(u=W())?e=[e,n,r,i,s,u]:(e=null,o=c)}else e=null,o=c;else e=null,o=c;else e=null,o=c;else e=null,o=c;return e}function Yt(){var e;return null===(e=Le())&&(e=je()),e}function zt(){var e,n,r,i;return i=o,"nonce"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"nonce"')),null!==e&&null!==(n=M())&&null!==(r=$t())?e=[e,n,r]:(e=null,o=i),e}function $t(){var e,t,n;return t=o,null!==(e=Y())&&(n=e,e=void(Hn.nonce=n)),null===e&&(o=t),e}function Jt(){var e,n,r,i,s,u;return i=o,s=o,"opaque"===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"opaque"')),null!==e&&null!==(n=M())&&null!==(r=Y())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.opaque=u)),null===e&&(o=i),e}function Xt(){var e,n,r,i,s;return i=o,"stale"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"stale"')),null!==e&&null!==(n=M())?(s=o,"true"===t.substr(o,4).toLowerCase()?(r=t.substr(o,4),o+=4):(r=null,a('"true"')),null!==r&&(r=void(Hn.stale=!0)),null===r&&(o=s),null===r&&(s=o,"false"===t.substr(o,5).toLowerCase()?(r=t.substr(o,5),o+=5):(r=null,a('"false"')),null!==r&&(r=void(Hn.stale=!1)),null===r&&(o=s)),null!==r?e=[e,n,r]:(e=null,o=i)):(e=null,o=i),e}function Qt(){var e,n,r,i,s,u;return i=o,s=o,"algorithm"===t.substr(o,9).toLowerCase()?(e=t.substr(o,9),o+=9):(e=null,a('"algorithm"')),null!==e&&null!==(n=M())?("md5"===t.substr(o,3).toLowerCase()?(r=t.substr(o,3),o+=3):(r=null,a('"MD5"')),null===r&&("md5-sess"===t.substr(o,8).toLowerCase()?(r=t.substr(o,8),o+=8):(r=null,a('"MD5-sess"')),null===r&&(r=k())),null!==r?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.algorithm=u.toUpperCase())),null===e&&(o=i),e}function Zt(){var e,n,r,i,s,u,l,c,f,d;if(c=o,"qop"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"qop"')),null!==e)if(null!==(n=M()))if(null!==(r=B())){if(f=o,null!==(i=en())){for(s=[],d=o,44===t.charCodeAt(o)?(u=",",o++):(u=null,a('","')),null!==u&&null!==(l=en())?u=[u,l]:(u=null,o=d);null!==u;)s.push(u),d=o,44===t.charCodeAt(o)?(u=",",o++):(u=null,a('","')),null!==u&&null!==(l=en())?u=[u,l]:(u=null,o=d);null!==s?i=[i,s]:(i=null,o=f)}else i=null,o=f;null!==i&&null!==(s=W())?e=[e,n,r,i,s]:(e=null,o=c)}else e=null,o=c;else e=null,o=c;else e=null,o=c;return e}function en(){var e,n,r;return n=o,"auth-int"===t.substr(o,8).toLowerCase()?(e=t.substr(o,8),o+=8):(e=null,a('"auth-int"')),null===e&&("auth"===t.substr(o,4).toLowerCase()?(e=t.substr(o,4),o+=4):(e=null,a('"auth"')),null===e&&(e=k())),null!==e&&(r=e,Hn.qop||(Hn.qop=[]),e=void Hn.qop.push(r.toLowerCase())),null===e&&(o=n),e}function tn(){var e,t,n,r,i,s,u;if(i=o,s=o,null!==(e=_t())){for(t=[],u=o,null!==(n=F())&&null!==(r=Et())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=F())&&null!==(r=Et())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=s)}else e=null,o=s;return null!==e&&(e=function(e){var t;Hn.multi_header||(Hn.multi_header=[]);try{t=new qn(Hn.uri,Hn.display_name,Hn.params),delete Hn.uri,delete Hn.display_name,delete Hn.params}catch(e){t=null}Hn.multi_header.push({possition:o,offset:e,parsed:t})}(i)),null===e&&(o=i),e}function nn(){var e;return null===(e=rn())&&(e=Et()),e}function rn(){var e,n,r,i,s,u,l;if(s=o,u=o,"cause"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"cause"')),null!==e)if(null!==(n=M())){if(null!==(i=c()))for(r=[];null!==i;)r.push(i),i=c();else r=null;null!==r?e=[e,n,r]:(e=null,o=u)}else e=null,o=u;else e=null,o=u;return null!==e&&(l=e[2],e=void(Hn.cause=parseInt(l.join("")))),null===e&&(o=s),e}function on(){var e,t,n,r,i,s;if(i=o,null!==(e=_t())){for(t=[],s=o,null!==(n=F())&&null!==(r=Et())?n=[n,r]:(n=null,o=s);null!==n;)t.push(n),s=o,null!==(n=F())&&null!==(r=Et())?n=[n,r]:(n=null,o=s);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e}function sn(){var e,n;return n=o,"active"===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"active"')),null===e&&("pending"===t.substr(o,7).toLowerCase()?(e=t.substr(o,7),o+=7):(e=null,a('"pending"')),null===e&&("terminated"===t.substr(o,10).toLowerCase()?(e=t.substr(o,10),o+=10):(e=null,a('"terminated"')),null===e&&(e=k()))),null!==e&&(e=function(e){Hn.state=t.substring(o,e)}(n)),null===e&&(o=n),e}function un(){var e,n,r,i,s,u,l,c;return i=o,s=o,"reason"===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"reason"')),null!==e&&null!==(n=M())&&null!==(r=an())?e=[e,n,r]:(e=null,o=s),null!==e&&(e=void(void 0!==(u=e[2])&&(Hn.reason=u))),null===e&&(o=i),null===e&&(i=o,s=o,"expires"===t.substr(o,7).toLowerCase()?(e=t.substr(o,7),o+=7):(e=null,a('"expires"')),null!==e&&null!==(n=M())&&null!==(r=St())?e=[e,n,r]:(e=null,o=s),null!==e&&(e=void(void 0!==(c=e[2])&&(Hn.expires=c))),null===e&&(o=i),null===e&&(i=o,s=o,"retry_after"===t.substr(o,11).toLowerCase()?(e=t.substr(o,11),o+=11):(e=null,a('"retry_after"')),null!==e&&null!==(n=M())&&null!==(r=St())?e=[e,n,r]:(e=null,o=s),null!==e&&(e=void(void 0!==(l=e[2])&&(Hn.retry_after=l))),null===e&&(o=i),null===e&&(e=Et()))),e}function an(){var e;return"deactivated"===t.substr(o,11).toLowerCase()?(e=t.substr(o,11),o+=11):(e=null,a('"deactivated"')),null===e&&("probation"===t.substr(o,9).toLowerCase()?(e=t.substr(o,9),o+=9):(e=null,a('"probation"')),null===e&&("rejected"===t.substr(o,8).toLowerCase()?(e=t.substr(o,8),o+=8):(e=null,a('"rejected"')),null===e&&("timeout"===t.substr(o,7).toLowerCase()?(e=t.substr(o,7),o+=7):(e=null,a('"timeout"')),null===e&&("giveup"===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"giveup"')),null===e&&("noresource"===t.substr(o,10).toLowerCase()?(e=t.substr(o,10),o+=10):(e=null,a('"noresource"')),null===e&&("invariant"===t.substr(o,9).toLowerCase()?(e=t.substr(o,9),o+=9):(e=null,a('"invariant"')),null===e&&(e=k()))))))),e}function ln(){var e;return null===(e=Ht())&&(e=Et()),e}function cn(){var e,t,n,r,i,s,u,a;if(u=o,null!==(e=gn()))if(null!==(t=C()))if(null!==(n=Sn())){for(r=[],a=o,null!==(i=F())&&null!==(s=fn())?i=[i,s]:(i=null,o=a);null!==i;)r.push(i),a=o,null!==(i=F())&&null!==(s=fn())?i=[i,s]:(i=null,o=a);null!==r?e=[e,t,n,r]:(e=null,o=u)}else e=null,o=u;else e=null,o=u;else e=null,o=u;return e}function fn(){var e;return null===(e=dn())&&null===(e=hn())&&null===(e=pn())&&null===(e=_n())&&null===(e=vn())&&(e=Et()),e}function dn(){var e,n,r,i,s,u;return i=o,s=o,"ttl"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"ttl"')),null!==e&&null!==(n=M())&&null!==(r=Cn())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.ttl=u)),null===e&&(o=i),e}function hn(){var e,n,r,i,s,u;return i=o,s=o,"maddr"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"maddr"')),null!==e&&null!==(n=M())&&null!==(r=se())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.maddr=u)),null===e&&(o=i),e}function pn(){var e,n,r,i,s,u;return i=o,s=o,"received"===t.substr(o,8).toLowerCase()?(e=t.substr(o,8),o+=8):(e=null,a('"received"')),null!==e&&null!==(n=M())?(null===(r=pe())&&(r=fe()),null!==r?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.received=u)),null===e&&(o=i),e}function _n(){var e,n,r,i,s,u;return i=o,s=o,"branch"===t.substr(o,6).toLowerCase()?(e=t.substr(o,6),o+=6):(e=null,a('"branch"')),null!==e&&null!==(n=M())&&null!==(r=k())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.branch=u)),null===e&&(o=i),e}function vn(){var e,n,r,i,s,u,l;if(s=o,u=o,"rport"===t.substr(o,5).toLowerCase()?(e=t.substr(o,5),o+=5):(e=null,a('"rport"')),null!==e){if(l=o,null!==(n=M())){for(r=[],i=c();null!==i;)r.push(i),i=c();null!==r?n=[n,r]:(n=null,o=l)}else n=null,o=l;null!==(n=null!==n?n:"")?e=[e,n]:(e=null,o=u)}else e=null,o=u;return null!==e&&(e=void("undefined"!=typeof response_port&&(Hn.rport=response_port.join("")))),null===e&&(o=s),e}function gn(){var e,t,n,r,i,s;return s=o,null!==(e=mn())&&null!==(t=D())&&null!==(n=k())&&null!==(r=D())&&null!==(i=yn())?e=[e,t,n,r,i]:(e=null,o=s),e}function mn(){var e,n,r;return n=o,"sip"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"SIP"')),null===e&&(e=k()),null!==e&&(r=e,e=void(Hn.protocol=r)),null===e&&(o=n),e}function yn(){var e,n,r;return n=o,"udp"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"UDP"')),null===e&&("tcp"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"TCP"')),null===e&&("tls"===t.substr(o,3).toLowerCase()?(e=t.substr(o,3),o+=3):(e=null,a('"TLS"')),null===e&&("sctp"===t.substr(o,4).toLowerCase()?(e=t.substr(o,4),o+=4):(e=null,a('"SCTP"')),null===e&&(e=k())))),null!==e&&(r=e,e=void(Hn.transport=r)),null===e&&(o=n),e}function Sn(){var e,t,n,r,i;return r=o,null!==(e=Tn())?(i=o,null!==(t=G())&&null!==(n=En())?t=[t,n]:(t=null,o=i),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,o=r)):(e=null,o=r),e}function Tn(){var e,n;return n=o,null===(e=pe())&&null===(e=ce())&&(e=ue()),null!==e&&(e=function(e){Hn.host=t.substring(o,e)}(n)),null===e&&(o=n),e}function En(){var e,t,n,r,i,s,u,a;return s=o,u=o,null!==(e=null!==(e=c())?e:"")&&null!==(t=null!==(t=c())?t:"")&&null!==(n=null!==(n=c())?n:"")&&null!==(r=null!==(r=c())?r:"")&&null!==(i=null!==(i=c())?i:"")?e=[e,t,n,r,i]:(e=null,o=u),null!==e&&(a=e,e=void(Hn.port=parseInt(a.join("")))),null===e&&(o=s),e}function Cn(){var e,t,n,r,i;return r=o,i=o,null!==(e=c())&&null!==(t=null!==(t=c())?t:"")&&null!==(n=null!==(n=c())?n:"")?e=[e,t,n]:(e=null,o=i),null!==e&&(e=parseInt(e.join(""))),null===e&&(o=r),e}function bn(){var e,t,n;return t=o,null!==(e=St())&&(n=e,e=void(Hn.expires=n)),null===e&&(o=t),e}function An(){var e;return null===(e=wn())&&(e=Et()),e}function wn(){var e,n,r,i,s,u;return i=o,s=o,"refresher"===t.substr(o,9).toLowerCase()?(e=t.substr(o,9),o+=9):(e=null,a('"refresher"')),null!==e&&null!==(n=M())?("uac"===t.substr(o,3).toLowerCase()?(r=t.substr(o,3),o+=3):(r=null,a('"uac"')),null===r&&("uas"===t.substr(o,3).toLowerCase()?(r=t.substr(o,3),o+=3):(r=null,a('"uas"'))),null!==r?e=[e,n,r]:(e=null,o=s)):(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.refresher=u.toLowerCase())),null===e&&(o=i),e}function Rn(){var e,t;for(e=[],null===(t=R())&&null===(t=x())&&(t=C());null!==t;)e.push(t),null===(t=R())&&null===(t=x())&&(t=C());return e}function In(){var e,n,r,i,s,u,l,c,f,d,h;return d=o,h=o,null!==(e=kn())?(45===t.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null!==n&&null!==(r=xn())?(45===t.charCodeAt(o)?(i="-",o++):(i=null,a('"-"')),null!==i&&null!==(s=xn())?(45===t.charCodeAt(o)?(u="-",o++):(u=null,a('"-"')),null!==u&&null!==(l=xn())?(45===t.charCodeAt(o)?(c="-",o++):(c=null,a('"-"')),null!==c&&null!==(f=On())?e=[e,n,r,i,s,u,l,c,f]:(e=null,o=h)):(e=null,o=h)):(e=null,o=h)):(e=null,o=h)):(e=null,o=h),null!==e&&(e=function(e,n){Hn=t.substring(o+5,e)}(d,e[0])),null===e&&(o=d),e}function xn(){var e,t,n,r,i;return i=o,null!==(e=d())&&null!==(t=d())&&null!==(n=d())&&null!==(r=d())?e=[e,t,n,r]:(e=null,o=i),e}function kn(){var e,t,n;return n=o,null!==(e=xn())&&null!==(t=xn())?e=[e,t]:(e=null,o=n),e}function On(){var e,t,n,r;return r=o,null!==(e=xn())&&null!==(t=xn())&&null!==(n=xn())?e=[e,t,n]:(e=null,o=r),e}function Nn(){var e,n,r,i,s,u;return i=o,s=o,null!==(e=N())?(u=o,64===t.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null!==n&&null!==(r=N())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?e=[e,n]:(e=null,o=s)):(e=null,o=s),null!==e&&(e=function(e){Hn.call_id=t.substring(o,e)}(i)),null===e&&(o=i),e}function Pn(){var e;return null===(e=Dn())&&null===(e=Mn())&&null===(e=Un())&&(e=Et()),e}function Dn(){var e,n,r,i,s,u;return i=o,s=o,"to-tag"===t.substr(o,6)?(e="to-tag",o+=6):(e=null,a('"to-tag"')),null!==e&&null!==(n=M())&&null!==(r=k())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.to_tag=u)),null===e&&(o=i),e}function Mn(){var e,n,r,i,s,u;return i=o,s=o,"from-tag"===t.substr(o,8)?(e="from-tag",o+=8):(e=null,a('"from-tag"')),null!==e&&null!==(n=M())&&null!==(r=k())?e=[e,n,r]:(e=null,o=s),null!==e&&(u=e[2],e=void(Hn.from_tag=u)),null===e&&(o=i),e}function Un(){var e,n;return n=o,"early-only"===t.substr(o,10)?(e="early-only",o+=10):(e=null,a('"early-only"')),null!==e&&(e=void(Hn.early_only=!0)),null===e&&(o=n),e}var Ln=n(23),qn=n(59),Hn={};if(null===i[r]()||o!==t.length){var jn=Math.max(o,s),Fn=jn<t.length?t.charAt(jn):null,Gn=function(){for(var e=1,n=1,r=!1,i=0;i<Math.max(o,s);i++){var u=t.charAt(i);"\n"===u?(r||e++,n=1,r=!1):"\r"===u||"\u2028"===u||"\u2029"===u?(e++,n=1,r=!0):(n++,r=!1)}return{line:e,column:n}}();return new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}(u),Fn,jn,Gn.line,Gn.column),-1}return Hn},toSource:function(){return this._source},SyntaxError:function(t,n,r,i,o){this.name="SyntaxError",this.expected=t,this.found=n,this.message=function(t,n){var r;switch(t.length){case 0:r="end of input";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return"Expected "+r+" but "+(n?e(n):"end of input")+" found."}(t,n),this.offset=r,this.line=i,this.column=o}};return t.SyntaxError.prototype=Error.prototype,t}()},function(e,t,n){var r=n(9),i=n(65),o=n(45),s=Object.defineProperty;t.f=n(15)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(26)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){e.exports={default:n(102),__esModule:!0}},function(e,t,n){e.exports={default:n(146),__esModule:!0}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r=c(n(10)),i=c(n(11)),o=c(n(12)),s=c(n(36)),u=c(n(17)),a=c(n(1)),l=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var f=n(87),d=n(4),h=n(5),p=n(59),_=n(13),v=n(0)("JsSIP:SIPMessage"),g=function(){function e(t,n,r,i,o,s){if((0,a.default)(this,e),!t||!n||!r)return null;i=i||{},this.ua=r,this.headers={},this.method=t,this.ruri=n,this.body=s,this.extraHeaders=h.cloneArray(o),i.route_set?this.setHeader("route",i.route_set):r.configuration.use_preloaded_route&&this.setHeader("route","<"+String(r.transport.sip_uri)+";lr>"),this.setHeader("via",""),this.setHeader("max-forwards",d.MAX_FORWARDS);var u=i.to_uri||n,l=i.to_tag?{tag:i.to_tag}:null,c=void 0!==i.to_display_name?i.to_display_name:null;this.to=new p(u,c,l),this.setHeader("to",this.to.toString());var f=i.from_uri||r.configuration.uri,_={tag:i.from_tag||h.newTag()},v=void 0;v=void 0!==i.from_display_name?i.from_display_name:r.configuration.display_name?r.configuration.display_name:null,this.from=new p(f,v,_),this.setHeader("from",this.from.toString());var g=i.call_id||r.configuration.jssip_id+h.createRandomToken(15);this.call_id=g,this.setHeader("call-id",g);var m=i.cseq||Math.floor(1e4*Math.random());this.cseq=m,this.setHeader("cseq",String(m)+" "+String(t))}return(0,l.default)(e,[{key:"setHeader",value:function(e,t){for(var n=new RegExp("^\\s*"+String(e)+"\\s*:","i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[h.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){var t=this.headers[h.headerize(e)];if(t){if(t[0])return t[0]}else{var n=new RegExp("^\\s*"+String(e)+"\\s*:","i"),r=!0,i=!1,o=void 0;try{for(var s,a=(0,u.default)(this.extraHeaders);!(r=(s=a.next()).done);r=!0){var l=s.value;if(n.test(l))return l.substring(l.indexOf(":")+1).trim()}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}}},{key:"getHeaders",value:function(e){var t=this.headers[h.headerize(e)],n=[];if(t){var r=!0,i=!1,o=void 0;try{for(var s,a=(0,u.default)(t);!(r=(s=a.next()).done);r=!0){var l=s.value;n.push(l)}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}var c=new RegExp("^\\s*"+String(e)+"\\s*:","i"),f=!0,d=!1,p=void 0;try{for(var _,v=(0,u.default)(this.extraHeaders);!(f=(_=v.next()).done);f=!0){var g=_.value;c.test(g)&&n.push(g.substring(g.indexOf(":")+1).trim())}}catch(e){d=!0,p=e}finally{try{!f&&v.return&&v.return()}finally{if(d)throw p}}return n}},{key:"hasHeader",value:function(e){if(this.headers[h.headerize(e)])return!0;var t=new RegExp("^\\s*"+String(e)+"\\s*:","i"),n=!0,r=!1,i=void 0;try{for(var o,s=(0,u.default)(this.extraHeaders);!(n=(o=s.next()).done);n=!0){var a=o.value;if(t.test(a))return!0}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return!1}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=f.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){var e=String(this.method)+" "+String(this.ruri)+" SIP/2.0\r\n";for(var t in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,t)){var n=!0,r=!1,i=void 0;try{for(var o,s=(0,u.default)(this.headers[t]);!(n=(o=s.next()).done);n=!0){var a=o.value;e+=t+": "+String(a)+"\r\n"}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}var l=!0,c=!1,f=void 0;try{for(var p,_=(0,u.default)(this.extraHeaders);!(l=(p=_.next()).done);l=!0){var v=p.value;e+=String(v.trim())+"\r\n"}}catch(e){c=!0,f=e}finally{try{!l&&_.return&&_.return()}finally{if(c)throw f}}var g=[];switch(this.method){case d.REGISTER:g.push("path","gruu");break;case d.INVITE:this.ua.configuration.session_timers&&g.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&g.push("gruu"),g.push("ice","replaces");break;case d.UPDATE:this.ua.configuration.session_timers&&g.push("timer"),g.push("ice")}g.push("outbound");var m=this.ua.configuration.user_agent||d.USER_AGENT;if(e+="Allow: "+String(d.ALLOWED_METHODS)+"\r\n",e+="Supported: "+String(g)+"\r\n",e+="User-Agent: "+String(m)+"\r\n",this.body){var y=h.str_utf8_length(this.body);e+="Content-Length: "+String(y)+"\r\n\r\n",e+=this.body}else e+="Content-Length: 0\r\n\r\n";return e}},{key:"clone",value:function(){var t=new e(this.method,this.ruri,this.ua);return(0,s.default)(this.headers).forEach((function(e){t.headers[e]=this.headers[e].slice()}),this),t.body=this.body,t.extraHeaders=h.cloneArray(this.extraHeaders),t.to=this.to,t.from=this.from,t.call_id=this.call_id,t.cseq=this.cseq,t}}]),e}(),m=function(e){function t(e,n,o,s,u){(0,a.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,d.INVITE,e,n,o,s,u));return l.transaction=null,l}return(0,o.default)(t,e),(0,l.default)(t,[{key:"cancel",value:function(e){this.transaction.cancel(e)}},{key:"clone",value:function(){var e=new t(this.ruri,this.ua);return(0,s.default)(this.headers).forEach((function(t){e.headers[t]=this.headers[t].slice()}),this),e.body=this.body,e.extraHeaders=h.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e.transaction=this.transaction,e}}]),t}(g),y=function(){function e(){(0,a.default)(this,e),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return(0,l.default)(e,[{key:"addHeader",value:function(e,t){var n={raw:t};e=h.headerize(e),this.headers[e]?this.headers[e].push(n):this.headers[e]=[n]}},{key:"getHeader",value:function(e){var t=this.headers[h.headerize(e)];if(t)return t[0]?t[0].raw:void 0}},{key:"getHeaders",value:function(e){var t=this.headers[h.headerize(e)],n=[];if(!t)return[];var r=!0,i=!1,o=void 0;try{for(var s,a=(0,u.default)(t);!(r=(s=a.next()).done);r=!0){var l=s.value;n.push(l.raw)}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}},{key:"hasHeader",value:function(e){return!!this.headers[h.headerize(e)]}},{key:"parseHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e=h.headerize(e),this.headers[e]){if(!(t>=this.headers[e].length)){var n=this.headers[e][t],r=n.raw;if(n.parsed)return n.parsed;var i=_.parse(r,e.replace(/-/g,"_"));return-1===i?(this.headers[e].splice(t,1),void v('error parsing "'+String(e)+'" header field with value "'+String(r)+'"')):(n.parsed=i,i)}v('not so many "'+String(e)+'" headers present')}else v('header "'+String(e)+'" not present')}},{key:"s",value:function(e,t){return this.parseHeader(e,t)}},{key:"setHeader",value:function(e,t){var n={raw:t};this.headers[h.headerize(e)]=[n]}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=f.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){return this.data}}]),e}(),S=function(e){function t(e){(0,a.default)(this,t);var n=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return n.ua=e,n.headers={},n.ruri=null,n.transport=null,n.server_transaction=null,n}return(0,o.default)(t,e),(0,l.default)(t,[{key:"reply",value:function(e,t,n,r,i,o){var s=[],a=this.getHeader("To");if(t=t||null,!(e=e||null)||e<100||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+String(t));t=t||d.REASON_PHRASE[e]||"",n=h.cloneArray(n);var l="SIP/2.0 "+String(e)+" "+String(t)+"\r\n";if(this.method===d.INVITE&&e>100&&e<=200){var c=this.getHeaders("record-route"),f=!0,p=!1,_=void 0;try{for(var v,g=(0,u.default)(c);!(f=(v=g.next()).done);f=!0){var m=v.value;l+="Record-Route: "+String(m)+"\r\n"}}catch(e){p=!0,_=e}finally{try{!f&&g.return&&g.return()}finally{if(p)throw _}}}var y=this.getHeaders("via"),S=!0,T=!1,E=void 0;try{for(var C,b=(0,u.default)(y);!(S=(C=b.next()).done);S=!0){var A=C.value;l+="Via: "+String(A)+"\r\n"}}catch(e){T=!0,E=e}finally{try{!S&&b.return&&b.return()}finally{if(T)throw E}}!this.to_tag&&e>100?a+=";tag="+String(h.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(a+=";tag="+String(this.to_tag)),l+="To: "+String(a)+"\r\n",l+="From: "+String(this.getHeader("From"))+"\r\n",l+="Call-ID: "+String(this.call_id)+"\r\n",l+="CSeq: "+String(this.cseq)+" "+String(this.method)+"\r\n";var w=!0,R=!1,I=void 0;try{for(var x,k=(0,u.default)(n);!(w=(x=k.next()).done);w=!0){var O=x.value;l+=String(O.trim())+"\r\n"}}catch(e){R=!0,I=e}finally{try{!w&&k.return&&k.return()}finally{if(R)throw I}}switch(this.method){case d.INVITE:this.ua.configuration.session_timers&&s.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&s.push("gruu"),s.push("ice","replaces");break;case d.UPDATE:this.ua.configuration.session_timers&&s.push("timer"),r&&s.push("ice"),s.push("replaces")}if(s.push("outbound"),this.method===d.OPTIONS?(l+="Allow: "+String(d.ALLOWED_METHODS)+"\r\n",l+="Accept: "+String(d.ACCEPTED_BODY_TYPES)+"\r\n"):405===e?l+="Allow: "+String(d.ALLOWED_METHODS)+"\r\n":415===e&&(l+="Accept: "+String(d.ACCEPTED_BODY_TYPES)+"\r\n"),l+="Supported: "+String(s)+"\r\n",r){var N=h.str_utf8_length(r);l+="Content-Type: application/sdp\r\n",l+="Content-Length: "+String(N)+"\r\n\r\n",l+=r}else l+="Content-Length: 0\r\n\r\n";this.server_transaction.receiveResponse(e,l,i,o)}},{key:"reply_sl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getHeaders("via");if(!e||e<100||e>699)throw new TypeError("Invalid status_code: "+String(e));if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+String(t));t=t||d.REASON_PHRASE[e]||"";var r="SIP/2.0 "+String(e)+" "+String(t)+"\r\n",i=!0,o=!1,s=void 0;try{for(var a,l=(0,u.default)(n);!(i=(a=l.next()).done);i=!0){var c=a.value;r+="Via: "+String(c)+"\r\n"}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var f=this.getHeader("To");!this.to_tag&&e>100?f+=";tag="+String(h.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(f+=";tag="+String(this.to_tag)),r+="To: "+String(f)+"\r\n",r+="From: "+String(this.getHeader("From"))+"\r\n",r+="Call-ID: "+String(this.call_id)+"\r\n",r+="CSeq: "+String(this.cseq)+" "+String(this.method)+"\r\n",r+="Content-Length: 0\r\n\r\n",this.transport.send(r)}}]),t}(y),T=function(e){function t(){(0,a.default)(this,t);var e=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return e.headers={},e.status_code=null,e.reason_phrase=null,e}return(0,o.default)(t,e),t}(y);e.exports={OutgoingRequest:g,InitialOutgoingInviteRequest:m,IncomingRequest:S,IncomingResponse:T}},function(e,t,n){var r=n(14),i=n(30);e.exports=n(15)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";var r=a(n(16)),i=a(n(10)),o=a(n(1)),s=a(n(11)),u=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){(0,o.default)(this,t);var u=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return u.code=1,u.name="CONFIGURATION_ERROR",u.parameter=e,u.value=n,u.message=u.value?"Invalid value "+String((0,r.default)(u.value))+' for parameter "'+String(u.parameter)+'"':"Missing parameter: "+String(u.parameter),u}return(0,u.default)(t,e),t}(Error),c=function(e){function t(e){(0,o.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return n.code=2,n.name="INVALID_STATE_ERROR",n.status=e,n.message="Invalid status: "+String(e),n}return(0,u.default)(t,e),t}(Error),f=function(e){function t(e){(0,o.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return n.code=3,n.name="NOT_SUPPORTED_ERROR",n.message=e,n}return(0,u.default)(t,e),t}(Error),d=function(e){function t(e){(0,o.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return n.code=4,n.name="NOT_READY_ERROR",n.message=e,n}return(0,u.default)(t,e),t}(Error);e.exports={ConfigurationError:l,InvalidStateError:c,NotSupportedError:f,NotReadyError:d}},function(e,t,n){"use strict";var r=u(n(17)),i=u(n(16)),o=u(n(1)),s=u(n(2));function u(e){return e&&e.__esModule?e:{default:e}}var a=n(4),l=n(5),c=n(13);e.exports=function(){function e(t,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if((0,o.default)(this,e),!r)throw new TypeError('missing or invalid "host" parameter');for(var l in this._parameters={},this._headers={},this._scheme=t||a.SIP,this._user=n,this._host=r,this._port=i,s)Object.prototype.hasOwnProperty.call(s,l)&&this.setParam(l,s[l]);for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&this.setHeader(c,u[c])}return(0,s.default)(e,null,[{key:"parse",value:function(e){return-1!==(e=c.parse(e,"SIP_URI"))?e:void 0}}]),(0,s.default)(e,[{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(e,t){this._headers[l.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){if(e)return this._headers[l.headerize(e)]}},{key:"hasHeader",value:function(e){if(e)return!!this._headers.hasOwnProperty(l.headerize(e))}},{key:"deleteHeader",value:function(e){if(e=l.headerize(e),this._headers.hasOwnProperty(e)){var t=this._headers[e];return delete this._headers[e],t}}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse((0,i.default)(this._parameters)),JSON.parse((0,i.default)(this._headers)))}},{key:"toString",value:function(){var e=[],t=String(this._scheme)+":";for(var n in this._user&&(t+=String(l.escapeUser(this._user))+"@"),t+=this._host,(this._port||0===this._port)&&(t+=":"+String(this._port)),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,n)&&(t+=";"+n,null!==this._parameters[n]&&(t+="="+String(this._parameters[n])));for(var i in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,i)){var o=!0,s=!1,u=void 0;try{for(var a,c=(0,r.default)(this._headers[i]);!(o=(a=c.next()).done);o=!0){var f=a.value;e.push(i+"="+String(f))}}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}}return e.length>0&&(t+="?"+String(e.join("&"))),t}},{key:"toAor",value:function(e){var t=String(this._scheme)+":";return this._user&&(t+=String(l.escapeUser(this._user))+"@"),t+=this._host,e&&(this._port||0===this._port)&&(t+=":"+String(this._port)),t}},{key:"scheme",get:function(){return this._scheme},set:function(e){this._scheme=e.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"host",get:function(){return this._host},set:function(e){this._host=e.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(e){this._port=0===e?e:parseInt(e,10)||null}}]),e}()},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}e.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var a=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,s,u;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,u=a,console&&console.warn&&console.warn(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length)}function _(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return c(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)o(a,this,t);else{var l=a.length,c=v(a,l);for(n=0;n<l;++n)o(c[n],this,t)}return!0},u.prototype.addListener=function(e,t){return f(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return f(this,e,t,!0)},u.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,r,i,o,s;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},u.prototype.listeners=function(e){return p(this,e,!0)},u.prototype.rawListeners=function(e){return p(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},u.prototype.listenerCount=_,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(38);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(67),i=n(46);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(46);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(128)),i=s(n(130)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(66),i=n(51);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,n){e.exports={default:n(103),__esModule:!0}},function(e,t){e.exports={}},function(e,t,n){e.exports={default:n(149),__esModule:!0}},function(e,t,n){"use strict";var r=a(n(10)),i=a(n(1)),o=a(n(2)),s=a(n(11)),u=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var l=n(24).EventEmitter,c=n(4),f=n(19),d=n(89),h=n(0)("JsSIP:NonInviteClientTransaction"),p=n(0)("JsSIP:InviteClientTransaction"),_=n(0)("JsSIP:AckClientTransaction"),v=n(0)("JsSIP:NonInviteServerTransaction"),g=n(0)("JsSIP:InviteServerTransaction"),m={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},y=function(e){function t(e,n,o,u){(0,i.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));a.type=m.NON_INVITE_CLIENT,a.id="z9hG4bK"+String(Math.floor(1e7*Math.random())),a.ua=e,a.transport=n,a.request=o,a.eventHandlers=u;var l="SIP/2.0/"+String(n.via_transport);return l+=" "+String(e.configuration.via_host)+";branch="+String(a.id),a.request.setHeader("via",l),a.ua.newTransaction(a),a}return(0,u.default)(t,e),(0,o.default)(t,[{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(m.STATUS_TRYING),this.F=setTimeout((function(){e.timer_F()}),d.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){h("transport error occurred, deleting transaction "+String(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){h("Timer F expired for transaction "+String(this.id)),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(n<200)switch(this.state){case m.STATUS_TRYING:case m.STATUS_PROCEEDING:this.stateChanged(m.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e)}else switch(this.state){case m.STATUS_TRYING:case m.STATUS_PROCEEDING:this.stateChanged(m.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(e),this.K=setTimeout((function(){t.timer_K()}),d.TIMER_K)}}},{key:"C",get:function(){return m}}]),t}(l),S=function(e){function t(e,n,o,u){(0,i.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));a.type=m.INVITE_CLIENT,a.id="z9hG4bK"+String(Math.floor(1e7*Math.random())),a.ua=e,a.transport=n,a.request=o,a.eventHandlers=u,o.transaction=a;var l="SIP/2.0/"+String(n.via_transport);return l+=" "+String(e.configuration.via_host)+";branch="+String(a.id),a.request.setHeader("via",l),a.ua.newTransaction(a),a}return(0,u.default)(t,e),(0,o.default)(t,[{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(m.STATUS_CALLING),this.B=setTimeout((function(){e.timer_B()}),d.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==m.STATUS_ACCEPTED&&(p("transport error occurred, deleting transaction "+String(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){p("Timer M expired for transaction "+String(this.id)),this.state===m.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){p("Timer B expired for transaction "+String(this.id)),this.state===m.STATUS_CALLING&&(this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){p("Timer D expired for transaction "+String(this.id)),clearTimeout(this.B),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(e){var t=this,n=new f.OutgoingRequest(c.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});n.setHeader("from",this.request.getHeader("from")),n.setHeader("via",this.request.getHeader("via")),n.setHeader("to",e.getHeader("to")),this.D=setTimeout((function(){t.timer_D()}),d.TIMER_D),this.transport.send(n)}},{key:"cancel",value:function(e){if(this.state===m.STATUS_PROCEEDING){var t=new f.OutgoingRequest(c.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});t.setHeader("from",this.request.getHeader("from")),t.setHeader("via",this.request.getHeader("via")),t.setHeader("to",this.request.getHeader("to")),e&&t.setHeader("reason",e),this.transport.send(t)}}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(n>=100&&n<=199)switch(this.state){case m.STATUS_CALLING:this.stateChanged(m.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e);break;case m.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(e)}else if(n>=200&&n<=299)switch(this.state){case m.STATUS_CALLING:case m.STATUS_PROCEEDING:this.stateChanged(m.STATUS_ACCEPTED),this.M=setTimeout((function(){t.timer_M()}),d.TIMER_M),this.eventHandlers.onReceiveResponse(e);break;case m.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(e)}else if(n>=300&&n<=699)switch(this.state){case m.STATUS_CALLING:case m.STATUS_PROCEEDING:this.stateChanged(m.STATUS_COMPLETED),this.sendACK(e),this.eventHandlers.onReceiveResponse(e);break;case m.STATUS_COMPLETED:this.sendACK(e)}}},{key:"C",get:function(){return m}}]),t}(l),T=function(e){function t(e,n,o,u){(0,i.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));a.id="z9hG4bK"+String(Math.floor(1e7*Math.random())),a.transport=n,a.request=o,a.eventHandlers=u;var l="SIP/2.0/"+String(n.via_transport);return l+=" "+String(e.configuration.via_host)+";branch="+String(a.id),a.request.setHeader("via",l),a}return(0,u.default)(t,e),(0,o.default)(t,[{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){_("transport error occurred for transaction "+String(this.id)),this.eventHandlers.onTransportError()}},{key:"C",get:function(){return m}}]),t}(l),E=function(e){function t(e,n,o){(0,i.default)(this,t);var u=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return u.type=m.NON_INVITE_SERVER,u.id=o.via_branch,u.ua=e,u.transport=n,u.request=o,u.last_response="",o.server_transaction=u,u.state=m.STATUS_TRYING,e.newTransaction(u),u}return(0,u.default)(t,e),(0,o.default)(t,[{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_J",value:function(){v("Timer J expired for transaction "+String(this.id)),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,v("transport error occurred, deleting transaction "+String(this.id)),clearTimeout(this.J),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(e,t,n,r){var i=this;if(100===e)switch(this.state){case m.STATUS_TRYING:this.stateChanged(m.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case m.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=200&&e<=699)switch(this.state){case m.STATUS_TRYING:case m.STATUS_PROCEEDING:this.stateChanged(m.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout((function(){i.timer_J()}),d.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}}},{key:"C",get:function(){return m}}]),t}(l),C=function(e){function t(e,n,o){(0,i.default)(this,t);var u=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return u.type=m.INVITE_SERVER,u.id=o.via_branch,u.ua=e,u.transport=n,u.request=o,u.last_response="",o.server_transaction=u,u.state=m.STATUS_PROCEEDING,e.newTransaction(u),u.resendProvisionalTimer=null,o.reply(100),u}return(0,u.default)(t,e),(0,o.default)(t,[{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_H",value:function(){g("Timer H expired for transaction "+String(this.id)),this.state===m.STATUS_COMPLETED&&g("ACK not received, dialog will be terminated"),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(m.STATUS_TERMINATED)}},{key:"timer_L",value:function(){g("Timer L expired for transaction "+String(this.id)),this.state===m.STATUS_ACCEPTED&&(this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,g("transport error occurred, deleting transaction "+String(this.id)),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(m.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(e,t,n,r){var i=this;if(e>=100&&e<=199)switch(this.state){case m.STATUS_PROCEEDING:this.transport.send(t)||this.onTransportError(),this.last_response=t}if(e>100&&e<=199&&this.state===m.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval((function(){i.resend_provisional()}),d.PROVISIONAL_RESPONSE_INTERVAL));else if(e>=200&&e<=299)switch(this.state){case m.STATUS_PROCEEDING:this.stateChanged(m.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout((function(){i.timer_L()}),d.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case m.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=300&&e<=699)switch(this.state){case m.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(m.STATUS_COMPLETED),this.H=setTimeout((function(){i.timer_H()}),d.TIMER_H),n&&n()):(this.onTransportError(),r&&r())}}},{key:"C",get:function(){return m}}]),t}(l);e.exports={C:m,NonInviteClientTransaction:y,InviteClientTransaction:S,AckClientTransaction:T,NonInviteServerTransaction:E,InviteServerTransaction:C,checkTransaction:function(e,t){var n=e._transactions,r=void 0;switch(t.method){case c.INVITE:if(r=n.ist[t.via_branch]){switch(r.state){case m.STATUS_PROCEEDING:r.transport.send(r.last_response)}return!0}break;case c.ACK:if(!(r=n.ist[t.via_branch]))return!1;if(r.state===m.STATUS_ACCEPTED)return!1;if(r.state===m.STATUS_COMPLETED)return r.state=m.STATUS_CONFIRMED,r.I=setTimeout((function(){r.timer_I()}),d.TIMER_I),!0;break;case c.CANCEL:return(r=n.ist[t.via_branch])?(t.reply_sl(200),r.state!==m.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(r=n.nist[t.via_branch]){switch(r.state){case m.STATUS_TRYING:break;case m.STATUS_PROCEEDING:case m.STATUS_COMPLETED:r.transport.send(r.last_response)}return!0}}}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(104)(!0);n(69)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(14).f,i=n(21),o=n(7)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(4),u=n(162),a=n(37),l=n(0)("JsSIP:RequestSender"),c={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}};e.exports=function(){function e(t,n,i){for(var o in(0,r.default)(this,e),this._ua=t,this._eventHandlers=i,this._method=n.method,this._request=n,this._auth=null,this._challenged=!1,this._staled=!1,c)Object.prototype.hasOwnProperty.call(c,o)&&(this._eventHandlers[o]||(this._eventHandlers[o]=c[o]));t.status!==t.C.STATUS_USER_CLOSED||this._method===s.BYE&&this._method===s.ACK||this._eventHandlers.onTransportError()}return(0,i.default)(e,[{key:"send",value:function(){var e=this,t={onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onReceiveResponse:function(t){e._receiveResponse(t)}};switch(this._method){case"INVITE":this.clientTransaction=new a.InviteClientTransaction(this._ua,this._ua.transport,this._request,t);break;case"ACK":this.clientTransaction=new a.AckClientTransaction(this._ua,this._ua.transport,this._request,t);break;default:this.clientTransaction=new a.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,t)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(e){var t=void 0,n=void 0,r=e.status_code;if(401!==r&&407!==r||null===this._ua.configuration.password&&null===this._ua.configuration.ha1)this._eventHandlers.onReceiveResponse(e);else{if(401===e.status_code?(t=e.parseHeader("www-authenticate"),n="authorization"):(t=e.parseHeader("proxy-authenticate"),n="proxy-authorization"),!t)return l(String(e.status_code)+" with wrong or missing challenge, cannot authenticate"),void this._eventHandlers.onReceiveResponse(e);if(!this._challenged||!this._staled&&!0===t.stale){if(this._auth||(this._auth=new u({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,t))return void this._eventHandlers.onReceiveResponse(e);this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),t.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq",String(this._request.cseq)+" "+String(this._method)),this._request.setHeader(n,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(e)}}}]),e}()},function(e,t,n){var r=n(18),i=n(6).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(18);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(48),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(50)("keys"),i=n(39);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(3),i=n(6),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(33)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(9),i=n(106),o=n(51),s=n(49)("IE_PROTO"),u=function(){},a=function(){var e,t=n(44)("iframe"),r=o.length;for(t.style.display="none",n(71).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),a=e.F;r--;)delete a.prototype[o[r]];return a()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=r(e),n=new u,u.prototype=null,n[s]=e):n=a(),void 0===t?n:i(n,t)}},function(e,t,n){n(107);for(var r=n(6),i=n(20),o=n(35),s=n(7)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),a=0;a<u.length;a++){var l=u[a],c=r[l],f=c&&c.prototype;f&&!f[s]&&i(f,s,l),o[l]=o.Array}},function(e,t,n){var r=n(73),i=n(7)("iterator"),o=n(35);e.exports=n(3).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(38);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){t.f=n(7)},function(e,t,n){var r=n(6),i=n(3),o=n(33),s=n(57),u=n(14).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:s.f(e)})}},function(e,t,n){"use strict";var r=s(n(16)),i=s(n(1)),o=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=n(23),a=n(13);e.exports=function(){function e(t,n,r){if((0,i.default)(this,e),!(t&&t instanceof u))throw new TypeError('missing or invalid "uri" parameter');for(var o in this._uri=t,this._parameters={},this.display_name=n,r)Object.prototype.hasOwnProperty.call(r,o)&&this.setParam(o,r[o])}return(0,o.default)(e,null,[{key:"parse",value:function(e){return-1!==(e=a.parse(e,"Name_Addr_Header"))?e:void 0}}]),(0,o.default)(e,[{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new e(this._uri.clone(),this._display_name,JSON.parse((0,r.default)(this._parameters)))}},{key:"_quote",value:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var e=this._display_name?'"'+String(this._quote(this._display_name))+'" ':"";for(var t in e+="<"+String(this._uri.toString())+">",this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,t)&&(e+=";"+t,null!==this._parameters[t]&&(e+="="+String(this._parameters[t])));return e}},{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(e){this._display_name=0===e?"0":e}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PhoneConnectionStatus:{NOTCONNECTED:0,CONNECTING:1,CONNECTED:2,DISCONNECTED:3,REGISTERED:4,UNREGISTERED:5,NETWORK_UNAVAILABLE:6,CURRENT_TOKEN_UNAVAILABLE:7,TARGET_TOKEN_UNAVAILABLE:8,KICKED_OFFLINE_BY_OTHER_CLIENT:9,CLOSE:10},CallType:{PHONE:"PHONE",VOIP:"VOIP",CONFERENCE:"CONFERENCE"},CallStatus:{ALERTING:"alerting",ESTABLISHED:"established",HELD:"held",HELD_RETRIEVED:"held_retrieved",CLEARED:"cleared",ORIGINATED:"originated",RINGING:"ringing",MUTE:"mute",MUTE_RETRIEVED:"mute_retrieved",TRANSFER:"transfer",SEIZED:"seized",ADDSTREAM:"addstream",GETUSERMEDIAFAILED:"get_userMedia_failed",CONFERENCE:"conference",CONFERENCE_ADD_USER:"conference_add_user",CONFERENCE_EXIT_USER:"conference_exit_user",REFER:"refer"},CallErrorCauses:{BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Received a request/response that should have SDP body but did not.",AUTHENTICATION_ERROR:"Authentication Error"},PhoneStatus:{WORK:"work",PAUSE:"pause",DEAL:"deal",EAT:"eat",TRAIN:"train",LOGOUT:"logout",AVAILABLE:"available",UNAVAILABLE:"unavailable"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _getIterator2=__webpack_require__(17),_getIterator3=_interopRequireDefault(_getIterator2),_keys=__webpack_require__(36),_keys2=_interopRequireDefault(_keys),_typeof2=__webpack_require__(29),_typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Util={analysisVOIPUUI:function analysisVOIPUUI(dataStr,key){if(dataStr&&dataStr.length>0&&key){var values=dataStr.split("&");if(dataStr.match(eval("/"+key+"=(.+?)[&|;]/gi")),values&&values.length>0&&(values=values.find((function(e){return e.indexOf(key)>=0})),values&&values.indexOf("=")>=0))return values.split("=")[1]}return null},getCookie:function(e){var t=document.cookie,n="";if(t)for(var r,i,o=t.split("; "),s=0;s<o.length;s++)i=(r=o[s]).indexOf("="),r.substr(0,i)==e&&(n=r.substr(i+1));return n},deepCopy:function(e){if(!e||"object"!=(void 0===e?"undefined":(0,_typeof3.default)(e)))return o;var t=Array.isArray(e)?[]:{},n=(0,_keys2.default)(e),r=null,i=!0,s=!1,u=void 0;try{for(var a,l=(0,_getIterator3.default)(n);!(i=(a=l.next()).done);i=!0){var c=a.value;(r=e[c])&&("object"==(void 0===r?"undefined":(0,_typeof3.default)(r))||Array.isArray(r))?t[c]=this.deepCopy(r):t[c]=r}}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}return t},showNotice:function(e){if("granted"===Notification.permission&&e){var t={body:e.body,icon:e.icon,data:e.data};e.hasOwnProperty("tag")&&(t.tag=e.tag,t.renotify=!e.hasOwnProperty("renotify")||e.renotify);var n=new Notification(e.title,t);return n.onclick=function(t){e.onClicked&&"function"==typeof e.onClicked&&e.onClicked(t),n.close()},n}},showNotification:function(e){var t=this,n=window.Notification||window.mozNotification||window.webkitNotification;if(n&&e){if("granted"===n.permission)return this.showNotice(e);"denied"!==n.permission&&n.requestPermission((function(n){return t.showNotice(e)}))}},createGuid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(4)}return function(){for(var t="",n=1;n<=20;n++)t+=e(),8!==n&&12!==n&&16!==n&&20!==n||(t+="-");var r=parseInt(8*Math.random(),10),i=(new Date).getTime()+"";t+=i.slice(0,r);for(var o=0;o<4;o++)t+=e();return t+=i.slice(r+5,13)}()},setEnv:function(e,t,n){e&&e.socketUrl&&e.account&&e.domain&&e.channel?(e.timeout=e.timeout?e.timeout:5e3,this.envConfig=e,t&&"function"==typeof t&&t({ack:"success"})):n&&"function"==typeof n&&n({ack:"fail"})},getEnv:function(){return this.envConfig},hextoString:function(e){for(var t=e.split(""),n="",r=0;r<t.length/2;r++){var i="0x"+t[2*r]+t[2*r+1];n+=String.fromCharCode(i)}return n},stringToHex:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=Number(e.charCodeAt(n)).toString(16);t.push(i)}return t.join("")},getQueryString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=t.substr(1).match(n);return r?unescape(r[2]):null}};exports.default=Util},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(10)),i=u(n(1)),o=u(n(11)),s=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,s.default)(t,e),t}(u(n(175)).default);t.default=new a},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(64),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){e.exports={default:n(97),__esModule:!0}},function(e,t,n){e.exports=!n(15)&&!n(26)((function(){return 7!=Object.defineProperty(n(44)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(21),i=n(27),o=n(100)(!1),s=n(49)("IE_PROTO");e.exports=function(e,t){var n,u=i(e),a=0,l=[];for(n in u)n!=s&&r(u,n)&&l.push(n);for(;t.length>a;)r(u,n=t[a++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var r=n(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){},function(e,t,n){"use strict";var r=n(33),i=n(8),o=n(70),s=n(20),u=n(35),a=n(105),l=n(42),c=n(72),f=n(7)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,_,v,g){a(n,t,p);var m,y,S,T=function(e){if(!d&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",C="values"==_,b=!1,A=e.prototype,w=A[f]||A["@@iterator"]||_&&A[_],R=w||T(_),I=_?C?T("entries"):R:void 0,x="Array"==t&&A.entries||w;if(x&&(S=c(x.call(new e)))!==Object.prototype&&S.next&&(l(S,E,!0),r||"function"==typeof S[f]||s(S,f,h)),C&&w&&"values"!==w.name&&(b=!0,R=function(){return w.call(this)}),r&&!g||!d&&!b&&A[f]||s(A,f,R),u[t]=R,u[E]=h,_)if(m={values:C?R:T("values"),keys:v?R:T("keys"),entries:I},g)for(y in m)y in A||o(A,y,m[y]);else i(i.P+i.F*(d||b),t,m);return m}},function(e,t,n){e.exports=n(20)},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(21),i=n(28),o=n(49)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(32),i=n(7)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(9);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(35),i=n(7)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(9),i=n(38),o=n(7)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[o])?t:i(n)}},function(e,t,n){var r,i,o,s=n(25),u=n(113),a=n(71),l=n(44),c=n(6),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,_=c.Dispatch,v=0,g={},m=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},y=function(e){m.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){u("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete g[e]},"process"==n(32)(f)?r=function(e){f.nextTick(s(m,e,1))}:_&&_.now?r=function(e){_.now(s(m,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=y,r=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):r="onreadystatechange"in l("script")?function(e){a.appendChild(l("script")).onreadystatechange=function(){a.removeChild(this),m.call(e)}}:function(e){setTimeout(s(m,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(9),i=n(18),o=n(56);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(7)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(e){}return n}},function(e,t,n){e.exports={default:n(120),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(63)),i=u(n(1)),o=u(n(2)),s=u(n(122));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,i.default)(this,e),this.vLog=null}return(0,o.default)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.vLog||(this.vLog=s.default);var t=e.system,n=e.url;if(t||n){var i=(0,r.default)({closeModule:{page:!0,element:!0}},e);return this.vLog.init(i),this.vLog}}},{key:"resetInstance",value:function(e){this.vLog=e}},{key:"setAuth",value:function(e){this.vLog&&this.vLog.open&&this.vLog.setAuth(e)}},{key:"setUser",value:function(e){this.vLog&&this.vLog.open&&this.vLog.setUser(e)}},{key:"recordPoint",value:function(e,t,n){this.vLog&&this.vLog.open&&this.vLog.recordPoint({operatingArea:e,operation:t,content:n})}}]),e}();t.default=new a},function(e){e.exports=JSON.parse('{"_from":"jssip@3.4.2","_id":"jssip@3.4.2","_inBundle":false,"_integrity":"sha1-wra6d/Ca1YSIGjQFNgz0snGlhGw=","_location":"/jssip","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"jssip@3.4.2","name":"jssip","escapedName":"jssip","rawSpec":"3.4.2","saveSpec":null,"fetchSpec":"3.4.2"},"_requiredBy":["#USER","/"],"_resolved":"http://192.168.1.157:4873/jssip/-/jssip-3.4.2.tgz","_shasum":"c2b6ba77f09ad584881a3405360cf4b271a5846c","_spec":"jssip@3.4.2","_where":"/Users/rain/Documents/vocust/project/phone-sdk","author":{"name":"Jos Luis Milln","email":"jmillan@aliax.net","url":"https://github.com/jmillan"},"bugs":{"url":"https://github.com/versatica/JsSIP/issues"},"bundleDependencies":false,"contributors":[{"name":"Iaki Baz Castillo","email":"ibc@aliax.net","url":"https://github.com/ibc"}],"dependencies":{"debug":"^4.1.1","events":"^3.0.0","sdp-transform":"^2.7.0"},"deprecated":false,"description":"the Javascript SIP library","devDependencies":{"@babel/core":"^7.4.3","@babel/preset-env":"^7.4.3","ansi-colors":"^3.2.4","browserify":"^16.2.3","eslint":"^5.16.0","fancy-log":"^1.3.3","gulp":"^4.0.0","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.1","gulp-header":"^2.0.7","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4","pegjs":"^0.7.0","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},"homepage":"https://jssip.net","keywords":["sip","websocket","webrtc","node","browser","library"],"license":"MIT","main":"lib-es5/JsSIP.js","name":"jssip","repository":{"type":"git","url":"git+https://github.com/versatica/JsSIP.git"},"scripts":{"lint":"gulp lint","prepublishOnly":"gulp babel","test":"gulp test"},"title":"JsSIP","version":"3.4.2"}')},function(e,t,n){var r=n(8),i=n(3),o=n(26);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},function(e,t,n){var r=n(66),i=n(51).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(40),i=n(30),o=n(27),s=n(45),u=n(21),a=n(65),l=Object.getOwnPropertyDescriptor;t.f=n(15)?l:function(e,t){if(e=o(e),t=s(t,!0),a)try{return l(e,t)}catch(e){}if(u(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(152),i=n(153);t.write=i,t.parse=r.parse,t.parseParams=r.parseParams,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach((function(e){n[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},function(e,t,n){"use strict";var r=500;e.exports={T1:r,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},function(e,t,n){"use strict";var r=f(n(36)),i=f(n(17)),o=f(n(34)),s=f(n(10)),u=f(n(1)),a=f(n(11)),l=f(n(2)),c=f(n(12));function f(e){return e&&e.__esModule?e:{default:e}}var d=n(24).EventEmitter,h=n(87),p=n(4),_=n(22),v=n(37),g=n(5),m=n(89),y=n(19),S=n(163),T=n(43),E=n(165),C=n(166),b=n(167),A=n(168),w=n(23),R=n(0)("JsSIP:RTCSession"),I=n(0)("JsSIP:ERROR:RTCSession");I.log=console.warn.bind(console);var x={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},k=["audio","video"];e.exports=function(e){function t(e){(0,u.default)(this,t),R("new");var n=(0,a.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return n._id=null,n._ua=e,n._status=x.STATUS_NULL,n._dialog=null,n._earlyDialogs={},n._contact=null,n._from_tag=null,n._to_tag=null,n._connection=null,n._connectionPromiseQueue=o.default.resolve(),n._request=null,n._is_canceled=!1,n._cancel_reason="",n._is_confirmed=!1,n._late_sdp=!1,n._rtcOfferConstraints=null,n._rtcAnswerConstraints=null,n._localMediaStream=null,n._localMediaStreamLocallyGenerated=!1,n._rtcReady=!0,n._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},n._direction=null,n._local_identity=null,n._remote_identity=null,n._start_time=null,n._end_time=null,n._tones=null,n._audioMuted=!1,n._videoMuted=!1,n._localHold=!1,n._remoteHold=!1,n._sessionTimers={enabled:n._ua.configuration.session_timers,refreshMethod:n._ua.configuration.session_timers_refresh_method,defaultExpires:p.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},n._referSubscribers={},n._data={},n}return(0,c.default)(t,e),(0,l.default)(t,null,[{key:"C",get:function(){return x}}]),(0,l.default)(t,[{key:"isInProgress",value:function(){switch(this._status){case x.STATUS_NULL:case x.STATUS_INVITE_SENT:case x.STATUS_1XX_RECEIVED:case x.STATUS_INVITE_RECEIVED:case x.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case x.STATUS_ANSWERED:case x.STATUS_WAITING_FOR_ACK:case x.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case x.STATUS_CANCELED:case x.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];R("connect()");var r=e,i=t.eventHandlers||{},o=g.cloneArray(t.extraHeaders),s=t.mediaConstraints||{audio:!0,video:!0},u=t.mediaStream||null,a=t.pcConfig||{iceServers:[]},l=t.rtcConstraints||null,c=t.rtcOfferConstraints||null;if(this._rtcOfferConstraints=c,this._rtcAnswerConstraints=t.rtcAnswerConstraints||null,this._data=t.data||this._data,void 0===e)throw new TypeError("Not enough arguments");if(this._status!==x.STATUS_NULL)throw new _.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new _.NotSupportedError("WebRTC not supported");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: "+String(r));for(var f in this._sessionTimers.enabled&&g.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=p.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=p.SESSION_EXPIRES),i)Object.prototype.hasOwnProperty.call(i,f)&&this.on(f,i[f]);this._from_tag=g.newTag();var d=t.anonymous||!1,h={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:d,outbound:!0}),d&&(h.from_display_name="Anonymous",h.from_uri=new w("sip","anonymous","anonymous.invalid"),o.push("P-Preferred-Identity: "+String(this._ua.configuration.uri.toString())),o.push("Privacy: id")),o.push("Contact: "+String(this._contact)),o.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&o.push("Session-Expires: "+String(this._sessionTimers.defaultExpires)),this._request=new y.InitialOutgoingInviteRequest(e,this._ua,h,o),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(a,l),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,n&&n(this),this._newRTCSession("local",this._request),this._sendInitialRequest(s,c,u)}},{key:"init_incoming",value:function(e,t){var n=this;R("init_incoming()");var r=void 0,i=e.getHeader("Content-Type");e.body&&"application/sdp"!==i?e.reply(415):(this._status=x.STATUS_INVITE_RECEIVED,this._from_tag=e.from_tag,this._id=e.call_id+this._from_tag,this._request=e,this._contact=this._ua.contact.toString(),e.hasHeader("expires")&&(r=1e3*e.getHeader("expires")),e.to_tag=g.newTag(),this._createDialog(e,"UAS",!0)?(e.body?this._late_sdp=!1:this._late_sdp=!0,this._status=x.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout((function(){e.reply(408),n._failed("local",null,p.causes.NO_ANSWER)}),this._ua.configuration.no_answer_timeout),r&&(this._timers.expiresTimer=setTimeout((function(){n._status===x.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),n._failed("system",null,p.causes.EXPIRES))}),r)),this._direction="incoming",this._local_identity=e.to,this._remote_identity=e.from,t&&t(this),this._newRTCSession("remote",e),this._status!==x.STATUS_TERMINATED&&(e.reply(180,null,["Contact: "+String(this._contact)]),this._progress("local",null))):e.reply(500,"Missing Contact header field"))}},{key:"answer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R("answer()");var n=this._request,r=g.cloneArray(t.extraHeaders),s=t.mediaConstraints||{},u=t.mediaStream||null,a=t.pcConfig||{iceServers:[]},l=t.rtcConstraints||null,c=t.rtcAnswerConstraints||null,f=void 0,d=!1,h=!1,v=!1,m=!1;if(this._rtcAnswerConstraints=c,this._rtcOfferConstraints=t.rtcOfferConstraints||null,this._data=t.data||this._data,"incoming"!==this._direction)throw new _.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==x.STATUS_WAITING_FOR_ANSWER)throw new _.InvalidStateError(this._status);if(this._sessionTimers.enabled&&g.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=p.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=p.SESSION_EXPIRES),this._status=x.STATUS_ANSWERED,this._createDialog(n,"UAS")){clearTimeout(this._timers.userNoAnswerTimer),r.unshift("Contact: "+String(this._contact));var y=n.parseSDP();Array.isArray(y.media)||(y.media=[y.media]);var S=!0,T=!1,E=void 0;try{for(var C,b=(0,i.default)(y.media);!(S=(C=b.next()).done);S=!0){var A=C.value;"audio"===A.type&&(d=!0,A.direction&&"sendrecv"!==A.direction||(v=!0)),"video"===A.type&&(h=!0,A.direction&&"sendrecv"!==A.direction||(m=!0))}}catch(e){T=!0,E=e}finally{try{!S&&b.return&&b.return()}finally{if(T)throw E}}if(u&&!1===s.audio){f=u.getAudioTracks();var w=!0,k=!1,O=void 0;try{for(var N,P=(0,i.default)(f);!(w=(N=P.next()).done);w=!0){var D=N.value;u.removeTrack(D)}}catch(e){k=!0,O=e}finally{try{!w&&P.return&&P.return()}finally{if(k)throw O}}}if(u&&!1===s.video){f=u.getVideoTracks();var M=!0,U=!1,L=void 0;try{for(var q,H=(0,i.default)(f);!(M=(q=H.next()).done);M=!0){var j=q.value;u.removeTrack(j)}}catch(e){U=!0,L=e}finally{try{!M&&H.return&&H.return()}finally{if(U)throw L}}}u||void 0!==s.audio||(s.audio=v),u||void 0!==s.video||(s.video=m),u||d||(s.audio=!1),u||h||(s.video=!1),this._createRTCConnection(a,l),o.default.resolve().then((function(){return u||(s.audio||s.video?(e._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(s).catch((function(t){if(e._status===x.STATUS_TERMINATED)throw new Error("terminated");throw n.reply(480),e._failed("local",null,p.causes.USER_DENIED_MEDIA_ACCESS),I('emit "getusermediafailed" [error:%o]',t),e.emit("getusermediafailed",t),new Error("getUserMedia() failed")}))):void 0)})).then((function(t){if(e._status===x.STATUS_TERMINATED)throw new Error("terminated");e._localMediaStream=t,t&&t.getTracks().forEach((function(n){e._connection.addTrack(n,t)}))})).then((function(){if(!e._late_sdp){var t={originator:"remote",type:"offer",sdp:n.body};R('emit "sdp"'),e.emit("sdp",t);var r=new RTCSessionDescription({type:"offer",sdp:t.sdp});return e._connectionPromiseQueue=e._connectionPromiseQueue.then((function(){return e._connection.setRemoteDescription(r)})).catch((function(t){throw n.reply(488),e._failed("system",null,p.causes.WEBRTC_ERROR),I('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t),new Error("peerconnection.setRemoteDescription() failed")})),e._connectionPromiseQueue}})).then((function(){if(e._status===x.STATUS_TERMINATED)throw new Error("terminated");return e._connecting(n),e._late_sdp?e._createLocalDescription("offer",e._rtcOfferConstraints).catch((function(){throw n.reply(500),new Error("_createLocalDescription() failed")})):e._createLocalDescription("answer",c).catch((function(){throw n.reply(500),new Error("_createLocalDescription() failed")}))})).then((function(t){if(e._status===x.STATUS_TERMINATED)throw new Error("terminated");e._handleSessionTimersInIncomingRequest(n,r),n.reply(200,null,r,t,(function(){e._status=x.STATUS_WAITING_FOR_ACK,e._setInvite2xxTimer(n,t),e._setACKTimer(),e._accepted("local")}),(function(){e._failed("system",null,p.causes.CONNECTION_ERROR)}))})).catch((function(t){e._status!==x.STATUS_TERMINATED&&I(t)}))}else n.reply(500,"Error creating dialog")}},{key:"terminate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R("terminate()");var n=t.cause||p.causes.BYE,r=g.cloneArray(t.extraHeaders),i=t.body,o=void 0,s=t.status_code,u=t.reason_phrase;if(this._status===x.STATUS_TERMINATED)throw new _.InvalidStateError(this._status);switch(this._status){case x.STATUS_NULL:case x.STATUS_INVITE_SENT:case x.STATUS_1XX_RECEIVED:if(R("canceling session"),s&&(s<200||s>=700))throw new TypeError("Invalid status_code: "+s);s&&(u=u||p.REASON_PHRASE[s]||"",o="SIP ;cause="+s+' ;text="'+String(u)+'"'),this._status===x.STATUS_NULL||this._status===x.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=o):this._status===x.STATUS_1XX_RECEIVED&&this._request.cancel(o),this._status=x.STATUS_CANCELED,this._failed("local",null,p.causes.CANCELED);break;case x.STATUS_WAITING_FOR_ANSWER:case x.STATUS_ANSWERED:if(R("rejecting session"),(s=s||480)<300||s>=700)throw new TypeError("Invalid status_code: "+s);this._request.reply(s,u,r,i),this._failed("local",null,p.causes.REJECTED);break;case x.STATUS_WAITING_FOR_ACK:case x.STATUS_CONFIRMED:if(R("terminating session"),u=t.reason_phrase||p.REASON_PHRASE[s]||"",s&&(s<200||s>=700))throw new TypeError("Invalid status_code: "+s);if(s&&r.push("Reason: SIP ;cause="+s+'; text="'+String(u)+'"'),this._status===x.STATUS_WAITING_FOR_ACK&&"incoming"===this._direction&&this._request.server_transaction.state!==v.C.STATUS_TERMINATED){var a=this._dialog;this.receiveRequest=function(t){t.method===p.ACK&&(e.sendRequest(p.BYE,{extraHeaders:r,body:i}),a.terminate())},this._request.server_transaction.on("stateChanged",(function(){e._request.server_transaction.state===v.C.STATUS_TERMINATED&&(e.sendRequest(p.BYE,{extraHeaders:r,body:i}),a.terminate())})),this._ended("local",null,n),this._dialog=a,this._ua.newDialog(a)}else this.sendRequest(p.BYE,{extraHeaders:r,body:i}),this._ended("local",null,n)}}},{key:"sendDTMF",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R("sendDTMF() | tones: %s",e);var n=0,r=t.duration||null,i=t.interToneGap||null;if(void 0===e)throw new TypeError("Not enough arguments");if(this._status!==x.STATUS_CONFIRMED&&this._status!==x.STATUS_WAITING_FOR_ACK)throw new _.InvalidStateError(this._status);if("number"==typeof e&&(e=e.toString()),!e||"string"!=typeof e||!e.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: "+String(e));if(r&&!g.isDecimal(r))throw new TypeError("Invalid tone duration: "+String(r));if(r?r<E.C.MIN_DURATION?(R('"duration" value is lower than the minimum allowed, setting it to '+String(E.C.MIN_DURATION)+" milliseconds"),r=E.C.MIN_DURATION):r>E.C.MAX_DURATION?(R('"duration" value is greater than the maximum allowed, setting it to '+String(E.C.MAX_DURATION)+" milliseconds"),r=E.C.MAX_DURATION):r=Math.abs(r):r=E.C.DEFAULT_DURATION,t.duration=r,i&&!g.isDecimal(i))throw new TypeError("Invalid interToneGap: "+String(i));function o(){var e=this,s=void 0;if(this._status===x.STATUS_TERMINATED||!this._tones||n>=this._tones.length)this._tones=null;else{var u=this._tones[n];if(n+=1,","===u)s=2e3;else{var a=new E(this);t.eventHandlers={onFailed:function(){e._tones=null}},a.send(u,t),s=r+i}setTimeout(o.bind(this),s)}}i?i<E.C.MIN_INTER_TONE_GAP?(R('"interToneGap" value is lower than the minimum allowed, setting it to '+String(E.C.MIN_INTER_TONE_GAP)+" milliseconds"),i=E.C.MIN_INTER_TONE_GAP):i=Math.abs(i):i=E.C.DEFAULT_INTER_TONE_GAP,this._tones?this._tones+=e:(this._tones=e,o.call(this))}},{key:"sendInfo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(R("sendInfo()"),this._status!==x.STATUS_CONFIRMED&&this._status!==x.STATUS_WAITING_FOR_ACK)throw new _.InvalidStateError(this._status);var r=new C(this);r.send(e,t,n)}},{key:"mute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!1};R("mute()");var t=!1,n=!1;!1===this._audioMuted&&e.audio&&(t=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),!1===this._videoMuted&&e.video&&(n=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),!0!==t&&!0!==n||this._onmute({audio:t,video:n})}},{key:"unmute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0};R("unmute()");var t=!1,n=!1;!0===this._audioMuted&&e.audio&&(t=!0,this._audioMuted=!1,!1===this._localHold&&this._toggleMuteAudio(!1)),!0===this._videoMuted&&e.video&&(n=!0,this._videoMuted=!1,!1===this._localHold&&this._toggleMuteVideo(!1)),!0!==t&&!0!==n||this._onunmute({audio:t,video:n})}},{key:"hold",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];if(R("hold()"),this._status!==x.STATUS_WAITING_FOR_ACK&&this._status!==x.STATUS_CONFIRMED)return!1;if(!0===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:p.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"unhold",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];if(R("unhold()"),this._status!==x.STATUS_WAITING_FOR_ACK&&this._status!==x.STATUS_CONFIRMED)return!1;if(!1===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:p.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"renegotiate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];R("renegotiate()");var r=t.rtcOfferConstraints||null;if(this._status!==x.STATUS_WAITING_FOR_ACK&&this._status!==x.STATUS_CONFIRMED)return!1;if(!this._isReadyToReOffer())return!1;var i={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:p.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:i,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:i,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}),!0}},{key:"refer",value:function(e,t){var n=this;R("refer()");var r=e;if(this._status!==x.STATUS_WAITING_FOR_ACK&&this._status!==x.STATUS_CONFIRMED)return!1;if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: "+String(r));var i=new A(this);i.sendRefer(e,t);var o=i.id;return this._referSubscribers[o]=i,i.on("requestFailed",(function(){delete n._referSubscribers[o]})),i.on("accepted",(function(){delete n._referSubscribers[o]})),i.on("failed",(function(){delete n._referSubscribers[o]})),i}},{key:"sendRequest",value:function(e,t){return R("sendRequest()"),this._dialog.sendRequest(e,t)}},{key:"receiveRequest",value:function(e){var t=this;if(R("receiveRequest()"),e.method===p.CANCEL)this._status!==x.STATUS_WAITING_FOR_ANSWER&&this._status!==x.STATUS_ANSWERED||(this._status=x.STATUS_CANCELED,this._request.reply(487),this._failed("remote",e,p.causes.CANCELED));else switch(e.method){case p.ACK:if(this._status!==x.STATUS_WAITING_FOR_ACK)return;if(this._status=x.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!e.body){this.terminate({cause:p.causes.MISSING_SDP,status_code:400});break}var n={originator:"remote",type:"answer",sdp:e.body};R('emit "sdp"'),this.emit("sdp",n);var r=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(r)})).then((function(){t._is_confirmed||t._confirmed("remote",e)})).catch((function(e){t.terminate({cause:p.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),I('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}))}else this._is_confirmed||this._confirmed("remote",e);break;case p.BYE:this._status===x.STATUS_CONFIRMED||this._status===x.STATUS_WAITING_FOR_ACK?(e.reply(200),this._ended("remote",e,p.causes.BYE)):this._status===x.STATUS_INVITE_RECEIVED?(e.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",e,p.causes.BYE)):e.reply(403,"Wrong Status");break;case p.INVITE:this._status===x.STATUS_CONFIRMED?e.hasHeader("replaces")?this._receiveReplaces(e):this._receiveReinvite(e):e.reply(403,"Wrong Status");break;case p.INFO:if(this._status===x.STATUS_1XX_RECEIVED||this._status===x.STATUS_WAITING_FOR_ANSWER||this._status===x.STATUS_ANSWERED||this._status===x.STATUS_WAITING_FOR_ACK||this._status===x.STATUS_CONFIRMED){var i=e.getHeader("content-type");i&&i.match(/^application\/dtmf-relay/i)?new E(this).init_incoming(e):void 0!==i?new C(this).init_incoming(e):e.reply(415)}else e.reply(403,"Wrong Status");break;case p.UPDATE:this._status===x.STATUS_CONFIRMED?this._receiveUpdate(e):e.reply(403,"Wrong Status");break;case p.REFER:this._status===x.STATUS_CONFIRMED?this._receiveRefer(e):e.reply(403,"Wrong Status");break;case p.NOTIFY:this._status===x.STATUS_CONFIRMED?this._receiveNotify(e):e.reply(403,"Wrong Status");break;default:e.reply(501)}}},{key:"onTransportError",value:function(){I("onTransportError()"),this._status!==x.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:p.causes.CONNECTION_ERROR,cause:p.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){I("onRequestTimeout()"),this._status!==x.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:p.causes.REQUEST_TIMEOUT,cause:p.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){I("onDialogError()"),this._status!==x.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:p.causes.DIALOG_ERROR,cause:p.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(e){R("newDTMF()"),this.emit("newDTMF",e)}},{key:"newInfo",value:function(e){R("newInfo()"),this.emit("newInfo",e)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?!0!==this._dialog.uac_pending_reply&&!0!==this._dialog.uas_pending_reply||(R("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):(R("_isReadyToReOffer() | session not established yet"),!1):(R("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){if(R("close()"),this._status!==x.STATUS_TERMINATED){if(this._status=x.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(e){I("close() | error closing the RTCPeerConnection: %o",e)}for(var e in this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(R("close() | closing local MediaStream"),g.closeMediaStream(this._localMediaStream)),this._timers)Object.prototype.hasOwnProperty.call(this._timers,e)&&clearTimeout(this._timers[e]);for(var t in clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog),this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,t)&&(this._earlyDialogs[t].terminate(),delete this._earlyDialogs[t]);for(var n in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,n)&&delete this._referSubscribers[n];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(e,t){var n=m.T1;this._timers.invite2xxTimer=setTimeout(function r(){this._status===x.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,["Contact: "+String(this._contact)],t),n<m.T2&&(n*=2)>m.T2&&(n=m.T2),this._timers.invite2xxTimer=setTimeout(r.bind(this),n))}.bind(this),n)}},{key:"_setACKTimer",value:function(){var e=this;this._timers.ackTimer=setTimeout((function(){e._status===x.STATUS_WAITING_FOR_ACK&&(R("no ACK received, terminating the session"),clearTimeout(e._timers.invite2xxTimer),e.sendRequest(p.BYE),e._ended("remote",null,p.causes.NO_ACK))}),m.TIMER_H)}},{key:"_createRTCConnection",value:function(e,t){var n=this;this._connection=new RTCPeerConnection(e,t),this._connection.addEventListener("iceconnectionstatechange",(function(){"failed"===n._connection.iceConnectionState&&n.terminate({cause:p.causes.RTP_TIMEOUT,status_code:408,reason_phrase:p.causes.RTP_TIMEOUT})})),R('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(e,t){var n=this;if(R("createLocalDescription()"),"offer"!==e&&"answer"!==e)throw new Error('createLocalDescription() | invalid type "'+String(e)+'"');var r=this._connection;return this._rtcReady=!1,o.default.resolve().then((function(){return"offer"===e?r.createOffer(t).catch((function(e){return I('emit "peerconnection:createofferfailed" [error:%o]',e),n.emit("peerconnection:createofferfailed",e),o.default.reject(e)})):r.createAnswer(t).catch((function(e){return I('emit "peerconnection:createanswerfailed" [error:%o]',e),n.emit("peerconnection:createanswerfailed",e),o.default.reject(e)}))})).then((function(e){return r.setLocalDescription(e).catch((function(e){return n._rtcReady=!0,I('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',e),n.emit("peerconnection:setlocaldescriptionfailed",e),o.default.reject(e)}))})).then((function(){if("complete"===r.iceGatheringState){n._rtcReady=!0;var t={originator:"local",type:e,sdp:r.localDescription.sdp};return R('emit "sdp"'),n.emit("sdp",t),o.default.resolve(t.sdp)}return new o.default((function(t){var i=!1,o=void 0,s=void 0,u=function(){r.removeEventListener("icecandidate",o),r.removeEventListener("icegatheringstatechange",s),i=!0,n._rtcReady=!0;var u={originator:"local",type:e,sdp:r.localDescription.sdp};R('emit "sdp"'),n.emit("sdp",u),t(u.sdp)};r.addEventListener("icecandidate",o=function(e){var t=e.candidate;t?n.emit("icecandidate",{candidate:t,ready:u}):i||u()}),r.addEventListener("icegatheringstatechange",s=function(){"complete"!==r.iceGatheringState||i||u()})}))}))}},{key:"_createDialog",value:function(e,t,n){var r="UAS"===t?e.to_tag:e.from_tag,i="UAS"===t?e.from_tag:e.to_tag,o=e.call_id+r+i,s=this._earlyDialogs[o];if(n)return!!s||((s=new S(this,e,t,S.C.STATUS_EARLY)).error?(R(s.error),this._failed("remote",e,p.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[o]=s,!0));if(this._from_tag=e.from_tag,this._to_tag=e.to_tag,s)return s.update(e,t),this._dialog=s,delete this._earlyDialogs[o],!0;var u=new S(this,e,t);return u.error?(R(u.error),this._failed("remote",e,p.causes.INTERNAL_ERROR),!1):(this._dialog=u,!0)}},{key:"_receiveReinvite",value:function(e){var t=this;R("receiveReinvite()");var n=e.getHeader("Content-Type"),r={request:e,callback:void 0,reject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=!0;var n=t.status_code||403,r=t.reason_phrase||"",o=g.cloneArray(t.extraHeaders);if(this._status!==x.STATUS_CONFIRMED)return!1;if(n<300||n>=700)throw new TypeError("Invalid status_code: "+String(n));e.reply(n,r,o)}.bind(this)},i=!1;if(this.emit("reinvite",r),!i){if(this._late_sdp=!1,!e.body)return this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),void(this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._createLocalDescription("offer",t._rtcOfferConstraints)})).then((function(e){o.call(t,e)})).catch((function(){e.reply(500)})));if("application/sdp"!==n)return R("invalid Content-Type"),void e.reply(415);this._processInDialogSdpOffer(e).then((function(e){t._status!==x.STATUS_TERMINATED&&o.call(t,e)})).catch((function(e){I(e)}))}function o(t){var n=this,i=["Contact: "+String(this._contact)];this._handleSessionTimersInIncomingRequest(e,i),this._late_sdp&&(t=this._mangleOffer(t)),e.reply(200,null,i,t,(function(){n._status=x.STATUS_WAITING_FOR_ACK,n._setInvite2xxTimer(e,t),n._setACKTimer()})),"function"==typeof r.callback&&r.callback()}}},{key:"_receiveUpdate",value:function(e){var t=this;R("receiveUpdate()");var n=e.getHeader("Content-Type"),r={request:e,callback:void 0,reject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=!0;var n=t.status_code||403,r=t.reason_phrase||"",o=g.cloneArray(t.extraHeaders);if(this._status!==x.STATUS_CONFIRMED)return!1;if(n<300||n>=700)throw new TypeError("Invalid status_code: "+String(n));e.reply(n,r,o)}.bind(this)},i=!1;if(this.emit("update",r),!i)if(e.body){if("application/sdp"!==n)return R("invalid Content-Type"),void e.reply(415);this._processInDialogSdpOffer(e).then((function(e){t._status!==x.STATUS_TERMINATED&&o.call(t,e)})).catch((function(e){I(e)}))}else o.call(this,null);function o(t){var n=["Contact: "+String(this._contact)];this._handleSessionTimersInIncomingRequest(e,n),e.reply(200,null,n,t),"function"==typeof r.callback&&r.callback()}}},{key:"_processInDialogSdpOffer",value:function(e){var t=this;R("_processInDialogSdpOffer()");var n=e.parseSDP(),r=!1,o=!0,s=!1,u=void 0;try{for(var a,l=(0,i.default)(n.media);!(o=(a=l.next()).done);o=!0){var c=a.value;if(-1!==k.indexOf(c.type)){var f=c.direction||n.direction||"sendrecv";if("sendonly"!==f&&"inactive"!==f){r=!1;break}r=!0}}}catch(e){s=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw u}}var d={originator:"remote",type:"offer",sdp:e.body};R('emit "sdp"'),this.emit("sdp",d);var h=new RTCSessionDescription({type:"offer",sdp:d.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(t._status===x.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(h).catch((function(n){throw e.reply(488),I('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),new Error("peerconnection.setRemoteDescription() failed")}))})).then((function(){if(t._status===x.STATUS_TERMINATED)throw new Error("terminated");!0===t._remoteHold&&!1===r?(t._remoteHold=!1,t._onunhold("remote")):!1===t._remoteHold&&!0===r&&(t._remoteHold=!0,t._onhold("remote"))})).then((function(){if(t._status===x.STATUS_TERMINATED)throw new Error("terminated");return t._createLocalDescription("answer",t._rtcAnswerConstraints).catch((function(){throw e.reply(500),new Error("_createLocalDescription() failed")}))})),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(e){var n=this;if(R("receiveRefer()"),!e.refer_to)return R("no Refer-To header field present in REFER"),void e.reply(400);if(e.refer_to.uri.scheme!==p.SIP)return R("Refer-To header field points to a non-SIP URI scheme"),void e.reply(416);e.reply(202);var r=new b(this,e.cseq);function i(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n="function"==typeof n?n:null,this._status!==x.STATUS_WAITING_FOR_ACK&&this._status!==x.STATUS_CONFIRMED)return!1;var o=new t(this._ua);if(o.on("progress",(function(e){var t=e.response;r.notify(t.status_code,t.reason_phrase)})),o.on("accepted",(function(e){var t=e.response;r.notify(t.status_code,t.reason_phrase)})),o.on("_failed",(function(e){var t=e.message,n=e.cause;t?r.notify(t.status_code,t.reason_phrase):r.notify(487,n)})),e.refer_to.uri.hasHeader("replaces")){var s=decodeURIComponent(e.refer_to.uri.getHeader("replaces"));i.extraHeaders=g.cloneArray(i.extraHeaders),i.extraHeaders.push("Replaces: "+String(s))}o.connect(e.refer_to.uri.toAor(),i,n)}function o(){r.notify(603)}R('emit "refer"'),this.emit("refer",{request:e,accept:function(e,t){i.call(n,e,t)},reject:function(){o.call(n)}})}},{key:"_receiveNotify",value:function(e){switch(R("receiveNotify()"),e.event||e.reply(400),e.event.event){case"refer":var t=void 0,n=void 0;if(e.event.params&&e.event.params.id)t=e.event.params.id,n=this._referSubscribers[t];else{if(1!==(0,r.default)(this._referSubscribers).length)return void e.reply(400,"Missing event id parameter");n=this._referSubscribers[(0,r.default)(this._referSubscribers)[0]]}if(!n)return void e.reply(481,"Subscription does not exist");n.receiveNotify(e),e.reply(200);break;default:e.reply(489)}}},{key:"_receiveReplaces",value:function(e){var n=this;function r(n){var r=this;if(this._status!==x.STATUS_WAITING_FOR_ACK&&this._status!==x.STATUS_CONFIRMED)return!1;var i=new t(this._ua);i.on("confirmed",(function(){r.terminate()})),i.init_incoming(e,n)}function i(){R("Replaced INVITE rejected by the user"),e.reply(486)}R("receiveReplaces()"),this.emit("replaces",{request:e,accept:function(e){r.call(n,e)},reject:function(){i.call(n)}})}},{key:"_sendInitialRequest",value:function(e,t,n){var r=this,i=new T(this._ua,this._request,{onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},onAuthenticated:function(e){r._request=e},onReceiveResponse:function(e){r._receiveInviteResponse(e)}});o.default.resolve().then((function(){return n||(e.audio||e.video?(r._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e).catch((function(e){if(r._status===x.STATUS_TERMINATED)throw new Error("terminated");throw r._failed("local",null,p.causes.USER_DENIED_MEDIA_ACCESS),I('emit "getusermediafailed" [error:%o]',e),r.emit("getusermediafailed",e),e}))):void 0)})).then((function(e){if(r._status===x.STATUS_TERMINATED)throw new Error("terminated");return r._localMediaStream=e,e&&e.getTracks().forEach((function(t){r._connection.addTrack(t,e)})),r._connecting(r._request),r._createLocalDescription("offer",t).catch((function(e){throw r._failed("local",null,p.causes.WEBRTC_ERROR),e}))})).then((function(e){if(r._is_canceled||r._status===x.STATUS_TERMINATED)throw new Error("terminated");r._request.body=e,r._status=x.STATUS_INVITE_SENT,R('emit "sending" [request:%o]',r._request),r.emit("sending",{request:r._request}),i.send()})).catch((function(e){r._status!==x.STATUS_TERMINATED&&I(e)}))}},{key:"_receiveInviteResponse",value:function(e){var t=this;if(R("receiveInviteResponse()"),this._dialog&&e.status_code>=200&&e.status_code<=299){if(this._dialog.id.call_id===e.call_id&&this._dialog.id.local_tag===e.from_tag&&this._dialog.id.remote_tag===e.to_tag)return void this.sendRequest(p.ACK);var n=new S(this,e,"UAC");return void 0!==n.error?void R(n.error):(this.sendRequest(p.ACK),void this.sendRequest(p.BYE))}if(this._is_canceled)e.status_code>=100&&e.status_code<200?this._request.cancel(this._cancel_reason):e.status_code>=200&&e.status_code<299&&this._acceptAndTerminate(e);else if(this._status===x.STATUS_INVITE_SENT||this._status===x.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this._status=x.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){R("1xx response received without to tag");break}if(e.hasHeader("contact")&&!this._createDialog(e,"UAC",!0))break;if(this._status=x.STATUS_1XX_RECEIVED,this._progress("remote",e),!e.body)break;var r={originator:"remote",type:"answer",sdp:e.body};R('emit "sdp"'),this.emit("sdp",r);var i=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(i)})).catch((function(e){I('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}));break;case/^2[0-9]{2}$/.test(e.status_code):if(this._status=x.STATUS_CONFIRMED,!e.body){this._acceptAndTerminate(e,400,p.causes.MISSING_SDP),this._failed("remote",e,p.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(e,"UAC"))break;var o={originator:"remote",type:"answer",sdp:e.body};R('emit "sdp"'),this.emit("sdp",o);var s=new RTCSessionDescription({type:"answer",sdp:o.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if("stable"===t._connection.signalingState)return t._connection.createOffer(t._rtcOfferConstraints).then((function(e){return t._connection.setLocalDescription(e)})).catch((function(n){t._acceptAndTerminate(e,500,n.toString()),t._failed("local",e,p.causes.WEBRTC_ERROR)}))})).then((function(){t._connection.setRemoteDescription(s).then((function(){t._handleSessionTimersInIncomingResponse(e),t._accepted("remote",e),t.sendRequest(p.ACK),t._confirmed("local",null)})).catch((function(n){t._acceptAndTerminate(e,488,"Not Acceptable Here"),t._failed("remote",e,p.causes.BAD_MEDIA_DESCRIPTION),I('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n)}))}));break;default:var u=g.sipErrorCause(e.status_code);this._failed("remote",e,u)}}},{key:"_sendReinvite",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R("sendReinvite()");var n=g.cloneArray(t.extraHeaders),r=t.eventHandlers||{},i=t.rtcOfferConstraints||this._rtcOfferConstraints||null,o=!1;function s(e){var t=this;if(this._status!==x.STATUS_TERMINATED&&(this.sendRequest(p.ACK),!o))if(this._handleSessionTimersInIncomingResponse(e),e.body)if("application/sdp"===e.getHeader("Content-Type")){var n={originator:"remote",type:"answer",sdp:e.body};R('emit "sdp"'),this.emit("sdp",n);var i=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(i)})).then((function(){r.succeeded&&r.succeeded(e)})).catch((function(e){u.call(t),I('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}))}else u.call(this);else u.call(this)}function u(e){r.failed&&r.failed(e)}n.push("Contact: "+String(this._contact)),n.push("Content-Type: application/sdp"),this._sessionTimers.running&&n.push("Session-Expires: "+String(this._sessionTimers.currentExpires)+";refresher="+(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",i)})).then((function(t){var r={originator:"local",type:"offer",sdp:t=e._mangleOffer(t)};R('emit "sdp"'),e.emit("sdp",r),e.sendRequest(p.INVITE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){s.call(e,t),o=!0},onErrorResponse:function(t){u.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})})).catch((function(){u()}))}},{key:"_sendUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R("sendUpdate()");var n=g.cloneArray(t.extraHeaders),r=t.eventHandlers||{},i=t.rtcOfferConstraints||this._rtcOfferConstraints||null,o=t.sdpOffer||!1,s=!1;function u(e){var t=this;if(this._status!==x.STATUS_TERMINATED&&!s)if(this._handleSessionTimersInIncomingResponse(e),o){if(!e.body)return void a.call(this);if("application/sdp"!==e.getHeader("Content-Type"))return void a.call(this);var n={originator:"remote",type:"answer",sdp:e.body};R('emit "sdp"'),this.emit("sdp",n);var i=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(i)})).then((function(){r.succeeded&&r.succeeded(e)})).catch((function(e){a.call(t),I('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}))}else r.succeeded&&r.succeeded(e)}function a(e){r.failed&&r.failed(e)}n.push("Contact: "+String(this._contact)),this._sessionTimers.running&&n.push("Session-Expires: "+String(this._sessionTimers.currentExpires)+";refresher="+(this._sessionTimers.refresher?"uac":"uas")),o?(n.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",i)})).then((function(t){var r={originator:"local",type:"offer",sdp:t=e._mangleOffer(t)};R('emit "sdp"'),e.emit("sdp",r),e.sendRequest(p.UPDATE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){u.call(e,t),s=!0},onErrorResponse:function(t){a.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})})).catch((function(){a.call(e)}))):this.sendRequest(p.UPDATE,{extraHeaders:n,eventHandlers:{onSuccessResponse:function(t){u.call(e,t)},onErrorResponse:function(t){a.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})}},{key:"_acceptAndTerminate",value:function(e,t,n){R("acceptAndTerminate()");var r=[];t&&(n=n||p.REASON_PHRASE[t]||"",r.push("Reason: SIP ;cause="+String(t)+'; text="'+String(n)+'"')),(this._dialog||this._createDialog(e,"UAC"))&&(this.sendRequest(p.ACK),this.sendRequest(p.BYE,{extraHeaders:r})),this._status=x.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(e){if(!this._localHold&&!this._remoteHold)return e;if(e=h.parse(e),this._localHold&&!this._remoteHold){R("mangleOffer() | me on hold, mangling offer");var t=!0,n=!1,r=void 0;try{for(var o,s=(0,i.default)(e.media);!(t=(o=s.next()).done);t=!0){var u=o.value;-1!==k.indexOf(u.type)&&(u.direction?"sendrecv"===u.direction?u.direction="sendonly":"recvonly"===u.direction&&(u.direction="inactive"):u.direction="sendonly")}}catch(e){n=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}}else if(this._localHold&&this._remoteHold){R("mangleOffer() | both on hold, mangling offer");var a=!0,l=!1,c=void 0;try{for(var f,d=(0,i.default)(e.media);!(a=(f=d.next()).done);a=!0){var p=f.value;-1!==k.indexOf(p.type)&&(p.direction="inactive")}}catch(e){l=!0,c=e}finally{try{!a&&d.return&&d.return()}finally{if(l)throw c}}}else if(this._remoteHold){R("mangleOffer() | remote on hold, mangling offer");var _=!0,v=!1,g=void 0;try{for(var m,y=(0,i.default)(e.media);!(_=(m=y.next()).done);_=!0){var S=m.value;-1!==k.indexOf(S.type)&&(S.direction?"sendrecv"===S.direction?S.direction="recvonly":"recvonly"===S.direction&&(S.direction="inactive"):S.direction="recvonly")}}catch(e){v=!0,g=e}finally{try{!_&&y.return&&y.return()}finally{if(v)throw g}}}return h.write(e)}},{key:"_setLocalMediaStatus",value:function(){var e=!0,t=!0;(this._localHold||this._remoteHold)&&(e=!1,t=!1),this._audioMuted&&(e=!1),this._videoMuted&&(t=!1),this._toggleMuteAudio(!e),this._toggleMuteVideo(!t)}},{key:"_handleSessionTimersInIncomingRequest",value:function(e,t){if(this._sessionTimers.enabled){var n=void 0;e.session_expires&&e.session_expires>=p.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,n=e.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,n="uas"),t.push("Session-Expires: "+String(this._sessionTimers.currentExpires)+";refresher="+String(n)),this._sessionTimers.refresher="uas"===n,this._runSessionTimer()}}},{key:"_handleSessionTimersInIncomingResponse",value:function(e){if(this._sessionTimers.enabled){var t=void 0;e.session_expires&&e.session_expires>=p.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,t=e.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,t="uac"),this._sessionTimers.refresher="uac"===t,this._runSessionTimer()}}},{key:"_runSessionTimer",value:function(){var e=this,t=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout((function(){e._status!==x.STATUS_TERMINATED&&(R("runSessionTimer() | sending session refresh request"),e._sessionTimers.refreshMethod===p.UPDATE?e._sendUpdate():e._sendReinvite())}),500*t):this._sessionTimers.timer=setTimeout((function(){e._status!==x.STATUS_TERMINATED&&(I("runSessionTimer() | timer expired, terminating the session"),e.terminate({cause:p.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))}),1100*t)}},{key:"_toggleMuteAudio",value:function(e){var t=this._connection.getSenders().filter((function(e){return e.track&&"audio"===e.track.kind})),n=!0,r=!1,o=void 0;try{for(var s,u=(0,i.default)(t);!(n=(s=u.next()).done);n=!0){s.value.track.enabled=!e}}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}}},{key:"_toggleMuteVideo",value:function(e){var t=this._connection.getSenders().filter((function(e){return e.track&&"video"===e.track.kind})),n=!0,r=!1,o=void 0;try{for(var s,u=(0,i.default)(t);!(n=(s=u.next()).done);n=!0){s.value.track.enabled=!e}}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}}},{key:"_newRTCSession",value:function(e,t){R("newRTCSession()"),this._ua.newRTCSession(this,{originator:e,session:this,request:t})}},{key:"_connecting",value:function(e){R("session connecting"),R('emit "connecting"'),this.emit("connecting",{request:e})}},{key:"_progress",value:function(e,t){R("session progress"),R('emit "progress"'),this.emit("progress",{originator:e,response:t||null})}},{key:"_accepted",value:function(e,t){R("session accepted"),this._start_time=new Date,R('emit "accepted"'),this.emit("accepted",{originator:e,response:t||null})}},{key:"_confirmed",value:function(e,t){R("session confirmed"),this._is_confirmed=!0,R('emit "confirmed"'),this.emit("confirmed",{originator:e,ack:t||null})}},{key:"_ended",value:function(e,t,n){R("session ended"),this._end_time=new Date,this._close(),R('emit "ended"'),this.emit("ended",{originator:e,message:t||null,cause:n})}},{key:"_failed",value:function(e,t,n){R("session failed"),R('emit "_failed"'),this.emit("_failed",{originator:e,message:t||null,cause:n}),this._close(),R('emit "failed"'),this.emit("failed",{originator:e,message:t||null,cause:n})}},{key:"_onhold",value:function(e){R("session onhold"),this._setLocalMediaStatus(),R('emit "hold"'),this.emit("hold",{originator:e})}},{key:"_onunhold",value:function(e){R("session onunhold"),this._setLocalMediaStatus(),R('emit "unhold"'),this.emit("unhold",{originator:e})}},{key:"_onmute",value:function(e){var t=e.audio,n=e.video;R("session onmute"),this._setLocalMediaStatus(),R('emit "muted"'),this.emit("muted",{audio:t,video:n})}},{key:"_onunmute",value:function(e){var t=e.audio,n=e.video;R("session onunmute"),this._setLocalMediaStatus(),R('emit "unmuted"'),this.emit("unmuted",{audio:t,video:n})}},{key:"C",get:function(){return x}},{key:"causes",get:function(){return p.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"status",get:function(){return this._status}}]),t}(d)},function(e,t,n){"use strict";var r=n(5),i=n(13),o=n(0)("JsSIP:ERROR:Socket");o.log=console.warn.bind(console),t.isSocket=function(e){if(Array.isArray(e))return!1;if(void 0===e)return o("undefined JsSIP.Socket instance"),!1;try{if(!r.isString(e.url))throw o("missing or invalid JsSIP.Socket url property"),new Error;if(!r.isString(e.via_transport))throw o("missing or invalid JsSIP.Socket via_transport property"),new Error;if(-1===i.parse(e.sip_uri,"SIP_URI"))throw o("missing or invalid JsSIP.Socket sip_uri property"),new Error}catch(e){return!1}try{["connect","disconnect","send"].forEach((function(t){if(!r.isFunction(e[t]))throw o("missing or invalid JsSIP.Socket method: "+String(t)),new Error}))}catch(e){return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(1)),i=u(n(2)),o=u(n(176)),s=u(n(177));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"uuidv1",value:function(){return(0,o.default)()}},{key:"uuidv4",value:function(){return(0,s.default)()}}]),e}();t.default=a},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneEnum=void 0;var r=o(n(96)),i=o(n(60));function o(e){return e&&e.__esModule?e:{default:e}}t.default=r.default,"undefined"!=typeof window&&(window.PhoneClient=r.default);var s=t.PhoneEnum=i.default;"undefined"!=typeof window&&(window.PhoneEnum=s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(63)),i=f(n(16)),o=f(n(34)),s=f(n(1)),u=f(n(2)),a=f(n(82)),l=f(n(123)),c=f(n(61));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){(0,s.default)(this,e),this._envConfig={}}return(0,u.default)(e,[{key:"init",value:function(e){var t=this;t._envConfig=c.default.getEnv(),t._envConfig&&o.default.resolve({deviceId:t._envConfig.account,password:t._envConfig.password,domain:t._envConfig.domain}).then(t.handleInitParam.bind(t)).then(function(n){if(n){var r={phone:{enable:!!n&&n.enable,ack:"success"}},s=o.default.resolve(r.phone);n&&n.enable&&(s=new o.default(t.initPhone.bind(t,n))),o.default.all([s].map((function(e){return e.catch((function(e){a.default.recordPoint("","","err:"+(0,i.default)(e))}))}))).then((function(n){n[0]&&"success"===n[0].ack?(n[0].enable=r.phone.enable,r.phone=n[0]):(r.phone.ack="fail",r.phone.msg="init phone fail"),t._globalConfig=r,e&&e(r)}))}}.bind(t)).catch((function(t){t.enable=!0,e&&e({phone:t})}))}},{key:"connect",value:function(e,t,n){e&&"function"==typeof e&&(n=t,t=e,e=null);var i={phone:{enable:!!(e=(0,r.default)({},this._globalConfig,e)).phone&&!!e.phone.enable,ack:"success"}},s=o.default.resolve(i.phone);e.phone.enable&&(s=new o.default(this.phoneLogin.bind(this,e))),s.then((function(e){i.phone.ack=e&&e.ack?e.ack:"fail",e&&"fail"===e.ack&&(i.phone.msg="connect phone fail"),t&&t(i)})).catch((function(e){n&&n(e)}))}},{key:"handleInitParam",value:function(){var e=this,t=this;return new o.default((function(n){var i={enable:!0,phoneChannel:t._envConfig.channel};"webrtc"===t._envConfig.channel?(i.sipId=t._envConfig.account,i.skillGroupCode=t._envConfig.skillGroupCode.map((function(e){return{code:e}}))):"telephone"===t._envConfig.channel&&(i.deviceId=t._envConfig.account,i.sipId=t._envConfig.account,i.skillGroupCode=t._envConfig.skillGroupCode.map((function(e){return{code:e}}))),t._envConfig=(0,r.default)({},t._envConfig,i),e.setEnv(t._envConfig),n(i)}))}},{key:"setEnv",value:function(e,t,n){e.command="setEnv",c.default.setEnv(e,t,n)}},{key:"initPhone",value:function(e,t,n){e&&"function"==typeof e&&(n=t,t=e,e={}),e.command="initPhone",l.default.operationPhone(e,t,n)}},{key:"phoneLogin",value:function(e,t,n){e.command="phoneLogin",l.default.operationPhone(e,t,n)}},{key:"disconnect",value:function(){console.log("disconnect:"),l.default.operationPhone({command:"disconnect"})}},{key:"setPhoneStatus",value:function(e){e&&(e.command="setPhoneStatus",l.default.operationPhone(e))}},{key:"makeCall",value:function(e,t,n){e&&((e=(0,r.default)({remote:e.dnis},e)).command="makeCall",l.default.operationPhone(e,t,n))}},{key:"hangUp",value:function(e){e&&(e.command="hangUp",l.default.operationPhone(e))}},{key:"hangUpWhenHasCurrentLine",value:function(e){e&&(e.command="hangUpWhenHasCurrentLine",l.default.operationPhone(e))}},{key:"hold",value:function(e){e&&(e.command="hold","U"===e.flag&&(e.command="unhold"),l.default.operationPhone(e))}},{key:"unhold",value:function(e){e&&(e.command="unhold",l.default.operationPhone(e))}},{key:"mute",value:function(e){e&&(e.command="mute","U"===e.flag&&(e.command="unmute"),l.default.operationPhone(e))}},{key:"unmute",value:function(e){e&&(e.command="unmute",l.default.operationPhone(e))}},{key:"answer",value:function(e){e&&(e.command="answer",l.default.operationPhone(e))}},{key:"consult",value:function(e){e&&((e=(0,r.default)({remote:e.dnis},e)).command="consult",l.default.operationPhone(e))}},{key:"refer",value:function(e){e&&(e.command="refer",l.default.operationPhone(e))}},{key:"evaluation",value:function(e){e&&(e.command="evaluation",l.default.operationPhone(e))}},{key:"createConference",value:function(e,t,n){e&&(e.command="createConference",l.default.operationPhone(e,t,n))}},{key:"conferenceAddUser",value:function(e,t,n){e&&(e.command="conferenceAddUser",l.default.operationPhone(e,t,n))}},{key:"conferenceAddUserCancel",value:function(e,t,n){e&&(e.command="conferenceAddUserCancel",l.default.operationPhone(e,t,n))}},{key:"conference",value:function(e,t,n){e&&(e.command="conference",l.default.operationPhone(e,t,n))}},{key:"multiCall",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.command="multiCall",l.default.operationPhonePromise(e)}},{key:"recoverCall",value:function(e,t,n){e&&(e.command="recoverCall",l.default.operationPhone(e,t,n))}},{key:"alternate",value:function(e){e&&(e.command="alternate",l.default.operationPhone(e))}},{key:"reconnect",value:function(e){e&&(e.command="reconnect",l.default.operationPhone(e))}},{key:"sendDTMF",value:function(e){e&&(e.command="sendDTMF",l.default.operationPhone(e))}},{key:"showNotification",value:function(e){return c.default.showNotification(e)}},{key:"setPhoneEventListener",value:function(e){e&&(e.command="phoneEvent",l.default.setListener(e))}},{key:"setPhoneWebsocketStatusListener",value:function(e){e&&(e.command="phoneWebsocketStatus",l.default.setListener(e))}},{key:"setPhoneStatusListener",value:function(e){e&&(e.command="phoneStatusChange",l.default.setListener(e))}},{key:"setWebrtcStatusListener",value:function(e){e&&(e.command="webrtcStatus",l.default.setListener(e))}},{key:"setHeartbeatListener",value:function(e){e&&(e.command="heartbeat",l.default.setListener(e))}},{key:"setOriginalMessageListener",value:function(e){e&&(e.command="originalMessage",this.setEventListener(e))}},{key:"setNetworkErrorListener",value:function(e){e&&(e.command="networkError",l.default.setListener(e))}},{key:"setEventListener",value:function(e){e&&e.command&&l.default.setEventListener(e)}},{key:"initVLog",value:function(e,t){if(e)return e=(0,r.default)({closeModule:{page:!0,element:!0,ajax:!0}},e),t?a.default.resetInstance(e):a.default.init(e)}},{key:"getInstance",value:function(){return this}}]),e}();t.default=new d},function(e,t,n){n(98),e.exports=n(3).Object.assign},function(e,t,n){var r=n(8);r(r.S+r.F,"Object",{assign:n(99)})},function(e,t,n){"use strict";var r=n(15),i=n(31),o=n(52),s=n(40),u=n(28),a=n(67),l=Object.assign;e.exports=!l||n(26)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=u(e),l=arguments.length,c=1,f=o.f,d=s.f;l>c;)for(var h,p=a(arguments[c++]),_=f?i(p).concat(f(p)):i(p),v=_.length,g=0;v>g;)h=_[g++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:l},function(e,t,n){var r=n(27),i=n(47),o=n(101);e.exports=function(e){return function(t,n,s){var u,a=r(t),l=i(a.length),c=o(s,l);if(e&&n!=n){for(;l>c;)if((u=a[c++])!=u)return!0}else for(;l>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(48),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(3),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(68),n(41),n(54),n(110),n(118),n(119),e.exports=n(3).Promise},function(e,t,n){var r=n(48),i=n(46);e.exports=function(e){return function(t,n){var o,s,u=String(i(t)),a=r(n),l=u.length;return a<0||a>=l?e?"":void 0:(o=u.charCodeAt(a))<55296||o>56319||a+1===l||(s=u.charCodeAt(a+1))<56320||s>57343?e?u.charAt(a):o:e?u.slice(a,a+2):s-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(53),i=n(30),o=n(42),s={};n(20)(s,n(7)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(14),i=n(9),o=n(31);e.exports=n(15)?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),u=s.length,a=0;u>a;)r.f(e,n=s[a++],t[n]);return e}},function(e,t,n){"use strict";var r=n(108),i=n(109),o=n(35),s=n(27);e.exports=n(69)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,s,u=n(33),a=n(6),l=n(25),c=n(73),f=n(8),d=n(18),h=n(38),p=n(111),_=n(112),v=n(76),g=n(77).set,m=n(114)(),y=n(56),S=n(78),T=n(115),E=n(79),C=a.TypeError,b=a.process,A=b&&b.versions,w=A&&A.v8||"",R=a.Promise,I="process"==c(b),x=function(){},k=i=y.f,O=!!function(){try{var e=R.resolve(1),t=(e.constructor={})[n(7)("species")]=function(e){e(x,x)};return(I||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t&&0!==w.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(e){}}(),N=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;m((function(){for(var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s,u=i?t.ok:t.fail,a=t.resolve,l=t.reject,c=t.domain;try{u?(i||(2==e._h&&U(e),e._h=1),!0===u?n=r:(c&&c.enter(),n=u(r),c&&(c.exit(),s=!0)),n===t.promise?l(C("Promise-chain cycle")):(o=N(n))?o.call(n,a,l):a(n)):l(r)}catch(e){c&&!s&&c.exit(),l(e)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&D(e)}))}},D=function(e){g.call(a,(function(){var t,n,r,i=e._v,o=M(e);if(o&&(t=S((function(){I?b.emit("unhandledRejection",i,e):(n=a.onunhandledrejection)?n({promise:e,reason:i}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=I||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},U=function(e){g.call(a,(function(){var t;I?b.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})}))},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},q=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw C("Promise can't be resolved itself");(t=N(e))?m((function(){var r={_w:n,_d:!1};try{t.call(e,l(q,r,1),l(L,r,1))}catch(e){L.call(r,e)}})):(n._v=e,n._s=1,P(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};O||(R=function(e){p(this,R,"Promise","_h"),h(e),r.call(this);try{e(l(q,this,1),l(L,this,1))}catch(e){L.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(116)(R.prototype,{then:function(e,t){var n=k(v(this,R));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=I?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(q,e,1),this.reject=l(L,e,1)},y.f=k=function(e){return e===R||e===s?new o(e):i(e)}),f(f.G+f.W+f.F*!O,{Promise:R}),n(42)(R,"Promise"),n(117)("Promise"),s=n(3).Promise,f(f.S+f.F*!O,"Promise",{reject:function(e){var t=k(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(u||!O),"Promise",{resolve:function(e){return E(u&&this===s?R:this,e)}}),f(f.S+f.F*!(O&&n(80)((function(e){R.all(e).catch(x)}))),"Promise",{all:function(e){var t=this,n=k(t),r=n.resolve,i=n.reject,o=S((function(){var n=[],o=0,s=1;_(e,!1,(function(e){var u=o++,a=!1;n.push(void 0),s++,t.resolve(e).then((function(e){a||(a=!0,n[u]=e,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=k(t),r=n.reject,i=S((function(){_(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(25),i=n(74),o=n(75),s=n(9),u=n(47),a=n(55),l={},c={};(t=e.exports=function(e,t,n,f,d){var h,p,_,v,g=d?function(){return e}:a(e),m=r(n,f,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(h=u(e.length);h>y;y++)if((v=t?m(s(p=e[y])[0],p[1]):m(e[y]))===l||v===c)return v}else for(_=g.call(e);!(p=_.next()).done;)if((v=i(_,m,p.value,t))===l||v===c)return v}).BREAK=l,t.RETURN=c},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(6),i=n(77).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,u=r.Promise,a="process"==n(32)(s);e.exports=function(){var e,t,n,l=function(){var r,i;for(a&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(a)n=function(){s.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(u&&u.resolve){var c=u.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var f=!0,d=document.createTextNode("");new o(l).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(6).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(20);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(6),i=n(3),o=n(14),s=n(15),u=n(7)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[u]&&o.f(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(8),i=n(3),o=n(6),s=n(76),u=n(79);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(8),i=n(56),o=n(78);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){n(121);var r=n(3).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(8);r(r.S+r.F*!n(15),"Object",{defineProperty:n(14).f})},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=111)}([function(e,t,n){"use strict";var r=n(40),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function u(e){return null!==e&&"object"==typeof e}function a(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:a,isStream:function(e){return u(e)&&a(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(50))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(1),i=n(28),o=n(4),s=n(31),u=n(32),a=n(53),l=i("wks"),c=r.Symbol,f=a?c:c&&c.withoutSetter||s;e.exports=function(e){return o(l,e)||(u&&o(c,e)?l[e]=c[e]:l[e]=f("Symbol."+e)),l[e]}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(2);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(5),i=n(11),o=n(20);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=69)}([function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(46))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(1);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(0),i=n(25),o=n(3),s=n(26),u=n(27),a=n(49),l=i("wks"),c=r.Symbol,f=a?c:c&&c.withoutSetter||s;e.exports=function(e){return o(l,e)||(u&&o(c,e)?l[e]=c[e]:l[e]=f("Symbol."+e)),l[e]}},function(e,t,n){var r=n(4),i=n(8),o=n(19);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(4),i=n(28),o=n(5),s=n(20),u=Object.defineProperty;t.f=r?u:function(e,t,n){if(o(e),t=s(t,!0),o(n),i)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(0),i=n(7),o=n(3),s=n(16),u=n(23),a=n(32),l=a.get,c=a.enforce,f=String(String).split("String");(e.exports=function(e,t,n,u){var a=!!u&&!!u.unsafe,l=!!u&&!!u.enumerable,d=!!u&&!!u.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),c(n).source=f.join("string"==typeof t?t:"")),e!==r?(a?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=n:i(e,t,n)):l?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||u(this)}))},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},,,function(e,t,n){var r=n(35),i=n(9);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(0),i=n(7);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(12),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(0),i=n(30).f,o=n(7),s=n(10),u=n(16),a=n(54),l=n(39);e.exports=function(e,t){var n,c,f,d,h,p=e.target,_=e.global,v=e.stat;if(n=_?r:v?r[p]||u(p,{}):(r[p]||{}).prototype)for(c in t){if(d=t[c],f=e.noTargetGet?(h=i(n,c))&&h.value:n[c],!l(_?c:p+(v?".":"#")+c,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;a(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),s(n,c,d,e)}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,n){var r=n(56),i=n(0),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){var r=n(24),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(0),i=n(16),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(48),i=n(24);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r=n(1);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r=n(4),i=n(1),o=n(36);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},,function(e,t,n){var r=n(4),i=n(53),o=n(19),s=n(15),u=n(20),a=n(3),l=n(28),c=Object.getOwnPropertyDescriptor;t.f=r?c:function(e,t){if(e=s(e),t=u(t,!0),l)try{return c(e,t)}catch(e){}if(a(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(5);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r,i,o,s=n(47),u=n(0),a=n(2),l=n(7),c=n(3),f=n(37),d=n(21),h=u.WeakMap;if(s){var p=new h,_=p.get,v=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},i=function(e){return _.call(p,e)||{}},o=function(e){return v.call(p,e)}}else{var m=f("state");d[m]=!0,r=function(e,t){return l(e,m,t),t},i=function(e){return c(e,m)?e[m]:{}},o=function(e){return c(e,m)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!a(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){"use strict";var r,i,o=n(31),s=n(61),u=RegExp.prototype.exec,a=String.prototype.replace,l=u,c=(r=/a/,i=/b*/g,u.call(r,"a"),u.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=s.UNSUPPORTED_Y||s.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(c||d||f)&&(l=function(e){var t,n,r,i,s=this,l=f&&s.sticky,h=o.call(s),p=s.source,_=0,v=e;return l&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),v=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,_++),n=new RegExp("^(?:"+p+")",h)),d&&(n=new RegExp("^"+p+"$(?!\\s)",h)),c&&(t=s.lastIndex),r=u.call(l?n:s,v),l?r?(r.input=r.input.slice(_),r[0]=r[0].slice(_),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:c&&r&&(s.lastIndex=s.global?r.index+r[0].length:t),d&&r&&r.length>1&&a.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(1),i=n(11),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(0),i=n(2),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,n){var r=n(25),i=n(26),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){var r=n(43),i=n(34).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(1),i=/#|\.prototype\./,o=function(e,t){var n=u[s(e)];return n==l||n!=a&&("function"==typeof t?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=o.data={},a=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},function(e,t,n){var r=n(15),i=n(17),o=n(57),s=function(e){return function(t,n,s){var u,a=r(t),l=i(a.length),c=o(s,l);if(e&&n!=n){for(;l>c;)if((u=a[c++])!=u)return!0}else for(;l>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t,n){"use strict";var r=n(10),i=n(5),o=n(1),s=n(31),u=RegExp.prototype,a=u.toString,l=o((function(){return"/a/b"!=a.call({source:"a",flags:"b"})})),c="toString"!=a.name;(l||c)&&r(RegExp.prototype,"toString",(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in u)?s.call(e):n)}),{unsafe:!0})},function(e,t,n){var r=n(9);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(3),i=n(15),o=n(40).indexOf,s=n(21);e.exports=function(e,t){var n,u=i(e),a=0,l=[];for(n in u)!r(s,n)&&r(u,n)&&l.push(n);for(;t.length>a;)r(u,n=t[a++])&&(~o(l,n)||l.push(n));return l}},,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(0),i=n(23),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t){e.exports=!1},function(e,t,n){var r=n(27);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){"use strict";var r=n(18),i=n(33);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},,,function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(3),i=n(55),o=n(30),s=n(8);e.exports=function(e,t){for(var n=i(t),u=s.f,a=o.f,l=0;l<n.length;l++){var c=n[l];r(e,c)||u(e,c,a(t,c))}}},function(e,t,n){var r=n(22),i=n(38),o=n(58),s=n(5);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(0);e.exports=r},function(e,t,n){var r=n(12),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(11);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r,i,o=n(0),s=n(74),u=o.process,a=u&&u.versions,l=a&&a.v8;l?i=(r=l.split("."))[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){"use strict";var r=n(1);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";n(50);var r=n(10),i=n(1),o=n(6),s=n(33),u=n(7),a=o("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c="$0"==="a".replace(/./,"$0"),f=o("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var p=o(e),_=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=_&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[a]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!_||!v||"replace"===e&&(!l||!c||d)||"split"===e&&!h){var g=/./[p],m=n(p,""[e],(function(e,t,n,r,i){return t.exec===s?_&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=m[0],S=m[1];r(String.prototype,e,y),r(RegExp.prototype,p,2==t?function(e,t){return S.call(e,this,t)}:function(e){return S.call(e,this)})}f&&u(RegExp.prototype[p],"sham",!0)}},function(e,t,n){var r=n(11),i=n(33);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";var r=n(76).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(2),i=n(59),o=n(6)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},,,,function(e,t,n){"use strict";function r(e,t){var n=new Date;n.setTime((new Date).getTime()+2592e6),document.cookie="".concat(e,"=").concat(escape(t),";expires=").concat(n.toGMTString(),";path=/;")}function i(e,t){window.localStorage.setItem(e,t)}function o(e){return window.localStorage.getItem(e)}function s(e){return window.localStorage.removeItem(e)}function u(e){var t=new RegExp("(^| )".concat(e,"=([^;]*)(;|$)")),n=document.cookie.match(t);return n?unescape(n[2]):null}function a(e){var t=new Date;t.setTime(t.getTime()-1);var n=u(e);null!==n&&(document.cookie="".concat(e,"=").concat(n,";expires=").concat(t.toGMTString()))}function l(e,t){var n=new RegExp("(^| )".concat(e,"=([^;]*)(;|$)")),r=t.headers.cookie.match(n);return t.headers.cookie&&r?unescape(r[2]):null}n.r(t),n.d(t,"setCookie",(function(){return r})),n.d(t,"getCookie",(function(){return u})),n.d(t,"delCookie",(function(){return a})),n.d(t,"getCookieServer",(function(){return l})),n.d(t,"setStorage",(function(){return i})),n.d(t,"getStorage",(function(){return o})),n.d(t,"delStorage",(function(){return s})),n(71),n(75),n(50),n(41),n(99)},,function(e,t,n){"use strict";var r=n(18),i=n(1),o=n(59),s=n(2),u=n(42),a=n(17),l=n(72),c=n(65),f=n(73),d=n(6),h=n(60),p=d("isConcatSpreadable"),_=h>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=f("concat"),g=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!_||!v},{concat:function(e){var t,n,r,i,o,s=u(this),f=c(s,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?s:arguments[t],g(o)){if(d+(i=a(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,d++)n in o&&l(f,d,o[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(f,d++,o)}return f.length=d,f}})},function(e,t,n){"use strict";var r=n(20),i=n(8),o=n(19);e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},function(e,t,n){var r=n(1),i=n(6),o=n(60),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r=n(22);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(4),i=n(0),o=n(39),s=n(80),u=n(8).f,a=n(38).f,l=n(78),c=n(31),f=n(61),d=n(10),h=n(1),p=n(32).set,_=n(83),v=n(6)("match"),g=i.RegExp,m=g.prototype,y=/a/g,S=/a/g,T=new g(y)!==y,E=f.UNSUPPORTED_Y;if(r&&o("RegExp",!T||E||h((function(){return S[v]=!1,g(y)!=y||g(S)==S||"/a/i"!=g(y,"i")})))){for(var C=function(e,t){var n,r=this instanceof C,i=l(e),o=void 0===t;if(!r&&i&&e.constructor===C&&o)return e;T?i&&!o&&(e=e.source):e instanceof C&&(o&&(t=c.call(e)),e=e.source),E&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var u=s(T?new g(e,t):g(e,t),r?this:m,C);return E&&n&&p(u,{sticky:n}),u},b=function(e){e in C||u(C,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},A=a(g),w=0;A.length>w;)b(A[w++]);m.constructor=C,C.prototype=m,d(i,"RegExp",C)}_("RegExp")},function(e,t,n){var r=n(12),i=n(9),o=function(e){return function(t,n){var o,s,u=String(i(t)),a=r(n),l=u.length;return a<0||a>=l?e?"":void 0:(o=u.charCodeAt(a))<55296||o>56319||a+1===l||(s=u.charCodeAt(a+1))<56320||s>57343?e?u.charAt(a):o:e?u.slice(a,a+2):s-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},,function(e,t,n){var r=n(2),i=n(11),o=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},,function(e,t,n){var r=n(2),i=n(81);e.exports=function(e,t,n){var o,s;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(s=o.prototype)&&s!==n.prototype&&i(e,s),e}},function(e,t,n){var r=n(5),i=n(82);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(22),i=n(8),o=n(6),s=n(4),u=o("species");e.exports=function(e){var t=r(e),n=i.f;s&&t&&!t[u]&&n(t,u,{configurable:!0,get:function(){return this}})}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(62),i=n(5),o=n(17),s=n(9),u=n(64),a=n(63);r("match",1,(function(e,t,n){return[function(t){var n=s(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var s=i(e),l=String(this);if(!s.global)return a(s,l);var c=s.unicode;s.lastIndex=0;for(var f,d=[],h=0;null!==(f=a(s,l));){var p=String(f[0]);d[h]=p,""===p&&(s.lastIndex=u(l,o(s.lastIndex),c)),h++}return 0===h?null:d}]}))}])},function(e,t,n){var r=n(5),i=n(30),o=n(8),s=n(19),u=Object.defineProperty;t.f=r?u:function(e,t,n){if(o(e),t=s(t,!0),o(n),i)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r,i,o=n(97),s=n(98),u=RegExp.prototype.exec,a=String.prototype.replace,l=u,c=(r=/a/,i=/b*/g,u.call(r,"a"),u.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=s.UNSUPPORTED_Y||s.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(c||d||f)&&(l=function(e){var t,n,r,i,s=this,l=f&&s.sticky,h=o.call(s),p=s.source,_=0,v=e;return l&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),v=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,_++),n=new RegExp("^(?:"+p+")",h)),d&&(n=new RegExp("^"+p+"$(?!\\s)",h)),c&&(t=s.lastIndex),r=u.call(l?n:s,v),l?r?(r.input=r.input.slice(_),r[0]=r[0].slice(_),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:c&&r&&(s.lastIndex=s.global?r.index+r[0].length:t),d&&r&&r.length>1&&a.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=102)}({102:function(e,t,n){"use strict";n.r(t);var r=n(51),i=n(52),o=n(96),s=n.n(o),u=n(97),a=n.n(u),l=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"uuidv1",value:function(){return s()()}},{key:"uuidv4",value:function(){return a()()}}]),e}();t.default=l},51:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},52:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},94:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},95:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},96:function(e,t,n){var r,i,o=n(94),s=n(95),u=0,a=0;e.exports=function(e,t,n){var l=t&&n||0,c=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var h=o();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),_=void 0!==e.nsecs?e.nsecs:a+1,v=p-u+(_-a)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||p>u)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,a=_,i=d;var g=(1e4*(268435455&(p+=122192928e5))+_)%4294967296;c[l++]=g>>>24&255,c[l++]=g>>>16&255,c[l++]=g>>>8&255,c[l++]=255&g;var m=p/4294967296*1e4&268435455;c[l++]=m>>>8&255,c[l++]=255&m,c[l++]=m>>>24&15|16,c[l++]=m>>>16&255,c[l++]=d>>>8|128,c[l++]=255&d;for(var y=0;y<6;++y)c[l+y]=f[y];return t||s(c)}},97:function(e,t,n){var r=n(94),i=n(95);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var u=0;u<16;++u)t[o+u]=s[u];return t||i(s)}}})},function(e,t,n){var r=n(17),i=n(21),o=n(57);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,n){var r={};r[n(3)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(1),i=n(7);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(1),i=n(7),o=n(4),s=n(18),u=n(33),a=n(54),l=a.get,c=a.enforce,f=String(String).split("String");(e.exports=function(e,t,n,u){var a=!!u&&!!u.unsafe,l=!!u&&!!u.enumerable,d=!!u&&!!u.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),c(n).source=f.join("string"==typeof t?t:"")),e!==r?(a?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=n:i(e,t,n)):l?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||u(this)}))},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n,r){var i=t&&t.prototype instanceof c?t:c,o=Object.create(i.prototype),s=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var u=y(s,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=a(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function a(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function c(){}function f(){}function d(){}var h={};h[i]=function(){return this};var p=Object.getPrototypeOf,_=p&&p(p(C([])));_&&_!==t&&n.call(_,i)&&(h=_);var v=d.prototype=c.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function m(e,t){var r;this._invoke=function(i,o){function s(){return new t((function(r,s){!function r(i,o,s,u){var l=a(e[i],e,o);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,u)}))}u(l.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=a(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:b}}function b(){return{value:void 0,done:!0}}return f.prototype=v.constructor=d,d.constructor=f,d[s]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(m.prototype),m.prototype[o]=function(){return this},e.AsyncIterator=m,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new m(u(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},g(v),v[s]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),a=n.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(1),i=n(35).f,o=n(7),s=n(21),u=n(18),a=n(62),l=n(69);e.exports=function(e,t){var n,c,f,d,h,p=e.target,_=e.global,v=e.stat;if(n=_?r:v?r[p]||u(p,{}):(r[p]||{}).prototype)for(c in t){if(d=t[c],f=e.noTargetGet?(h=i(n,c))&&h.value:n[c],!l(_?c:p+(v?".":"#")+c,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;a(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),s(n,c,d,e)}}},function(e,t,n){var r=n(61),i=n(12);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(13),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){e.exports=n(77)},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=85)}([function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(46))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(1);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(0),i=n(25),o=n(3),s=n(26),u=n(27),a=n(49),l=i("wks"),c=r.Symbol,f=a?c:c&&c.withoutSetter||s;e.exports=function(e){return o(l,e)||(u&&o(c,e)?l[e]=c[e]:l[e]=f("Symbol."+e)),l[e]}},function(e,t,n){var r=n(4),i=n(8),o=n(19);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(4),i=n(28),o=n(5),s=n(20),u=Object.defineProperty;t.f=r?u:function(e,t,n){if(o(e),t=s(t,!0),o(n),i)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(0),i=n(7),o=n(3),s=n(16),u=n(23),a=n(32),l=a.get,c=a.enforce,f=String(String).split("String");(e.exports=function(e,t,n,u){var a=!!u&&!!u.unsafe,l=!!u&&!!u.enumerable,d=!!u&&!!u.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),c(n).source=f.join("string"==typeof t?t:"")),e!==r?(a?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=n:i(e,t,n)):l?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||u(this)}))},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},,,function(e,t,n){var r=n(35),i=n(9);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(0),i=n(7);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(12),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(0),i=n(30).f,o=n(7),s=n(10),u=n(16),a=n(54),l=n(39);e.exports=function(e,t){var n,c,f,d,h,p=e.target,_=e.global,v=e.stat;if(n=_?r:v?r[p]||u(p,{}):(r[p]||{}).prototype)for(c in t){if(d=t[c],f=e.noTargetGet?(h=i(n,c))&&h.value:n[c],!l(_?c:p+(v?".":"#")+c,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;a(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),s(n,c,d,e)}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,n){var r=n(56),i=n(0),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){var r=n(24),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(0),i=n(16),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(48),i=n(24);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r=n(1);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r=n(4),i=n(1),o=n(36);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r={};r[n(6)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(4),i=n(53),o=n(19),s=n(15),u=n(20),a=n(3),l=n(28),c=Object.getOwnPropertyDescriptor;t.f=r?c:function(e,t){if(e=s(e),t=u(t,!0),l)try{return c(e,t)}catch(e){}if(a(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(5);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r,i,o,s=n(47),u=n(0),a=n(2),l=n(7),c=n(3),f=n(37),d=n(21),h=u.WeakMap;if(s){var p=new h,_=p.get,v=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},i=function(e){return _.call(p,e)||{}},o=function(e){return v.call(p,e)}}else{var m=f("state");d[m]=!0,r=function(e,t){return l(e,m,t),t},i=function(e){return c(e,m)?e[m]:{}},o=function(e){return c(e,m)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!a(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){"use strict";var r,i,o=n(31),s=n(61),u=RegExp.prototype.exec,a=String.prototype.replace,l=u,c=(r=/a/,i=/b*/g,u.call(r,"a"),u.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=s.UNSUPPORTED_Y||s.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(c||d||f)&&(l=function(e){var t,n,r,i,s=this,l=f&&s.sticky,h=o.call(s),p=s.source,_=0,v=e;return l&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),v=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,_++),n=new RegExp("^(?:"+p+")",h)),d&&(n=new RegExp("^"+p+"$(?!\\s)",h)),c&&(t=s.lastIndex),r=u.call(l?n:s,v),l?r?(r.input=r.input.slice(_),r[0]=r[0].slice(_),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:c&&r&&(s.lastIndex=s.global?r.index+r[0].length:t),d&&r&&r.length>1&&a.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(1),i=n(11),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(0),i=n(2),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,n){var r=n(25),i=n(26),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){var r=n(43),i=n(34).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(1),i=/#|\.prototype\./,o=function(e,t){var n=u[s(e)];return n==l||n!=a&&("function"==typeof t?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=o.data={},a=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},function(e,t,n){var r=n(15),i=n(17),o=n(57),s=function(e){return function(t,n,s){var u,a=r(t),l=i(a.length),c=o(s,l);if(e&&n!=n){for(;l>c;)if((u=a[c++])!=u)return!0}else for(;l>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t,n){"use strict";var r=n(10),i=n(5),o=n(1),s=n(31),u=RegExp.prototype,a=u.toString,l=o((function(){return"/a/b"!=a.call({source:"a",flags:"b"})})),c="toString"!=a.name;(l||c)&&r(RegExp.prototype,"toString",(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in u)?s.call(e):n)}),{unsafe:!0})},function(e,t,n){var r=n(9);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(3),i=n(15),o=n(40).indexOf,s=n(21);e.exports=function(e,t){var n,u=i(e),a=0,l=[];for(n in u)!r(s,n)&&r(u,n)&&l.push(n);for(;t.length>a;)r(u,n=t[a++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var r=n(29),i=n(10),o=n(67);r||i(Object.prototype,"toString",o,{unsafe:!0})},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(0),i=n(23),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t){e.exports=!1},function(e,t,n){var r=n(27);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){"use strict";var r=n(18),i=n(33);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},,,function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(3),i=n(55),o=n(30),s=n(8);e.exports=function(e,t){for(var n=i(t),u=s.f,a=o.f,l=0;l<n.length;l++){var c=n[l];r(e,c)||u(e,c,a(t,c))}}},function(e,t,n){var r=n(22),i=n(38),o=n(58),s=n(5);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(0);e.exports=r},function(e,t,n){var r=n(12),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},,,function(e,t,n){"use strict";var r=n(1);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";n(50);var r=n(10),i=n(1),o=n(6),s=n(33),u=n(7),a=o("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c="$0"==="a".replace(/./,"$0"),f=o("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var p=o(e),_=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=_&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[a]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!_||!v||"replace"===e&&(!l||!c||d)||"split"===e&&!h){var g=/./[p],m=n(p,""[e],(function(e,t,n,r,i){return t.exec===s?_&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=m[0],S=m[1];r(String.prototype,e,y),r(RegExp.prototype,p,2==t?function(e,t){return S.call(e,this,t)}:function(e){return S.call(e,this)})}f&&u(RegExp.prototype[p],"sham",!0)}},function(e,t,n){var r=n(11),i=n(33);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";var r=n(76).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},,,function(e,t,n){"use strict";var r=n(29),i=n(68);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(29),i=n(11),o=n(6)("toStringTag"),s="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:s?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},,,,,,,function(e,t,n){var r=n(4),i=n(0),o=n(39),s=n(80),u=n(8).f,a=n(38).f,l=n(78),c=n(31),f=n(61),d=n(10),h=n(1),p=n(32).set,_=n(83),v=n(6)("match"),g=i.RegExp,m=g.prototype,y=/a/g,S=/a/g,T=new g(y)!==y,E=f.UNSUPPORTED_Y;if(r&&o("RegExp",!T||E||h((function(){return S[v]=!1,g(y)!=y||g(S)==S||"/a/i"!=g(y,"i")})))){for(var C=function(e,t){var n,r=this instanceof C,i=l(e),o=void 0===t;if(!r&&i&&e.constructor===C&&o)return e;T?i&&!o&&(e=e.source):e instanceof C&&(o&&(t=c.call(e)),e=e.source),E&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var u=s(T?new g(e,t):g(e,t),r?this:m,C);return E&&n&&p(u,{sticky:n}),u},b=function(e){e in C||u(C,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},A=a(g),w=0;A.length>w;)b(A[w++]);m.constructor=C,C.prototype=m,d(i,"RegExp",C)}_("RegExp")},function(e,t,n){var r=n(12),i=n(9),o=function(e){return function(t,n){var o,s,u=String(i(t)),a=r(n),l=u.length;return a<0||a>=l?e?"":void 0:(o=u.charCodeAt(a))<55296||o>56319||a+1===l||(s=u.charCodeAt(a+1))<56320||s>57343?e?u.charAt(a):o:e?u.slice(a,a+2):s-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},,function(e,t,n){var r=n(2),i=n(11),o=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"formatNum",(function(){return r})),n(44),n(41),n(100);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";e=parseInt(e,10),isNaN(e)&&(e=0);var r=0===e?"":e.toString(),i=t-r.length;return i<=0?r:(n=n.toString()).repeat(i)+r}},function(e,t,n){var r=n(2),i=n(81);e.exports=function(e,t,n){var o,s;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(s=o.prototype)&&s!==n.prototype&&i(e,s),e}},function(e,t,n){var r=n(5),i=n(82);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(22),i=n(8),o=n(6),s=n(4),u=o("species");e.exports=function(e){var t=r(e),n=i.f;s&&t&&!t[u]&&n(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(62),i=n(5),o=n(42),s=n(17),u=n(12),a=n(9),l=n(64),c=n(63),f=Math.max,d=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=r.REPLACE_KEEPS_$0,m=v?"$":"$0";return[function(n,r){var i=a(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!v&&g||"string"==typeof r&&-1===r.indexOf(m)){var o=n(t,e,this,r);if(o.done)return o.value}var a=i(e),h=String(this),p="function"==typeof r;p||(r=String(r));var _=a.global;if(_){var S=a.unicode;a.lastIndex=0}for(var T=[];;){var E=c(a,h);if(null===E)break;if(T.push(E),!_)break;""===String(E[0])&&(a.lastIndex=l(h,s(a.lastIndex),S))}for(var C,b="",A=0,w=0;w<T.length;w++){E=T[w];for(var R=String(E[0]),I=f(d(u(E.index),h.length),0),x=[],k=1;k<E.length;k++)x.push(void 0===(C=E[k])?C:String(C));var O=E.groups;if(p){var N=[R].concat(x,I,h);void 0!==O&&N.push(O);var P=String(r.apply(void 0,N))}else P=y(R,h,I,x,O,r);I>=A&&(b+=h.slice(A,I)+P,A=I+R.length)}return b+h.slice(A)}];function y(e,n,r,i,s,u){var a=r+e.length,l=i.length,c=_;return void 0!==s&&(s=o(s),c=p),t.call(u,c,(function(t,o){var u;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(a);case"<":u=s[o.slice(1,-1)];break;default:var c=+o;if(0===c)return t;if(c>l){var f=h(c/10);return 0===f?t:f<=l?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):t}u=i[c-1]}return void 0===u?"":u}))}}))},function(e,t,n){"use strict";n.r(t),n.d(t,"getUTCDate",(function(){return i})),n.d(t,"dateFormatUTC",(function(){return u})),n.d(t,"dateFormat",(function(){return s})),n.d(t,"dateFormatNow",(function(){return a})),n(44),n(75),n(50),n(41),n(84);var r=n(79),i=function(e){var t=60*(e=new Date(e)).getTimezoneOffset()*1e3;return e.getTime()+t},o=function(e){return"[object Date]"===Object.prototype.toString.call(e)},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm";e||(e=new Date),o(e)||(e=new Date(+e));var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,"".concat(e.getFullYear()).substr(4-RegExp.$1.length))),n)new RegExp("(".concat(i,")")).test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:Object(r.formatNum)(n[i],2)));return t},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm",n=60*(e=new Date(e)).getTimezoneOffset()*1e3;return e=e.getTime()-n,s(e,t)},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UTC",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"yyyy-MM-dd hh:mm",r=new Date(e);if(r instanceof Date){var i=new Date;return r.toDateString()===i.toDateString()?"UTC"!==t?s(r,"hh:mm"):u(r,"hh:mm"):r.toDateString()===new Date(i.setDate(i.getDate()-1)).toDateString()?" "+("UTC"!==t?s(r,"hh:mm"):u(r,"hh:mm")):r.getFullYear()===i.getFullYear()?"UTC"!==t?s(r,"MM-dd hh:mm"):u(r,"MM-dd hh:mm"):u(r,n)}return r}},,,,,,,,,,,,,,,function(e,t,n){n(18)({target:"String",proto:!0},{repeat:n(101)})},function(e,t,n){"use strict";var r=n(12),i=n(9);e.exports="".repeat||function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}}])},function(e,t,n){var r=n(51),i=n(29);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(1),i=n(18),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(5),i=n(2),o=n(52);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r=n(2);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r=n(29),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t){e.exports={}},function(e,t,n){var r=n(5),i=n(60),o=n(20),s=n(24),u=n(19),a=n(4),l=n(30),c=Object.getOwnPropertyDescriptor;t.f=r?c:function(e,t){if(e=s(e),t=u(t,!0),l)try{return c(e,t)}catch(e){}if(a(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){var r=n(64),i=n(1),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){var r=n(24),i=n(25),o=n(38),s=function(e){return function(t,n,s){var u,a=r(t),l=i(a.length),c=o(s,l);if(e&&n!=n){for(;l>c;)if((u=a[c++])!=u)return!0}else for(;l>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t,n){var r=n(13),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(5),i=n(2),o=n(4),s=Object.defineProperty,u={},a=function(e){throw e};e.exports=function(e,t){if(o(u,e))return u[e];t||(t={});var n=[][e],l=!!o(t,"ACCESSORS")&&t.ACCESSORS,c=o(t,0)?t[0]:a,f=o(t,1)?t[1]:void 0;return u[e]=!!n&&!i((function(){if(l&&!r)return!0;var e={length:-1};l?s(e,1,{enumerable:!0,get:a}):e[1]=1,n.call(e,c,f)}))}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(0);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(0),i=n(83),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,a={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(u=n(44)),u),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){a.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){a.headers[e]=r.merge(o)})),e.exports=a}).call(this,n(82))},function(e,t,n){"use strict";var r=n(0),i=n(84),o=n(41),s=n(86),u=n(89),a=n(90),l=n(45);e.exports=function(e){return new Promise((function(t,c){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",_=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+_)}var v=s(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),o(v,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?u(h.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};i(t,c,r),h=null}},h.onabort=function(){h&&(c(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){c(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),c(l(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var g=n(91),m=(e.withCredentials||a(v))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;m&&(d[e.xsrfHeaderName]=m)}if("setRequestHeader"in h&&r.forEach(d,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),c(e),h=null)})),void 0===f&&(f=null),h.send(f)}))}},function(e,t,n){"use strict";var r=n(85);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var u=i.concat(o).concat(s),a=Object.keys(t).filter((function(e){return-1===u.indexOf(e)}));return r.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";var r=n(23),i=n(14);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=!1},function(e,t,n){var r=n(1),i=n(6),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,n){var r=n(32);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r,i,o,s=n(55),u=n(1),a=n(6),l=n(7),c=n(4),f=n(56),d=n(34),h=u.WeakMap;if(s){var p=new h,_=p.get,v=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},i=function(e){return _.call(p,e)||{}},o=function(e){return v.call(p,e)}}else{var m=f("state");d[m]=!0,r=function(e,t){return l(e,m,t),t},i=function(e){return c(e,m)?e[m]:{}},o=function(e){return c(e,m)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!a(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(1),i=n(33),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t,n){var r=n(28),i=n(31),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){"use strict";var r=n(17),i=n(58);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(17),i=n(9),o=n(3)("toStringTag"),s="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:s?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){"use strict";var r=n(23),i=n(38),o=n(13),s=n(25),u=n(70),a=n(71),l=n(73),c=n(74),f=n(39),d=c("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,_=Math.min;r({target:"Array",proto:!0,forced:!d||!h},{splice:function(e,t){var n,r,c,f,d,h,v=u(this),g=s(v.length),m=i(e,g),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=g-m):(n=y-2,r=_(p(o(t),0),g-m)),g+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(c=a(v,r),f=0;f<r;f++)(d=m+f)in v&&l(c,f,v[d]);if(c.length=r,n<r){for(f=m;f<g-r;f++)h=f+n,(d=f+r)in v?v[h]=v[d]:delete v[h];for(f=g;f>g-r+n;f--)delete v[f-1]}else if(n>r)for(f=g-r;f>m;f--)h=f+n-1,(d=f+r-1)in v?v[h]=v[d]:delete v[h];for(f=0;f<n;f++)v[f+m]=arguments[f+2];return v.length=g-r+n,c}})},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(2),i=n(9),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(4),i=n(63),o=n(35),s=n(11);e.exports=function(e,t){for(var n=i(t),u=s.f,a=o.f,l=0;l<n.length;l++){var c=n[l];r(e,c)||u(e,c,a(t,c))}}},function(e,t,n){var r=n(36),i=n(65),o=n(68),s=n(8);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(1);e.exports=r},function(e,t,n){var r=n(66),i=n(67).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(4),i=n(24),o=n(37).indexOf,s=n(34);e.exports=function(e,t){var n,u=i(e),a=0,l=[];for(n in u)!r(s,n)&&r(u,n)&&l.push(n);for(;t.length>a;)r(u,n=t[a++])&&(~o(l,n)||l.push(n));return l}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(2),i=/#|\.prototype\./,o=function(e,t){var n=u[s(e)];return n==l||n!=a&&("function"==typeof t?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=o.data={},a=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},function(e,t,n){var r=n(12);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(6),i=n(72),o=n(3)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(9);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(19),i=n(11),o=n(20);e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},function(e,t,n){var r=n(2),i=n(3),o=n(75),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r,i,o=n(1),s=n(76),u=o.process,a=u&&u.versions,l=a&&a.v8;l?i=(r=l.split("."))[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){var r=n(36);e.exports=r("navigator","userAgent")||""},function(e,t,n){"use strict";var r=n(0),i=n(40),o=n(78),s=n(46);function u(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var a=u(n(43));a.Axios=o,a.create=function(e){return u(s(a.defaults,e))},a.Cancel=n(47),a.CancelToken=n(92),a.isCancel=n(42),a.all=function(e){return Promise.all(e)},a.spread=n(93),e.exports=a,e.exports.default=a},function(e,t,n){"use strict";var r=n(0),i=n(41),o=n(79),s=n(80),u=n(46);function a(e){this.defaults=e,this.interceptors={request:new o,response:new o}}a.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=u(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},a.prototype.getUri=function(e){return e=u(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){a.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){a.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=a},function(e,t,n){"use strict";var r=n(0);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(81),o=n(42),s=n(43);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,l=[],c=!1,f=-1;function d(){c&&a&&(c=!1,a.length?l=a.concat(l):f=-1,l.length&&h())}function h(){if(!c){var e=u(d);c=!0;for(var t=l.length;t;){for(a=l,l=[];++f<t;)a&&a[f].run();f=-1,t=l.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||u(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(45);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(87),i=n(88);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(o)&&u.push("domain="+o),!0===s&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(47);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){var r=n(5),i=n(11).f,o=Function.prototype,s=o.toString,u=/^\s*function ([^ (]*)/;!r||"name"in o||i(o,"name",{configurable:!0,get:function(){try{return s.call(this).match(u)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(23),i=n(37).indexOf,o=n(96),s=n(39),u=[].indexOf,a=!!u&&1/[1].indexOf(1,-0)<0,l=o("indexOf"),c=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:a||!l||!c},{indexOf:function(e){return a?u.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var r=n(8);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(2);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r=n(100),i=n(101),o=n(8),s=n(12),u=n(102),a=n(104),l=n(25),c=n(106),f=n(14),d=n(2),h=[].push,p=Math.min,_=!d((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(s(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,o);for(var u,a,l,c=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,_=new RegExp(e.source,d+"g");(u=f.call(_,r))&&!((a=_.lastIndex)>p&&(c.push(r.slice(p,u.index)),u.length>1&&u.index<r.length&&h.apply(c,u.slice(1)),l=u[0].length,p=a,c.length>=o));)_.lastIndex===u.index&&_.lastIndex++;return p===r.length?!l&&_.test("")||c.push(""):c.push(r.slice(p)),c.length>o?c.slice(0,o):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=s(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var s=n(r,e,this,i,r!==t);if(s.done)return s.value;var f=o(e),d=String(this),h=u(f,RegExp),v=f.unicode,g=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(_?"y":"g"),m=new h(_?f:"^(?:"+f.source+")",g),y=void 0===i?4294967295:i>>>0;if(0===y)return[];if(0===d.length)return null===c(m,d)?[d]:[];for(var S=0,T=0,E=[];T<d.length;){m.lastIndex=_?T:0;var C,b=c(m,_?d:d.slice(T));if(null===b||(C=p(l(m.lastIndex+(_?0:T)),d.length))===S)T=a(d,T,v);else{if(E.push(d.slice(S,T)),E.length===y)return E;for(var A=1;A<=b.length-1;A++)if(E.push(b[A]),E.length===y)return E;T=S=C}}return E.push(d.slice(S)),E}]}),!_)},function(e,t,n){"use strict";n(48);var r=n(21),i=n(2),o=n(3),s=n(14),u=n(7),a=o("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c="$0"==="a".replace(/./,"$0"),f=o("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var p=o(e),_=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=_&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[a]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!_||!v||"replace"===e&&(!l||!c||d)||"split"===e&&!h){var g=/./[p],m=n(p,""[e],(function(e,t,n,r,i){return t.exec===s?_&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=m[0],S=m[1];r(String.prototype,e,y),r(RegExp.prototype,p,2==t?function(e,t){return S.call(e,this,t)}:function(e){return S.call(e,this)})}f&&u(RegExp.prototype[p],"sham",!0)}},function(e,t,n){var r=n(6),i=n(9),o=n(3)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(8),i=n(103),o=n(3)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[o])?t:i(n)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){"use strict";var r=n(105).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(13),i=n(12),o=function(e){return function(t,n){var o,s,u=String(i(t)),a=r(n),l=u.length;return a<0||a>=l?e?"":void 0:(o=u.charCodeAt(a))<55296||o>56319||a+1===l||(s=u.charCodeAt(a+1))<56320||s>57343?e?u.charAt(a):o:e?u.slice(a,a+2):s-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){var r=n(9),i=n(14);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){var r=n(108),i=n(109),o=n(110),s=n(49),u=window.XMLHttpRequest,a=new(function(){"use strict";function e(){i(this,e),s(this,"listener",{})}return o(e,[{key:"setListener",value:function(e){if(!e)return!1;this.listener=r({},e)}},{key:"beforeSend",value:function(e){this.listener.beforeSend&&this.listener.beforeSend(e)}},{key:"error",value:function(e){this.listener.error&&this.listener.error(e)}}]),e}());u.prototype.requestData={headers:{},data:null};var l=u.prototype.setRequestHeader,c=u.prototype.open,f=u.prototype.send;u.prototype.setRequestHeader=function(e,t){this.requestData.headers[e]=t,l.apply(this,arguments)},u.prototype.open=function(e,t,n){var r=this.requestData;r.method=e&&e.toLowerCase()||"",r.url=t,r.async=n,r.data=null,a.beforeSend(this),c.apply(this,arguments)},u.prototype.send=function(e){this.requestData.data=e,function e(t){var n=t.onreadystatechange;null===n&&null===t.onload?setTimeout((function(){e(t)})):(t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&200!==t.status&&a.error(t),n&&n()},f.call(t,t.requestData.data))}(this)},e.exports=a},function(e,t,n){var r=n(49);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s){try{var u=e[o](s),a=u.value}catch(e){return void n(e)}u.done?t(a):Promise.resolve(a).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function u(e){r(s,i,o,u,a,"next",e)}function a(e){r(s,i,o,u,a,"throw",e)}u(void 0)}))}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t),n(16),n(22),n(59);var f=n(26),d=n.n(f),h=function(){function e(){o(this,e),a(this,"timeout",5e3),a(this,"cancelToken",null)}var t,n,r;return u(e,[{key:"_handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(e)}},{key:"cancel",value:function(){"function"==typeof this.cancelToken&&this.cancelToken("cancel request by bussiness code")}},{key:"fetch",value:(r=i(regeneratorRuntime.mark((function e(t,n){var r,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,i=c({method:t,url:this.url,data:r,timeout:this.timeout,cancelToken:new d.a.CancelToken((function(e){o.cancelToken=e}))},n),e.abrupt("return",d()(i).then((function(e){return Promise.resolve(e)})).catch((function(e){var t=e.status,n=e.statusText;return o._handleError({errNo:t,errMsg:n,params:i}),Promise.resolve()})));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"get",value:(n=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("get",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"post",value:(t=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("post",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),p=n(15),_=n.n(p),v=n(10),g=n(27),m={xagent:"https://xagent.vocustcloud.com/apigateway/CallCenterDataService/api/betchSaveXagentOperateRecord",xagentBeta:"https://xagent-new.test.vocustcloud.com/apigateway/CallCenterDataService/api/betchSaveXagentOperateRecord"},y=new(function(){function e(){o(this,e),a(this,"_storeName","cccLog"),a(this,"_url",""),a(this,"_appId",""),a(this,"_logList",[]),a(this,"_auth",null),a(this,"_user",{}),a(this,"_logInterval",null),a(this,"_type","log"),a(this,"_logServiceList",m),this.request=new h,this._uuid=_.a.uuidv4()}var t;return u(e,[{key:"init",value:(t=i(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,u,a,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t||{}).appId,i=n.url,o=n.auth,s=n.interval,u=n.system,a=void 0===u?"":u,l=n.type,c=void 0===l?"LOG":l,o&&(this._auth=o),this._url=i||this._logServiceList[a],this._url){e.next=5;break}return e.abrupt("return",Promise.resolve({success:!1,message:""}));case 5:return this._type=c.toUpperCase(),this._appId=r,e.prev=7,this.getStore(),"LOG"===this._type&&this.initUploadInterval(s),e.abrupt("return",Promise.resolve({success:!0}));case 13:return e.prev=13,e.t0=e.catch(7),e.abrupt("return",Promise.resolve({success:!1,message:e.t0}));case 16:case"end":return e.stop()}}),e,this,[[7,13]])}))),function(e){return t.apply(this,arguments)})},{key:"initUploadInterval",value:function(e){var t=this;this._logInterval&&clearInterval(this._logInterval),this._logInterval=setInterval((function(){t.sendByList()}),e||5e3)}},{key:"doPost",value:function(e){var t=e.data,n={};return this._auth&&(n=this._auth),this._user&&(t=Object.assign({},t,this._user)),this.request.post({url:this._url+"?_="+(new Date).getTime(),data:t,headers:n})}},{key:"setAuth",value:function(e){this._auth=e}},{key:"setUser",value:function(e){this._user=e}},{key:"sendByList",value:function(){if(this._logList&&!(this._logList.length<=0)){var e=this.splice(100);this.doPost({data:{records:e}})}}},{key:"recordPoint",value:function(e){var t=c({operatingDateTime:g.dateFormat},e);this.push(t)}},{key:"shift",value:function(){this._logList.shift(),this.refreshStore()}},{key:"push",value:function(e){var t=c({},e,{time:Object(g.dateFormat)()},this._user);"CONSOLE"!==this._type?(t.content&&(t.content=JSON.stringify(t.content)),this._logList.push(t),this.refreshStore()):console.log(e)}},{key:"splice",value:function(e){var t=this._logList.splice(0,e);return this.refreshStore(),t}},{key:"clear",value:function(){this._logList=[],this.refreshStore()}},{key:"refreshStore",value:function(){this._logList&&this._logList.length>0?Object(v.setStorage)(this._storeName,JSON.stringify(this._logList)):Object(v.delStorage)(this._storeName)}},{key:"getStore",value:function(){var e=Object(v.getStorage)(this._storeName);try{this._logList=e?JSON.parse(e):[]}catch(e){this._logList=[],Object(v.delStorage)(this._storeName)}}}]),e}()),S=(n(94),new(function(){function e(){o(this,e)}return u(e,[{key:"listenEvent",value:function(){var e=this;document.addEventListener("click",(function(t){e.pushData(t,"ELEMENT_CLICK"),window.event?window.event.cancelBubble=!0:t.stopPropagation()}))}},{key:"pushData",value:function(e,t){var n=e.type,r=e.target,i=r.getAttribute("log"),o=r.id,s=r.className,u={operatingArea:"ELEMENT",operation:t,content:{ele:{name:r.name,className:s,id:o,log:i},type:n,url:window.location.href}};y.push(u)}}]),e}())),T=new(function(){function e(){o(this,e)}return u(e,[{key:"listenEvent",value:function(){var e=this;window.addEventListener("error",(function(t){e.pushData(t,"PAGE_ERROR")})),window.addEventListener("close",(function(t){e.pushData(t,"PAGE_CLOSE")}))}},{key:"pushData",value:function(e,t){var n={operatingArea:"PAGE",operation:t,content:{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,url:window.location.href}};y.push(n)}}]),e}()),E=(n(95),n(48),n(99),function e(){o(this,e),a(this,"operatingArea",""),a(this,"operation",""),a(this,"content",""),a(this,"createTime",(new Date).getTime()),a(this,"appKey",""),a(this,"page",window.location.href.split("?")[0]),a(this,"customerId",_.a.uuidv4()),a(this,"browerName",""),a(this,"browerVersion","")}),C=new(function(){function e(){o(this,e)}return u(e,[{key:"listenEvent",value:function(){var e=this;n(107).setListener({error:function(t){e.pushData(t)}})}},{key:"pushData",value:function(e){var t=e.withCredentials,n=e.responseURL,r=e.response,i=e.status,o=e.requestData;if(!(o&&o.url&&o.url.indexOf(y._url)>-1)){var s=new E;s.operatingArea="AJAX",s.operation="AJAX_ERROR",s.content={withCredentials:t,responseURL:n,response:r,status:i,requestData:o},y.push(s)}}}]),e}()),b=function(){function e(){o(this,e)}var t;return u(e,[{key:"init",value:(t=i(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,u,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t||{}).open,i=void 0===r||r,o=n.closeModule,s=void 0===o?{}:o,i){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:return e.next=5,y.init(t);case 5:if(u=e.sent,a=u.success,l=u.message,a){e.next=10;break}return e.abrupt("return",Promise.reject(l));case 10:i&&this.initEventListener(s);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"initEventListener",value:function(e){e.page||T.listenEvent(),e.element||S.listenEvent(),e.ajax||C.listenEvent()}},{key:"setAuth",value:function(e){y.setAuth(e)}},{key:"setUser",value:function(e){y.setUser(e)}},{key:"recordPoint",value:function(e){y.recordPoint(e)}}]),e}();t.default=new b}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(34)),i=l(n(1)),o=l(n(2)),s=l(n(124)),u=l(n(62)),a=l(n(178));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,i.default)(this,e),this._instance=this;this._eventManager=u.default,this._webRTCClient=s.default,this._telephoneClient=a.default}return(0,o.default)(e,[{key:"operationPhone",value:function(e,t,n){var r=e.command;delete e.command,"initPhone"===r&&("webrtc"===e.phoneChannel?this.phoneClient=this._webRTCClient:"telephone"===e.phoneChannel&&(this.phoneClient=this._telephoneClient)),this.phoneClient&&this.phoneClient[r](e,t,n)}},{key:"operationPhonePromise",value:function(e){var t=e.command;return delete e.command,"initPhone"===t&&("webrtc"===e.phoneChannel?this.phoneClient=self._webRTCClient:"telephone"===e.phoneChannel&&(this.phoneClient=self._telephoneClient)),this.phoneClient?this.phoneClient[t](e):r.default.reject()}},{key:"setListener",value:function(e){var t=e.command,n=e.handler;switch(t){case"phoneStatusChange":n||(e.handler=e.onPhoneStatusChange);break;case"phoneEvent":n||(e.handler=e.onPhoneEvent);break;case"phoneWebsocketStatus":n||(e.handler=e.onPhoneWebsocketStatus);break;case"webrtcStatus":n||(e.handler=e.onWebrtcStatus);break;case"heartbeat":n||(e.handler=e.onHeartbeat)}this.setEventListener(e)}},{key:"setEventListener",value:function(e){var t=e.command,n=e.handler;e.reset&&this._eventManager.clearEvent(t),this._eventManager.on(t,n)}}]),e}();t.default=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(34)),i=h(n(16)),o=h(n(1)),s=h(n(2)),u=h(n(125)),a=h(n(60)),l=h(n(61)),c=h(n(62)),f=h(n(82)),d=h(n(92));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){(0,o.default)(this,e),this.eventManager=c.default,this._operator={},this._ticket=null,this._phone=[],this._utu="",this._sessions=[],this._memoryStore={connectPhoneCallback:[],_phoneQueueInfo:{}},this._phoneStatus=a.default.PhoneStatus.WORK,this._audio=null,this.initDom()}return(0,s.default)(e,[{key:"getSipUriBySipId",value:function(e){return e?"sip:"+e+"@"+this._domain:e}},{key:"initPhone",value:function(e,t){if(f.default.recordPoint("webrtc","initPhone",""),this._operator=l.default.getEnv(),!this._operator.socketUrl)return t&&"function"==typeof t&&t({ack:"fail"}),!1;this.initSip(),this.setPhoneEventListener(),this.setConnectionStatusListener(),this.initProps(),f.default.recordPoint("webrtc","initPhone",""),t&&"function"==typeof t&&t({ack:"success"})}},{key:"initSip",value:function(){var e=this._operator,t=e.socketUrl,n=e.domain,r=e.sipId,o=e.password,s=e.initStatus;s&&(this._phoneStatus=s),u.default.C.SESSION_EXPIRES=180,u.default.C.MIN_SESSION_EXPIRES=10,this.socket=new u.default.WebSocketInterface(t),this._domain=n,this._sipId=r;var a={sockets:[this.socket],uri:this.getSipUriBySipId(r),password:o};f.default.recordPoint("webrtc","initPhone",""+(0,i.default)(a)),this.sipPhone=new u.default.UA(a),this._registCallId=this.sipPhone._registrator._call_id}},{key:"initProps",value:function(){this._utu=""}},{key:"initDom",value:function(){var e=document.createElement("audio");this._audio=e}},{key:"phoneLogin",value:function(e,t){f.default.recordPoint("webrtc","phoneLogin","operatorParam:"+String(e)),this.sipPhone.start(),t&&t({ack:"success"})}},{key:"phoneEvent",value:function(e){var t={};t.connection=e.connection,t.callStream=e.callStream,t.callStatus=e.callStatus,t.eventType=e.eventType,t.callType=e.callType,t.remote=e.remote,t.begin=e.begin,t.end=e.end,t.time=e.time,t.callId=e.callId,t.originalCallee=e.originalCallee,t.skillGroupCode=e.skillGroupCode,t.conferenceId=e.conferenceId,t.userList=e.userList,t.mute=!!e.hasOwnProperty("isMute")&&e.isMute,t.held=!!e.hasOwnProperty("isHold")&&e.isHold,t.uui=e.uui,t.from=e.hasOwnProperty("from")?e.from:"",t.customer=e.customer,f.default.recordPoint("webrtc","phoneEvent","eventType"+String(t.eventType)+",callId:"+String(t.callId)),this.eventManager.fire("phoneEvent",t)}},{key:"setConnectionStatusListener",value:function(){var e=this,t=this;f.default.recordPoint("webrtc","setConnectionStatusListener",""),this.sipPhone.on("connected",(function(){e.firePhoneEvent("phoneConnectionChange",a.default.PhoneConnectionStatus.CONNECTED),e.socket.ondata=function(t){var n=e.handleSipMessage(t);e.eventManager.fire("originalMessage",n),"AGENT_STATUS_NOTIFY"===n.Event&&e.firePhoneStatus({parameter:{status:a.default.PhoneStatus.LOGOUT,reason:"logout"}}),0===t.indexOf("OPTIONS")&&(f.default.recordPoint("webrtc","setConnectionStatusListener:ondata","OPTIONS"),e.eventManager.fire("heartbeat","webrtc"),e.onOptionsTimer&&clearInterval(e.onOptionsTimer),e.receiveOptionsTime=(new Date).getTime(),e.onOptionsTimer=setInterval((function(){f.default.recordPoint("webrtc","","");var t=l.default.createGuid();e.sipPhone._registrator._call_id=t,e._registCallId=t,e.sipPhone.register()}),65e3)),e.sipPhone.transport._onData(t)}})),this.sipPhone.on("newMessage",(function(e){if(e&&e.request&&e.request.body)try{var n=JSON.parse(e.request.body);if(n)if(t._command&&n.transaction===t._command.transaction)t.firePhoneStatus(t._command),t._command=null;else if("cm"===n.entity)switch(f.default.recordPoint("webrtc","newMessage:cm",n.action),n.action){case"conference":"200"==n.status_code?(t.conference_complete&&t.conference_complete(n),t.conference_create(n)):t.conference_error&&t.conference_error(),t.conference_complete=null,t.conference_error=null;break;case"conference_create":t.conference_create(n);break;case"conference_add":t.conference_addUser(n);break;case"conference_add_cancel":t.conference_addUser_cancel(n);break;case"conference_exit":t.conference_exitUser(n)}}catch(e){console.log(e)}})),this.sipPhone.on("connecting",(function(){console.log("status:connecting"),t.firePhoneEvent("phoneConnectionChange",a.default.PhoneConnectionStatus.CONNECTING)})),this.sipPhone.on("disconnected",(function(e){console.log("status:disconnected",e),t.firePhoneEvent("phoneConnectionChange",a.default.PhoneConnectionStatus.DISCONNECTED)})),this.sipPhone.on("registered",(function(){t.eventManager.fire("webrtcStatus","registered"),t._registCallId=t.sipPhone._registrator._call_id,t.onOptionsTimer&&clearInterval(t.onOptionsTimer),e.setPhoneStatus({phoneStatus:e._phoneStatus}),t.firePhoneEvent("phoneConnectionChange",a.default.PhoneConnectionStatus.REGISTERED),t.onOptionsTimer=setInterval((function(){f.default.recordPoint("webrtc","","");var e=l.default.createGuid();t.sipPhone._registrator._call_id=e,t._registCallId=e,t.sipPhone.register()}),65e3)})),this.sipPhone.on("unregistered",(function(){t.firePhoneEvent("phoneConnectionChange",a.default.PhoneConnectionStatus.UNREGISTERED)})),this.sipPhone.on("registrationFailed",(function(e){console.log("status:registrationFailed"),console.log("phone connect error:",e)}))}},{key:"handleSipMessage",value:function(e){if(e){var t=e.split("\n"),n={};return t.map((function(e,t){0===t&&(n["Sip-Header"]=e);var r=e.match(/:/)?e.match(/:/).index:0,i=e.substr(0,r),o=e.substr(r+1).trim();i&&(n[i]=o)})),n}}},{key:"firePhoneStatus",value:function(e){e&&e.parameter&&e.parameter.status&&(e.parameter.status===a.default.PhoneStatus.PAUSE?this.eventManager.fire("phoneStatusChange",{name:e.parameter.reason}):this.eventManager.fire("phoneStatusChange",{name:e.parameter.status}))}},{key:"conference_create",value:function(e){var t=this;if("200"===e.status_code){var n=[];try{n=JSON.parse(e.users)}catch(e){n=[]}var r=n.find((function(e){return e.user!==t._sipId})),i=t._sessions&&r&&t._sessions.find((function(e){return e.remote===r.user}));i&&(i.callType=a.default.CallType.CONFERENCE,i.conferenceId=e.conferenceid,i.userList=[{sipId:r.user}],i.eventType=a.default.CallStatus.CONFERENCE,t.phoneEvent(i)),t.createConference_complete&&t.createConference_complete(e)}else t.createConference_error&&t.createConference_error();t.createConference_complete=null,t.createConference_error=null}},{key:"conference_addUser",value:function(e){var t=this;if("200"==e.status_code){t.conferenceAdd_complete&&t.conferenceAdd_complete(e);var n=[];try{n=JSON.parse(e.users)}catch(e){n=[]}var r=n.filter((function(e){return e.user!==t._sipId})),i=t._sessions&&t._sessions.find((function(t){return t.conferenceId===e.conferenceid}));i&&(i.userList=r.map((function(e){return{sipId:e.user}})),i.conferenceId=e.conferenceid,i.callType=a.default.CallType.CONFERENCE,i.eventType=a.default.CallStatus.CONFERENCE_ADD_USER,t.phoneEvent(i))}else t.conferenceAdd_error&&t.conferenceAdd_error();t.conferenceAdd_complete=null,t.conferenceAdd_error=null}},{key:"conference_addUser_cancel",value:function(e){"200"==e.status_code?this.conferenceAdd_cancel_complete&&this.conferenceAdd_cancel_complete(e):this.conferenceAdd_cancel_error&&this.conferenceAdd_cancel_error(e)}},{key:"conference_exitUser",value:function(e){var t=this;if("200"==e.status_code){var n=t._sessions&&t._sessions.find((function(t){return t.conferenceId===e.conferenceid}));n&&(n.userList=n.userList.filter((function(n){return n.sipId!==t._sipId&&n.sipId!==e.exituser})),n.conferenceId=e.conferenceid,n.callType=a.default.CallType.CONFERENCE,n.eventType=a.default.CallStatus.CONFERENCE_EXIT_USER,t.phoneEvent(n))}}},{key:"setSessionEvent",value:function(e){e.on("peerconnection:createofferfailed",(function(e){console.log("peerconnection:createofferfailed:",e)})),e.on("peerconnection:createanswerfailed",(function(e){console.log("peerconnection:createanswerfailed:",e)})),e.on("peerconnection:setlocaldescriptionfailed",(function(e){console.log("peerconnection:setlocaldescriptionfailed:",e)})),e.on("peerconnection:setremotedescriptionfailed",(function(e){console.log("peerconnection:setremotedescriptionfailed:",e)})),e.on("sdp",(function(e){if("local"===e.originator&&"offer"===e.type){var t=e.sdp.split(/\n/),n=[],r=/a=rtpmap:(111|110|((0|8) PCM(A|U)\/8000))/g;t.forEach((function(e){n.indexOf(e)<0&&(e.indexOf("a=rtpmap")<0||!!e.match(r))&&(e.indexOf("m=audio")>-1&&(e=e.replace(/112|113|126|13/g,"").replace(/\s+/g," ")),n.push(e))})),e.sdp=n.join("\n")}}))}},{key:"setPhoneEventListener",value:function(){var e=this,t=this;this.sipPhone.on("newRTCSession",(function(n){n.session.customer={},t.setSessionEvent(n.session);var r=n.session;if("outgoing"===r.direction)r.remote=n.request.to.uri.user,r.time=(new Date).getTime(),f.default.recordPoint("webrtc","newRTCSession",""+r.remote);else{r.remote=n.request.from.uri.user,r.time=(new Date).getTime();var i=n.request.getHeader("X-Consultfirstlineremote");i&&(r.consultFirstlineRemote=i),f.default.recordPoint("webrtc","newRTCSession",""+r.remote)}r.isHold=!1,r.isMute=!1,r.callId=n.request.call_id,r.callType=a.default.CallType.PHONE;var o=n.request.getHeader("X-Orgcallee");o&&(r.originalCallee=o);var s=n.request.getHeader("X-Inqueue");if(s){var u=s;r.skillGroupCode=u&&u.split("@")[0]}var l=n.request.getHeader("User-To-User")||n.request.getHeader("X-User-To-User"),c="";l&&(c=l,e._utu=c,c=e.getAcidFromUTU(c)),c||(c=e.getAcidFromUTU(e._utu)),r.customer.acid=c,n.session.customer.acid=c;var d=n.request.getHeader("From");r.from=d,n.session.from=d;var h=d.match(/"[0-9a-zA-Z+]{1,}"/);h&&h.length>0&&(r.remote=h[0].replace(/"/g,""),n.session.remote=r.remote);var p=n.request.getHeader("X-Uui");if(p)r.uui=p;else{var _=n.request.extraHeaders;if(console.log("e.request.extraHeaders:",n.request.extraHeaders),_&&_.length>0)for(var v=0;v<_.length;v++)if(_[v].indexOf("X-UUI")>-1){r.uui=_[v].split(":")[1];break}}t._sessions.push(r),t.CallEventHandlers(n)}))}},{key:"CallEventHandlers",value:function(e){var t=this,n=this,r=e.session;r.on("peerconnection",(function(){r.connection&&(r.connection.onaddstream=function(){r.connection.getRemoteStreams().length>0&&(r.callStream=r.connection.getRemoteStreams()[0],r.eventType=a.default.CallStatus.ADDSTREAM,t._audio.srcObject=r.callStream,t._audio.play(),t.phoneEvent(r))})})),r.on("connecting",(function(){r.connection&&(r.connection.onaddstream=function(){r.connection.getRemoteStreams().length>0&&(r.callStream=r.connection.getRemoteStreams()[0],r.eventType=a.default.CallStatus.ADDSTREAM,t._audio.srcObject=r.callStream,t._audio.play(),t.phoneEvent(r))}),"outgoing"===r.direction&&(r.callStatus=r.eventType=a.default.CallStatus.SEIZED,n.phoneEvent(r))})),r.on("sending",(function(){"outgoing"===r.direction&&(r.callStatus=r.eventType=a.default.CallStatus.ORIGINATED,n.phoneEvent(r))})),r.on("progress",(function(){r.callStatus=r.eventType="incoming"===r.direction?a.default.CallStatus.ALERTING:a.default.CallStatus.RINGING,n.phoneEvent(r)})),r.on("accepted",(function(){r.callStatus=r.eventType=a.default.CallStatus.ESTABLISHED,r.begin=(new Date).getTime(),n.phoneEvent(r)})),r.on("confirmed",(function(){})),r.on("failed",(function(){if(n._sessions){var e=n._sessions.find((function(e){return e.callId===r.callId}));e&&e.callStatus&&(r.callStatus=r.eventType=a.default.CallStatus.CLEARED,r.end=(new Date).getTime(),n.phoneEvent(r)),n._sessions=n._sessions.filter((function(e){return e.callId!==r.callId}))}})),r.on("getusermediafailed",(function(){r.eventType=a.default.CallStatus.GETUSERMEDIAFAILED,n.phoneEvent(r)})),r.on("newDTMF",(function(){})),r.on("hold",(function(){r.eventType=a.default.CallStatus.HELD,r.isHold=!0,n.phoneEvent(r),n.holdCallback&&(n.holdCallback(),n.holdCallback=null)})),r.on("unhold",(function(){r.eventType=a.default.CallStatus.HELD_RETRIEVED,r.isHold=!1,n.phoneEvent(r)})),r.on("muted",(function(){r.eventType=a.default.CallStatus.MUTE,r.isMute=!0,n.phoneEvent(r)})),r.on("unmuted",(function(){r.eventType=a.default.CallStatus.MUTE_RETRIEVED,r.isMute=!1,n.phoneEvent(r)})),r.on("ended",(function(){r.callStatus=a.default.CallStatus.CLEARED,r.eventType=a.default.CallStatus.CLEARED,r.end=(new Date).getTime(),n.phoneEvent(r),n._sessions&&(n._sessions=n._sessions.filter((function(e){return e.callId!==r.callId})))})),r.on("update",(function(){})),r.on("reinvite",(function(){})),r.on("refer",(function(){})),r.on("replaces",(function(){}))}},{key:"makeCall",value:function(e,t,n){if(e&&e.remote){var r={eventHandlers:{progress:function(e){t&&t({callId:e&&e.response&&e.response.call_id}),n=null},failed:function(e){n&&n({errorCode:e&&e.cause,callId:e&&e.message&&e.message.call_id})},ended:function(){},confirmed:function(e){t&&t({callId:e&&e.response&&e.response.call_id}),n=null}},mediaConstraints:{audio:!0,video:!1}};if(r.extraHeaders=e.extraHeaders||[],this.checkCurrentSession()||(this._utu=this.getNewUUICallId()),this._utu||(this._utu=this.getNewUUICallId()),e.lineCode){var i=l.default.getEnv().domain,o="&Queue="+String(e.lineCode)+"@"+String(i),s="00C825"+l.default.stringToHex(o);r.extraHeaders.push("X-UUI:"+s)}r.extraHeaders.push("User-To-User:"+this._utu),this.sipPhone.call(this.getSipUriBySipId(e.remote),r)}}},{key:"sendMessage",value:function(e){f.default.recordPoint("webrtc","sendMessage","operatorParam:"+String(e)),this.sipPhone.sendMessage(this.getSipUriBySipId(e.remote),e.content)}},{key:"answer",value:function(e){if(e&&(e.callId||e.remote)){var t=e.callId,n=e.remote;this._sessions.find((function(e){return e.callId===t||e.remote===n})).answer()}}},{key:"hangUp",value:function(e){if(e&&(e.callId||e.remote)){var t=e.callId,n=e.remote,r=this._sessions.find((function(e){return e.callId===t||e.remote===n}));r&&r.terminate()}}},{key:"hangUpWhenHasCurrentLine",value:function(e){if(e&&(e.callId||e.remote)){var t=e.callId,n=e.remote,r=this._sessions.find((function(e){return e.callId===t||e.remote===n}));r&&r.terminate({status_code:"486"})}}},{key:"hold",value:function(e){if(e&&(e.callId||e.remote)){var t=e.callId,n=e.remote,r=this._sessions.find((function(e){return e.callId===t||e.remote===n}));r&&r.hold({useUpdate:!1})}}},{key:"unhold",value:function(e){if(e&&(e.callId||e.remote)){var t=e.callId,n=e.remote,r=this._sessions.find((function(e){return e.callId===t||e.remote===n}));r&&r.unhold({useUpdate:!1}),setTimeout((function(){r.resetLocalMedia&&r.resetLocalMedia()}),1e3)}}},{key:"mute",value:function(e){if(e&&(e.callId||e.remote)){var t=e.callId,n=e.remote,r=this._sessions.find((function(e){return e.callId===t||e.remote===n}));r&&r.mute()}}},{key:"unmute",value:function(e){if(e&&(e.callId||e.remote)){var t=e.callId,n=e.remote,r=this._sessions.find((function(e){return e.callId===t||e.remote===n}));r&&r.unmute()}}},{key:"consult",value:function(e,t,n){var r=this;if(e&&e.remote){var i=this._sessions&&this._sessions.filter((function(e){return!e.isHold}));if(i&&i.length>0&&i[0].remote){if(e.firstLineRemote)if(e.extraHeaders){var o=e.extraHeaders.findIndex((function(e){return-1!==e.indexOf("X-Consultfirstlineremote: ")}));-1!==o?e.extraHeaders[o]="X-Consultfirstlineremote: "+String(e.firstLineRemote):e.extraHeaders.push("X-Consultfirstlineremote: "+String(e.firstLineRemote))}else e.extraHeaders=["X-Consultfirstlineremote: "+String(e.firstLineRemote)];this.holdCallback=function(){r.makeCall(e,t,n)},this._sessions.forEach((function(e){e&&!e.isHold&&e.hold()}))}else r.makeCall(e,t,n)}else n&&n()}},{key:"createConference",value:function(e,t,n){if(e&&e.remote&&this._sessions&&this._sessions.length>0){var r=this._sessions.find((function(t){return t.remote===e.remote}));if(r){this.createConference_complete=t,this.createConference_error=n;var o={action:"conference_create",transaction:(new Date).getTime().toString(),type:"voice",parameter:{callid:r._request&&r._request.call_id,domain:this._domain}};this.sendMessage({remote:e.remote,content:(0,i.default)(o)+"\r\n"})}}}},{key:"conferenceAddUser",value:function(e,t,n){if(e&&e.remote&&this._sessions&&this._sessions.length>0){var r=this._sessions.find((function(t){return t.remote===e.originalRemote}));if(r&&r.remote){this.conferenceAdd_complete=t,this.conferenceAdd_error=n;var o={action:"conference_add",transaction:(new Date).getTime().toString(),type:"voice",parameter:{callid:r._request&&r._request.call_id,sipId:this._sipId,addUser:e.remote,domain:this._domain,conferenceId:e.conferenceId}};this.sendMessage({remote:e.remote,content:(0,i.default)(o)+"\r\n"})}}}},{key:"conferenceAddUserCancel",value:function(e,t,n){if(e&&e.remote&&this._sessions&&this._sessions.length>0){var r=this._sessions.find((function(t){return t.remote===e.originalRemote}));if(r&&r.remote){this.conferenceAdd_cancel_complete=t,this.conferenceAdd_cancel_error=n;var o={action:"conference_add_cancel",transaction:(new Date).getTime().toString(),type:"voice",parameter:{callid:r.callId,sipId:this._sipId,cancel_num:e.remote,domain:this._domain,conferenceId:r.conferenceId}};this.sendMessage({remote:e.remote,content:(0,i.default)(o)+"\r\n"})}}}},{key:"conference",value:function(e,t,n){if(this._sessions&&this._sessions.length>1){var r=this._sessions.find((function(e){return e.callStatus===a.default.CallStatus.ESTABLISHED&&!e.isHold})),o=this._sessions.find((function(e){return e.callStatus===a.default.CallStatus.ESTABLISHED&&e.isHold}));if(r&&o){this.conference_complete=t,this.conference_error=n;var s={action:"conference",domain:this._domain,sipId:this._sipId,transaction:(new Date).getTime().toString(),type:"voice",parameter:[o._request.call_id,r._request.call_id]};this.sendMessage({remote:e.remote,content:(0,i.default)(s)+"\r\n"})}}}},{key:"multiCall",value:function(){var e=[],t=this._sessions;t.forEach((function(t){t&&t.connection.getReceivers().forEach((function(t){e.push(t.track)}))}));var n=new AudioContext,i=new MediaStream;t.forEach((function(t){if(t){var r=n.createMediaStreamDestination();t.connection.getReceivers().forEach((function(t){e.forEach((function(e){(i.addTrack(t.track),t.track.id!==e.id)&&n.createMediaStreamSource(new MediaStream([e])).connect(r)}))})),t.connection.getSenders().forEach((function(e){n.createMediaStreamSource(new MediaStream([e.track])).connect(r)})),t.connection.getSenders()[0].replaceTrack(r.stream.getTracks()[0])}}));var o=this._audio;return o.srcObject=i,o.play()||r.default.resolve()}},{key:"recoverCall",value:function(e){var t={action:"reconnect",transaction:(new Date).getTime().toString(),type:"voice",parameter:{sipId:this._sipId,callid:e.callId,callee_number:this._sipId,caller_number:e.remote,domain:this._domain}};this.sendMessage({remote:e.remote,content:(0,i.default)(t)+"\r\n"})}},{key:"evaluation",value:function(e){var t="&Agent="+String(this._sipId)+"&CI=&Lan=cn";e.customer&&e.customer.acid&&(t="&acid="+e.customer.acid+t);e.uui=t,this.ivrForward(e)}},{key:"ivrForward",value:function(e){if(e&&(e.callId||e.remote)&&e.target&&this._sessions&&this._sessions.length>0){var t=this._sessions.find((function(t){return t.callId===e.callId||t.remote===e.remote})),n={action:"ivr_forward",transaction:(new Date).getTime().toString(),type:"voice",parameter:{sipId:this._sipId,callid:t.callId,callee_number:e.target,domain:this._domain,UUI:e.uui}};this.sendMessage({remote:t.remote,content:(0,i.default)(n)+"\r\n"})}}},{key:"sendDTMF",value:function(e){if(this._sessions&&0!==this._sessions.length&&(e||e.callId||e.remote)){var t=this._sessions.find((function(t){return t.callStatus===a.default.CallStatus.ESTABLISHED&&!t.isHold&&(t.callId===e.callId||t.remote===e.remote)}));t&&(e.keys||(e.keys=[]),e.key&&e.keys.push(e.key),e.keys.map((function(e){return t.sendDTMF(e)})))}}},{key:"refer",value:function(e){var t=e.callId,n=e.targetNum,r=e.targetId,i=this._sessions.find((function(e){return e.callId===t})),o=this._sessions.find((function(e){return e.callId===r}));if(o){var s={replaces:o};i&&i.refer(o.remote,s)}else i&&i.refer(n)}},{key:"disconnect",value:function(){this.sipPhone&&this.sipPhone.stop()}},{key:"setPhoneStatus",value:function(e){if(f.default.recordPoint("webrtc","",e),e&&e.phoneStatus){switch(this._phoneStatus=e.phoneStatus,e.phoneStatus){case a.default.PhoneStatus.PAUSE:case a.default.PhoneStatus.DEAL:case a.default.PhoneStatus.EAT:case a.default.PhoneStatus.TRAIN:e.reason=e.phoneStatus,e.phoneStatus=a.default.PhoneStatus.PAUSE}var t=this._operator.skillGroupCode.map((function(e){return e.code}));this._command={entity:"acd",type:"request",action:"status",agentid:this._operator.sipId+"@"+this._domain,status:"work",transaction:(new Date).getTime(),callid:this._registCallId,parameter:{status:e.phoneStatus,reason:e.reason||null,queues:t}},this.sendMessage({remote:"acdm",content:(0,i.default)(this._command)})}}},{key:"callPhone",value:function(e){f.default.recordPoint("webrtc","callPhone","callParam:"+String(e)),this.phoneSocket.callPhone(e)}},{key:"firePhoneEvent",value:function(e,t){t&&(f.default.recordPoint("webrtc","firePhoneEvent","phoneWebsocketStatus,{name:"+String(t)+"}"),this.eventManager.fire("phoneWebsocketStatus",{name:t}))}},{key:"checkCurrentSession",value:function(){return this._sessions.findIndex((function(e){return e.callStatus!==a.default.CallStatus.CLEARED}))>-1}},{key:"getNewUUICallId",value:function(e){e||(e=d.default.uuidv4());var t="&acid="+e,n="00C83d"+l.default.stringToHex(t)+";encoding=hex";return n=encodeURIComponent(n)}},{key:"getAcidFromUTU",value:function(e){var t=decodeURIComponent(e).split(";")[0];return t=t.substring(4),t=l.default.hextoString(t),t=l.default.getQueryString("acid",t)}}]),e}();t.default=new p},function(e,t,n){"use strict";var r=n(83),i=n(4),o=n(22),s=n(5),u=n(148),a=n(23),l=n(59),c=n(13),f=n(174);n(0)("JsSIP")("version %s",r.version),e.exports={C:i,Exceptions:o,Utils:s,UA:u,URI:a,NameAddrHeader:l,WebSocketInterface:f,Grammar:c,debug:n(0),get name(){return r.title},get version(){return r.version}}},function(e,t,n){n(127),e.exports=n(3).Object.getPrototypeOf},function(e,t,n){var r=n(28),i=n(72);n(84)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){e.exports={default:n(129),__esModule:!0}},function(e,t,n){n(41),n(54),e.exports=n(57).f("iterator")},function(e,t,n){e.exports={default:n(131),__esModule:!0}},function(e,t,n){n(132),n(68),n(137),n(138),e.exports=n(3).Symbol},function(e,t,n){"use strict";var r=n(6),i=n(21),o=n(15),s=n(8),u=n(70),a=n(133).KEY,l=n(26),c=n(50),f=n(42),d=n(39),h=n(7),p=n(57),_=n(58),v=n(134),g=n(135),m=n(9),y=n(18),S=n(28),T=n(27),E=n(45),C=n(30),b=n(53),A=n(136),w=n(86),R=n(52),I=n(14),x=n(31),k=w.f,O=I.f,N=A.f,P=r.Symbol,D=r.JSON,M=D&&D.stringify,U=h("_hidden"),L=h("toPrimitive"),q={}.propertyIsEnumerable,H=c("symbol-registry"),j=c("symbols"),F=c("op-symbols"),G=Object.prototype,B="function"==typeof P&&!!R.f,W=r.QObject,V=!W||!W.prototype||!W.prototype.findChild,K=o&&l((function(){return 7!=b(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=k(G,t);r&&delete G[t],O(e,t,n),r&&e!==G&&O(G,t,r)}:O,Y=function(e){var t=j[e]=b(P.prototype);return t._k=e,t},z=B&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},$=function(e,t,n){return e===G&&$(F,t,n),m(e),t=E(t,!0),m(n),i(j,t)?(n.enumerable?(i(e,U)&&e[U][t]&&(e[U][t]=!1),n=b(n,{enumerable:C(0,!1)})):(i(e,U)||O(e,U,C(1,{})),e[U][t]=!0),K(e,t,n)):O(e,t,n)},J=function(e,t){m(e);for(var n,r=v(t=T(t)),i=0,o=r.length;o>i;)$(e,n=r[i++],t[n]);return e},X=function(e){var t=q.call(this,e=E(e,!0));return!(this===G&&i(j,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,U)&&this[U][e])||t)},Q=function(e,t){if(e=T(e),t=E(t,!0),e!==G||!i(j,t)||i(F,t)){var n=k(e,t);return!n||!i(j,t)||i(e,U)&&e[U][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=N(T(e)),r=[],o=0;n.length>o;)i(j,t=n[o++])||t==U||t==a||r.push(t);return r},ee=function(e){for(var t,n=e===G,r=N(n?F:T(e)),o=[],s=0;r.length>s;)!i(j,t=r[s++])||n&&!i(G,t)||o.push(j[t]);return o};B||(u((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(F,n),i(this,U)&&i(this[U],e)&&(this[U][e]=!1),K(this,e,C(1,n))};return o&&V&&K(G,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",(function(){return this._k})),w.f=Q,I.f=$,n(85).f=A.f=Z,n(40).f=X,R.f=ee,o&&!n(33)&&u(G,"propertyIsEnumerable",X,!0),p.f=function(e){return Y(h(e))}),s(s.G+s.W+s.F*!B,{Symbol:P});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var re=x(h.store),ie=0;re.length>ie;)_(re[ie++]);s(s.S+s.F*!B,"Symbol",{for:function(e){return i(H,e+="")?H[e]:H[e]=P(e)},keyFor:function(e){if(!z(e))throw TypeError(e+" is not a symbol!");for(var t in H)if(H[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!B,"Object",{create:function(e,t){return void 0===t?b(e):J(b(e),t)},defineProperty:$,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=l((function(){R.f(1)}));s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return R.f(S(e))}}),D&&s(s.S+s.F*(!B||l((function(){var e=P();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(y(t)||void 0!==e)&&!z(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!z(t))return t}),r[1]=t,M.apply(D,r)}}),P.prototype[L]||n(20)(P.prototype,L,P.prototype.valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(39)("meta"),i=n(18),o=n(21),s=n(14).f,u=0,a=Object.isExtensible||function(){return!0},l=!n(26)((function(){return a(Object.preventExtensions({}))})),c=function(e){s(e,r,{value:{i:"O"+ ++u,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!a(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!a(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return l&&f.NEED&&a(e)&&!o(e,r)&&c(e),e}}},function(e,t,n){var r=n(31),i=n(52),o=n(40);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,u=n(e),a=o.f,l=0;u.length>l;)a.call(e,s=u[l++])&&t.push(s);return t}},function(e,t,n){var r=n(32);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(27),i=n(85).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(r(e))}},function(e,t,n){n(58)("asyncIterator")},function(e,t,n){n(58)("observable")},function(e,t,n){e.exports={default:n(140),__esModule:!0}},function(e,t,n){n(141),e.exports=n(3).Object.setPrototypeOf},function(e,t,n){var r=n(8);r(r.S,"Object",{setPrototypeOf:n(142).set})},function(e,t,n){var r=n(18),i=n(9),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(25)(Function.call,n(86).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(144),__esModule:!0}},function(e,t,n){n(145);var r=n(3).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(8);r(r.S,"Object",{create:n(53)})},function(e,t,n){n(54),n(41),e.exports=n(147)},function(e,t,n){var r=n(9),i=n(55);e.exports=n(3).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){"use strict";var r=h(n(17)),i=h(n(16)),o=h(n(81)),s=h(n(36)),u=h(n(64)),a=h(n(10)),l=h(n(1)),c=h(n(11)),f=h(n(2)),d=h(n(12));function h(e){return e&&e.__esModule?e:{default:e}}var p=n(24).EventEmitter,_=n(4),v=n(151),g=n(90),m=n(169),y=n(37),S=n(170),T=n(5),E=n(22),C=n(23),b=n(171),A=n(19),w=n(172),R=n(173),I=n(0)("JsSIP:UA"),x=n(0)("JsSIP:ERROR:UA");x.log=console.warn.bind(console);var k={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};function O(e){this.emit("connecting",e)}function N(e){this._status!==k.STATUS_USER_CLOSED&&(this._status=k.STATUS_READY,this._error=null,this.emit("connected",e),this._dynConfiguration.register&&this._registrator.register())}function P(e){var t=!0,n=!1,i=void 0;try{for(var o,s=(0,r.default)(["nict","ict","nist","ist"]);!(t=(o=s.next()).done);t=!0){var u=o.value;for(var a in this._transactions[u])Object.prototype.hasOwnProperty.call(this._transactions[u],a)&&this._transactions[u][a].onTransportError()}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}this.emit("disconnected",e),this._registrator.onTransportClosed(),this._status!==k.STATUS_USER_CLOSED&&(this._status=k.STATUS_NOT_READY,this._error=k.NETWORK_ERROR)}function D(e){var t=e.transport,n=e.message;if((n=b.parseMessage(n,this))&&!(this._status===k.STATUS_USER_CLOSED&&n instanceof A.IncomingRequest)&&w(n,this,t))if(n instanceof A.IncomingRequest)n.transport=t,this.receiveRequest(n);else if(n instanceof A.IncomingResponse){var r=void 0;switch(n.method){case _.INVITE:(r=this._transactions.ict[n.via_branch])&&r.receiveResponse(n);break;case _.ACK:break;default:(r=this._transactions.nict[n.via_branch])&&r.receiveResponse(n)}}}e.exports=function(e){function t(e){(0,l.default)(this,t),I("new() [configuration:%o]",e);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this));if(n._cache={credentials:{}},n._configuration=(0,u.default)({},R.settings),n._dynConfiguration={},n._dialogs={},n._applicants={},n._sessions={},n._transport=null,n._contact=null,n._status=k.STATUS_INIT,n._error=null,n._transactions={nist:{},nict:{},ist:{},ict:{}},n._data={},n._closeTimer=null,void 0===e)throw new TypeError("Not enough arguments");try{n._loadConfig(e)}catch(e){throw n._status=k.STATUS_NOT_READY,n._error=k.CONFIGURATION_ERROR,e}return n._registrator=new v(n),n}return(0,d.default)(t,e),(0,f.default)(t,null,[{key:"C",get:function(){return k}}]),(0,f.default)(t,[{key:"start",value:function(){I("start()"),this._status===k.STATUS_INIT?this._transport.connect():this._status===k.STATUS_USER_CLOSED?(I("restarting UA"),null!==this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=k.STATUS_INIT,this._transport.connect()):this._status===k.STATUS_READY?I("UA is in READY status, not restarted"):I("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){I("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(e){I("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(e)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(e,t){I("call()");var n=new g(this);return n.connect(e,t),n}},{key:"sendMessage",value:function(e,t,n){I("sendMessage()");var r=new m(this);return r.send(e,t,n),r}},{key:"terminateSessions",value:function(e){for(var t in I("terminateSessions()"),this._sessions)this._sessions[t].isEnded()||this._sessions[t].terminate(e)}},{key:"stop",value:function(){var e=this;if(I("stop()"),this._dynConfiguration={},this._status!==k.STATUS_USER_CLOSED){this._registrator.close();var t=(0,s.default)(this._sessions).length;for(var n in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,n)){I("closing session "+n);try{this._sessions[n].terminate()}catch(e){}}for(var r in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,r))try{this._applicants[r].close()}catch(e){}this._status=k.STATUS_USER_CLOSED,0===(0,s.default)(this._transactions.nict).length+(0,s.default)(this._transactions.nist).length+(0,s.default)(this._transactions.ict).length+(0,s.default)(this._transactions.ist).length&&0===t?this._transport.disconnect():this._closeTimer=setTimeout((function(){e._closeTimer=null,e._transport.disconnect()}),2e3)}else I("UA already closed")}},{key:"normalizeTarget",value:function(e){return T.normalizeTarget(e,this._configuration.hostport_params)}},{key:"get",value:function(e){switch(e){case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;default:return void x('get() | cannot get "%s" parameter in runtime',e)}}},{key:"set",value:function(e,t){switch(e){case"password":this._configuration.password=String(t);break;case"realm":this._configuration.realm=String(t);break;case"ha1":this._configuration.ha1=String(t),this._configuration.password=null;break;case"display_name":this._configuration.display_name=t;break;default:return x('set() | cannot set "%s" parameter in runtime',e),!1}return!0}},{key:"newTransaction",value:function(e){this._transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})}},{key:"destroyTransaction",value:function(e){delete this._transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})}},{key:"newDialog",value:function(e){this._dialogs[e.id]=e}},{key:"destroyDialog",value:function(e){delete this._dialogs[e.id]}},{key:"newMessage",value:function(e,t){this._applicants[e]=e,this.emit("newMessage",t)}},{key:"destroyMessage",value:function(e){delete this._applicants[e]}},{key:"newRTCSession",value:function(e,t){this._sessions[e.id]=e,this.emit("newRTCSession",t)}},{key:"destroyRTCSession",value:function(e){delete this._sessions[e.id]}},{key:"registered",value:function(e){this.emit("registered",e)}},{key:"unregistered",value:function(e){this.emit("unregistered",e)}},{key:"registrationFailed",value:function(e){this.emit("registrationFailed",e)}},{key:"receiveRequest",value:function(e){var t=e.method;if(e.ruri.user!==this._configuration.uri.user&&e.ruri.user!==this._contact.uri.user)return I("Request-URI does not point to us"),void(e.method!==_.ACK&&e.reply_sl(404));if(e.ruri.scheme!==_.SIPS){if(!y.checkTransaction(this,e)){if(t===_.INVITE?new y.InviteServerTransaction(this,this._transport,e):t!==_.ACK&&t!==_.CANCEL&&new y.NonInviteServerTransaction(this,this._transport,e),t===_.OPTIONS)e.reply(200);else if(t===_.MESSAGE){if(0===this.listeners("newMessage").length)return void e.reply(405);new m(this).init_incoming(e)}else if(t===_.INVITE&&!e.to_tag&&0===this.listeners("newRTCSession").length)return void e.reply(405);var n=void 0,r=void 0;if(e.to_tag)(n=this._findDialog(e.call_id,e.from_tag,e.to_tag))?n.receiveRequest(e):t===_.NOTIFY?(r=this._findSession(e))?r.receiveRequest(e):(I("received NOTIFY request for a non existent subscription"),e.reply(481,"Subscription does not exist")):t!==_.ACK&&e.reply(481);else switch(t){case _.INVITE:if(window.RTCPeerConnection)if(e.hasHeader("replaces")){var i=e.replaces;(n=this._findDialog(i.call_id,i.from_tag,i.to_tag))?(r=n.owner).isEnded()?e.reply(603):r.receiveRequest(e):e.reply(481)}else(r=new g(this)).init_incoming(e);else x("INVITE received but WebRTC is not supported"),e.reply(488);break;case _.BYE:e.reply(481);break;case _.CANCEL:(r=this._findSession(e))?r.receiveRequest(e):I("received CANCEL request for a non existent session");break;case _.ACK:break;case _.NOTIFY:this.emit("sipEvent",{event:e.event,request:e}),e.reply(200);break;default:e.reply(405)}}}else e.reply_sl(416)}},{key:"_findSession",value:function(e){var t=e.call_id,n=e.from_tag,r=e.to_tag,i=t+n,o=this._sessions[i],s=t+r,u=this._sessions[s];return o||(u||null)}},{key:"_findDialog",value:function(e,t,n){var r=e+t+n,i=this._dialogs[r];return i||(r=e+n+t,(i=this._dialogs[r])||null)}},{key:"_loadConfig",value:function(e){try{R.load(this._configuration,e)}catch(e){throw e}0===this._configuration.display_name&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=T.newUUID()),this._configuration.jssip_id=T.createRandomToken(5);var t=this._configuration.uri.clone();t.user=null,this._configuration.hostport_params=t.toString().replace(/^sip:/i,"");try{this._transport=new S(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=O.bind(this),this._transport.onconnect=N.bind(this),this._transport.ondisconnect=P.bind(this),this._transport.ondata=D.bind(this)}catch(e){throw x(e),new E.ConfigurationError("sockets",this._configuration.sockets)}if(delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),!this._configuration.registrar_server){var n=this._configuration.uri.clone();n.user=null,n.clearParams(),n.clearHeaders(),this._configuration.registrar_server=n}this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new C("sip",T.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.anonymous||null,n=e.outbound||null,r="<";return r+=t?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!n||(t?this.temp_gruu:this.pub_gruu)||(r+=";ob"),r+=">"}};var r=["password","realm","ha1","display_name","register"];for(var s in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,s)&&(-1!==r.indexOf(s)?(0,o.default)(this._configuration,s,{writable:!0,configurable:!1}):(0,o.default)(this._configuration,s,{writable:!1,configurable:!1}));for(var u in I("configuration parameters after validation:"),this._configuration)if(Object.prototype.hasOwnProperty.call(R.settings,u))switch(u){case"uri":case"registrar_server":I("- "+u+": "+String(this._configuration[u]));break;case"password":case"ha1":I("- "+u+": NOT SHOWN");break;default:I("- "+u+": "+String((0,i.default)(this._configuration[u])))}}},{key:"C",get:function(){return k}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}}]),t}(p)},function(e,t,n){n(150),e.exports=n(3).Object.keys},function(e,t,n){var r=n(28),i=n(31);n(84)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){"use strict";var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(5),u=n(4),a=n(19),l=n(43),c=n(0)("JsSIP:Registrator");e.exports=function(){function e(t,n){(0,r.default)(this,e);this._ua=t,this._transport=n,this._registrar=t.configuration.registrar_server,this._expires=t.configuration.register_expires,this._call_id=s.createRandomToken(22),this._cseq=0,this._to_uri=t.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._contact+=";reg-id=1",this._contact+=';+sip.instance="<urn:uuid:'+String(this._ua.configuration.instance_id)+'>"'}return(0,i.default)(e,[{key:"setExtraHeaders",value:function(e){Array.isArray(e)||(e=[]),this._extraHeaders=e.slice()}},{key:"setExtraContactParams",value:function(e){for(var t in e instanceof Object||(e={}),this._extraContactParams="",e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];this._extraContactParams+=";"+t,n&&(this._extraContactParams+="="+String(n))}}},{key:"register",value:function(){var e=this;if(this._registering)c("Register request in progress...");else{var t=this._extraHeaders.slice();t.push("Contact: "+String(this._contact)+";expires="+String(this._expires)+String(this._extraContactParams)),t.push("Expires: "+String(this._expires));var n=new a.OutgoingRequest(u.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},t),r=new l(this._ua,n,{onRequestTimeout:function(){e._registrationFailure(null,u.causes.REQUEST_TIMEOUT)},onTransportError:function(){e._registrationFailure(null,u.causes.CONNECTION_ERROR)},onAuthenticated:function(){e._cseq+=1},onReceiveResponse:function(t){if(t.cseq===e._cseq)switch(null!==e._registrationTimer&&(clearTimeout(e._registrationTimer),e._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):if(e._registering=!1,!t.hasHeader("Contact")){c("no Contact header in response to REGISTER, response ignored");break}var n=t.headers.Contact.reduce((function(e,t){return e.concat(t.parsed)}),[]).find((function(t){return t.uri.user===e._ua.contact.uri.user}));if(!n){c("no Contact header pointing to us, response ignored");break}var r=n.getParam("expires");!r&&t.hasHeader("expires")&&(r=t.getHeader("expires")),r||(r=e._expires),(r=Number(r))<10&&(r=10),e._registrationTimer=setTimeout((function(){e._registrationTimer=null,0===e._ua.listeners("registrationExpiring").length?e.register():e._ua.emit("registrationExpiring")}),1e3*r-5e3),n.hasParam("temp-gruu")&&(e._ua.contact.temp_gruu=n.getParam("temp-gruu").replace(/"/g,"")),n.hasParam("pub-gruu")&&(e._ua.contact.pub_gruu=n.getParam("pub-gruu").replace(/"/g,"")),e._registered||(e._registered=!0,e._ua.registered({response:t}));break;case/^423$/.test(t.status_code):t.hasHeader("min-expires")?(e._expires=Number(t.getHeader("min-expires")),e._expires<10&&(e._expires=10),e.register()):(c("423 response received for REGISTER without Min-Expires"),e._registrationFailure(t,u.causes.SIP_FAILURE_CODE));break;default:var i=s.sipErrorCause(t.status_code);e._registrationFailure(t,i)}}});this._registering=!0,r.send()}}},{key:"unregister",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._registered){this._registered=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null);var n=this._extraHeaders.slice();t.all?n.push("Contact: *"+String(this._extraContactParams)):n.push("Contact: "+String(this._contact)+";expires=0"+String(this._extraContactParams)),n.push("Expires: 0");var r=new a.OutgoingRequest(u.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},n),i=new l(this._ua,r,{onRequestTimeout:function(){e._unregistered(null,u.causes.REQUEST_TIMEOUT)},onTransportError:function(){e._unregistered(null,u.causes.CONNECTION_ERROR)},onAuthenticated:function(){e._cseq+=1},onReceiveResponse:function(t){switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):e._unregistered(t);break;default:var n=s.sipErrorCause(t.status_code);e._unregistered(t,n)}}});i.send()}else c("already unregistered")}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(e,t){this._registering=!1,this._ua.registrationFailed({response:e||null,cause:t}),this._registered&&(this._registered=!1,this._ua.unregistered({response:e||null,cause:t}))}},{key:"_unregistered",value:function(e,t){this._registering=!1,this._registered=!1,this._ua.unregistered({response:e||null,cause:t||null})}},{key:"registered",get:function(){return this._registered}}]),e}()},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(88),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach((function(e){var t=e[0],s=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var u=0;u<(o[t]||[]).length;u+=1){var a=o[t][u];if(a.reg.test(s))return i(a,r,s)}})),t.media=n,t};var u=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(u,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(u,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},function(e,t,n){var r=n(88),i=/%[sdv%]/g,o=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},s=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var s=t.names[i];t.name?r.push(n[t.name][s]):r.push(n[t.names[i]])}else r.push(n[t.name]);return o.apply(null,r)},u=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||u,i=t.innerOrder||a,o=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(s(t,n,e))}))}))})),e.media.forEach((function(e){o.push(s("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(s(t,n,e))}))}))}))})),o.join("\r\n")+"\r\n"}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,l=[],c=!1,f=-1;function d(){c&&a&&(c=!1,a.length?l=a.concat(l):f=-1,l.length&&h())}function h(){if(!c){var e=u(d);c=!0;for(var t=l.length;t;){for(a=l,l=[];++f<t;)a&&a[f].run();f=-1,t=l.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||u(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=o(n(156)),i=o(n(36));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return o.colors[Math.abs(t)%o.colors.length]}function o(e){var n=void 0;function r(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(r.enabled){var s=r,u=Number(new Date),a=u-(n||u);s.diff=a,s.prev=n,s.curr=u,n=u,t[0]=o.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;l++;var r=o.formatters[n];if("function"==typeof r){var i=t[l];e=r.call(s,i),t.splice(l,1),l--}return e})),o.formatArgs.call(s,t);var c=s.log||o.log;c.apply(s,t)}}return r.namespace=e,r.enabled=o.enabled(e),r.useColors=o.useColors(),r.color=t(e),r.destroy=s,r.extend=u,"function"==typeof o.init&&o.init(r),o.instances.push(r),r}function s(){var e=o.instances.indexOf(this);return-1!==e&&(o.instances.splice(e,1),!0)}function u(e,t){var n=o(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},o.disable=function(){var e=[].concat((0,r.default)(o.names.map(a)),(0,r.default)(o.skips.map(a).map((function(e){return"-"+e})))).join(",");return o.enable(""),e},o.enable=function(e){o.save(e),o.names=[],o.skips=[];var t=void 0,n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$")));for(t=0;t<o.instances.length;t++){var i=o.instances[t];i.enabled=o.enabled(i.namespace)}},o.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,n=void 0;for(t=0,n=o.skips.length;t<n;t++)if(o.skips[t].test(e))return!1;for(t=0,n=o.names.length;t<n;t++)if(o.names[t].test(e))return!0;return!1},o.humanize=n(161),(0,i.default)(e).forEach((function(t){o[t]=e[t]})),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=t,o.enable(o.load()),o}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(157),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){e.exports={default:n(158),__esModule:!0}},function(e,t,n){n(41),n(159),e.exports=n(3).Array.from},function(e,t,n){"use strict";var r=n(25),i=n(8),o=n(28),s=n(74),u=n(75),a=n(47),l=n(160),c=n(55);i(i.S+i.F*!n(80)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,f,d=o(e),h="function"==typeof this?this:Array,p=arguments.length,_=p>1?arguments[1]:void 0,v=void 0!==_,g=0,m=c(d);if(v&&(_=r(_,p>2?arguments[2]:void 0,2)),null==m||h==Array&&u(m))for(n=new h(t=a(d.length));t>g;g++)l(n,g,v?_(d[g],g):d[g]);else for(f=m.call(d),n=new h;!(i=f.next()).done;g++)l(n,g,v?s(f,_,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(14),i=n(30);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){"use strict";var r=o(n(16)),i=o(n(29));function o(e){return e&&e.__esModule?e:{default:e}}var s=1e3,u=6e4,a=60*u,l=24*a;function c(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var n=void 0===e?"undefined":(0,i.default)(e);if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=l)return c(e,t,l,"day");if(t>=a)return c(e,t,a,"hour");if(t>=u)return c(e,t,u,"minute");if(t>=s)return c(e,t,s,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=l)return Math.round(e/l)+"d";if(t>=a)return Math.round(e/a)+"h";if(t>=u)return Math.round(e/u)+"m";if(t>=s)return Math.round(e/s)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+(0,r.default)(e))}},function(e,t,n){"use strict";var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(5),u=n(0)("JsSIP:DigestAuthentication"),a=n(0)("JsSIP:ERROR:DigestAuthentication");a.log=console.warn.bind(console),e.exports=function(){function e(t){(0,r.default)(this,e),this._credentials=t,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}return(0,i.default)(e,[{key:"get",value:function(e){switch(e){case"realm":return this._realm;case"ha1":return this._ha1;default:return void a('get() | cannot get "%s" parameter',e)}}},{key:"authenticate",value:function(e,t){var n=e.method,r=e.ruri,i=e.body,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._algorithm=t.algorithm,this._realm=t.realm,this._nonce=t.nonce,this._opaque=t.opaque,this._stale=t.stale,this._algorithm){if("MD5"!==this._algorithm)return a('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return a("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return a("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return a("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return a('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(t.qop)if(t.qop.indexOf("auth-int")>-1)this._qop="auth-int";else{if(!(t.qop.indexOf("auth")>-1))return a('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this._qop="auth"}else this._qop=null;this._method=n,this._uri=r,this._cnonce=o||s.createRandomToken(12),this._nc+=1;var l=Number(this._nc).toString(16);this._ncHex="00000000".substr(0,8-l.length)+l,4294967296===this._nc&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=s.calculateMD5(String(this._credentials.username)+":"+String(this._realm)+":"+String(this._credentials.password)):this._ha1=this._credentials.ha1;var c=void 0,f=void 0;return"auth"===this._qop?(c=String(this._method)+":"+String(this._uri),f=s.calculateMD5(c),u('authenticate() | using qop=auth [a2:"%s"]',c),this._response=s.calculateMD5(String(this._ha1)+":"+String(this._nonce)+":"+String(this._ncHex)+":"+String(this._cnonce)+":auth:"+String(f))):"auth-int"===this._qop?(c=String(this._method)+":"+String(this._uri)+":"+String(s.calculateMD5(i||"")),f=s.calculateMD5(c),u('authenticate() | using qop=auth-int [a2:"%s"]',c),this._response=s.calculateMD5(String(this._ha1)+":"+String(this._nonce)+":"+String(this._ncHex)+":"+String(this._cnonce)+":auth-int:"+String(f))):null===this._qop&&(c=String(this._method)+":"+String(this._uri),f=s.calculateMD5(c),u('authenticate() | using qop=null [a2:"%s"]',c),this._response=s.calculateMD5(String(this._ha1)+":"+String(this._nonce)+":"+String(f))),u("authenticate() | response generated"),!0}},{key:"toString",value:function(){var e=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+String(this._algorithm)),e.push('username="'+String(this._credentials.username)+'"'),e.push('realm="'+String(this._realm)+'"'),e.push('nonce="'+String(this._nonce)+'"'),e.push('uri="'+String(this._uri)+'"'),e.push('response="'+String(this._response)+'"'),this._opaque&&e.push('opaque="'+String(this._opaque)+'"'),this._qop&&(e.push("qop="+String(this._qop)),e.push('cnonce="'+String(this._cnonce)+'"'),e.push("nc="+String(this._ncHex))),"Digest "+String(e.join(", "))}}]),e}()},function(e,t,n){"use strict";var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(19),u=n(4),a=n(37),l=n(164),c=n(5),f=n(0)("JsSIP:Dialog"),d={STATUS_EARLY:1,STATUS_CONFIRMED:2};e.exports=function(){function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.STATUS_CONFIRMED;if((0,r.default)(this,e),this._owner=t,this._ua=t._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!n.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};n instanceof s.IncomingResponse&&(o=n.status_code<200?d.STATUS_EARLY:d.STATUS_CONFIRMED);var u=n.parseHeader("contact");"UAS"===i?(this._id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._remote_seqnum=n.cseq,this._local_uri=n.parseHeader("to").uri,this._remote_uri=n.parseHeader("from").uri,this._remote_target=u.uri,this._route_set=n.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):"UAC"===i&&(this._id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._local_seqnum=n.cseq,this._local_uri=n.parseHeader("from").uri,this._remote_uri=n.parseHeader("to").uri,this._remote_target=u.uri,this._route_set=n.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),f("new "+String(i)+" dialog created with status "+(this._state===d.STATUS_EARLY?"EARLY":"CONFIRMED"))}return(0,i.default)(e,null,[{key:"C",get:function(){return d}}]),(0,i.default)(e,[{key:"update",value:function(e,t){this._state=d.STATUS_CONFIRMED,f("dialog "+String(this._id.toString())+"  changed to CONFIRMED state"),"UAC"===t&&(this._route_set=e.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){f("dialog "+String(this._id.toString())+" deleted"),this._ua.destroyDialog(this)}},{key:"sendRequest",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=c.cloneArray(n.extraHeaders),i=n.eventHandlers||{},o=n.body||null,s=this._createRequest(e,r,o);i.onAuthenticated=function(){t._local_seqnum+=1};var u=new l(this,s,i);return u.send(),s}},{key:"receiveRequest",value:function(e){this._checkInDialogRequest(e)&&(e.method===u.ACK&&null!==this._ack_seqnum?this._ack_seqnum=null:e.method===u.INVITE&&(this._ack_seqnum=e.cseq),this._owner.receiveRequest(e))}},{key:"_createRequest",value:function(e,t,n){t=c.cloneArray(t),this._local_seqnum||(this._local_seqnum=Math.floor(1e4*Math.random()));var r=e===u.CANCEL||e===u.ACK?this._local_seqnum:this._local_seqnum+=1;return new s.OutgoingRequest(e,this._remote_target,this._ua,{cseq:r,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},t,n)}},{key:"_checkInDialogRequest",value:function(e){var t=this;if(this._remote_seqnum)if(e.cseq<this._remote_seqnum){if(e.method!==u.ACK)return e.reply(500),!1;if(null===this._ack_seqnum||e.cseq!==this._ack_seqnum)return!1}else e.cseq>this._remote_seqnum&&(this._remote_seqnum=e.cseq);else this._remote_seqnum=e.cseq;if(e.method===u.INVITE||e.method===u.UPDATE&&e.body){if(!0===this._uac_pending_reply)e.reply(491);else{if(!0===this._uas_pending_reply){var n=1+(10*Math.random()|0);return e.reply(500,null,["Retry-After:"+n]),!1}this._uas_pending_reply=!0;e.server_transaction.on("stateChanged",(function n(){e.server_transaction.state!==a.C.STATUS_ACCEPTED&&e.server_transaction.state!==a.C.STATUS_COMPLETED&&e.server_transaction.state!==a.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",n),t._uas_pending_reply=!1)}))}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(function(){e.server_transaction.state===a.C.STATUS_ACCEPTED&&(t._remote_target=e.parseHeader("contact").uri)}))}else e.method===u.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(function(){e.server_transaction.state===a.C.STATUS_COMPLETED&&(t._remote_target=e.parseHeader("contact").uri)}));return!0}},{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(e){this._local_seqnum=e}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(e){this._uac_pending_reply=e}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}}]),e}()},function(e,t,n){"use strict";var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(4),u=n(37),a=n(90),l=n(43),c={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}};e.exports=function(){function e(t,n,i){for(var o in(0,r.default)(this,e),this._dialog=t,this._ua=t._ua,this._request=n,this._eventHandlers=i,this._reattempt=!1,this._reattemptTimer=null,c)Object.prototype.hasOwnProperty.call(c,o)&&(this._eventHandlers[o]||(this._eventHandlers[o]=c[o]))}return(0,i.default)(e,[{key:"send",value:function(){var e=this,t=new l(this._ua,this._request,{onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onAuthenticated:function(t){e._eventHandlers.onAuthenticated(t)},onReceiveResponse:function(t){e._receiveResponse(t)}});if(t.send(),(this._request.method===s.INVITE||this._request.method===s.UPDATE&&this._request.body)&&t.clientTransaction.state!==u.C.STATUS_TERMINATED){this._dialog.uac_pending_reply=!0;t.clientTransaction.on("stateChanged",(function n(){t.clientTransaction.state!==u.C.STATUS_ACCEPTED&&t.clientTransaction.state!==u.C.STATUS_COMPLETED&&t.clientTransaction.state!==u.C.STATUS_TERMINATED||(t.clientTransaction.removeListener("stateChanged",n),e._dialog.uac_pending_reply=!1)}))}}},{key:"_receiveResponse",value:function(e){var t=this;408===e.status_code||481===e.status_code?this._eventHandlers.onDialogError(e):e.method===s.INVITE&&491===e.status_code?this._reattempt?e.status_code>=200&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):e.status_code>=300&&this._eventHandlers.onErrorResponse(e):(this._request.cseq.value=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout((function(){t._dialog.owner.status!==a.C.STATUS_TERMINATED&&(t._reattempt=!0,t._request_sender.send())}),1e3)):e.status_code>=200&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):e.status_code>=300&&this._eventHandlers.onErrorResponse(e)}},{key:"request",get:function(){return this._request}}]),e}()},function(e,t,n){"use strict";var r=a(n(10)),i=a(n(1)),o=a(n(2)),s=a(n(11)),u=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var l=n(24).EventEmitter,c=n(4),f=n(22),d=n(5),h=n(0)("JsSIP:RTCSession:DTMF");n(0)("JsSIP:ERROR:RTCSession:DTMF").log=console.warn.bind(console);var p={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};e.exports=function(e){function t(e){(0,i.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return n._session=e,n._direction=null,n._tone=null,n._duration=null,n._request=null,n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"send",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new f.InvalidStateError(this._session.status);var r=d.cloneArray(n.extraHeaders);if(this.eventHandlers=n.eventHandlers||{},"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError("Invalid tone: "+e);e=e.toString()}if(!e.match(/^[0-9A-DR#*]$/))throw new TypeError("Invalid tone: "+String(e));this._tone=e,this._duration=n.duration,r.push("Content-Type: application/dtmf-relay");var i="Signal="+String(this._tone)+"\r\n";i+="Duration="+String(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(c.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){t.eventHandlers.onFailed&&t.eventHandlers.onFailed(),t.emit("failed",{originator:"remote",response:e})},onRequestTimeout:function(){t._session.onRequestTimeout()},onTransportError:function(){t._session.onTransportError()},onDialogError:function(){t._session.onDialogError()}},body:i})}},{key:"init_incoming",value:function(e){var t=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,n=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;if(this._direction="incoming",this._request=e,e.reply(200),e.body){var r=e.body.split("\n");r.length>=1&&t.test(r[0])&&(this._tone=r[0].replace(t,"$2")),r.length>=2&&n.test(r[1])&&(this._duration=parseInt(r[1].replace(n,"$2"),10))}this._duration||(this._duration=p.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:e}):h("invalid INFO DTMF received, discarded")}},{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}}]),t}(l),e.exports.C=p},function(e,t,n){"use strict";var r=a(n(10)),i=a(n(1)),o=a(n(2)),s=a(n(11)),u=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var l=n(24).EventEmitter;n(0)("JsSIP:ERROR:RTCSession:Info").log=console.warn.bind(console);var c=n(4),f=n(22),d=n(5);e.exports=function(e){function t(e){(0,i.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return n._session=e,n._direction=null,n._contentType=null,n._body=null,n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"send",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._direction="outgoing",void 0===e)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new f.InvalidStateError(this._session.status);this._contentType=e,this._body=t;var i=d.cloneArray(r.extraHeaders);i.push("Content-Type: "+String(e)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(c.INFO,{extraHeaders:i,eventHandlers:{onSuccessResponse:function(e){n.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){n.emit("failed",{originator:"remote",response:e})},onTransportError:function(){n._session.onTransportError()},onRequestTimeout:function(){n._session.onRequestTimeout()},onDialogError:function(){n._session.onDialogError()}},body:t})}},{key:"init_incoming",value:function(e){this._direction="incoming",this.request=e,e.reply(200),this._contentType=e.getHeader("content-type"),this._body=e.body,this._session.newInfo({originator:"remote",info:this,request:e})}},{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}}]),t}(l)},function(e,t,n){"use strict";var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(4),u=n(0)("JsSIP:RTCSession:ReferNotifier"),a="refer",l="message/sipfrag;version=2.0",c=300;e.exports=function(){function e(t,n,i){(0,r.default)(this,e),this._session=t,this._id=n,this._expires=i||c,this._active=!0,this.notify(100)}return(0,i.default)(e,[{key:"notify",value:function(e,t){if(u("notify()"),!1!==this._active){t=t||s.REASON_PHRASE[e]||"";var n=void 0;n=e>=200?"terminated;reason=noresource":"active;expires="+String(this._expires),this._session.sendRequest(s.NOTIFY,{extraHeaders:["Event: "+String(a)+";id="+String(this._id),"Subscription-State: "+String(n),"Content-Type: "+String(l)],body:"SIP/2.0 "+String(e)+" "+String(t),eventHandlers:{onErrorResponse:function(){this._active=!1}}})}}}]),e}()},function(e,t,n){"use strict";var r=a(n(10)),i=a(n(1)),o=a(n(2)),s=a(n(11)),u=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var l=n(24).EventEmitter,c=n(4),f=n(13),d=n(5),h=n(0)("JsSIP:RTCSession:ReferSubscriber");e.exports=function(e){function t(e){(0,i.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return n._id=null,n._session=e,n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"sendRefer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h("sendRefer()");var r=d.cloneArray(n.extraHeaders),i=n.eventHandlers||{};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&this.on(o,i[o]);var s=null;n.replaces&&(s=n.replaces._request.call_id,s+=";to-tag="+String(n.replaces._to_tag),s+=";from-tag="+String(n.replaces._from_tag),s=encodeURIComponent(s));var u="Refer-To: <"+String(e)+(s?"?Replaces="+String(s):"")+">";r.push(u);var a="Referred-By: <"+String(this._session._ua._configuration.uri._scheme)+":"+String(this._session._ua._configuration.uri._user)+"@"+String(this._session._ua._configuration.uri._host)+">";r.push(a),r.push("Contact: "+String(this._session.contact));var l=this._session.sendRequest(c.REFER,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t._requestSucceeded(e)},onErrorResponse:function(e){t._requestFailed(e,c.causes.REJECTED)},onTransportError:function(){t._requestFailed(null,c.causes.CONNECTION_ERROR)},onRequestTimeout:function(){t._requestFailed(null,c.causes.REQUEST_TIMEOUT)},onDialogError:function(){t._requestFailed(null,c.causes.DIALOG_ERROR)}}});this._id=l.cseq}},{key:"receiveNotify",value:function(e){if(h("receiveNotify()"),e.body){var t=f.parse(e.body.trim(),"Status_Line");if(-1!==t)switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",{request:e,status_line:t});break;default:this.emit("failed",{request:e,status_line:t})}else h('receiveNotify() | error parsing NOTIFY body: "'+String(e.body)+'"')}}},{key:"_requestSucceeded",value:function(e){h("REFER succeeded"),h('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:e})}},{key:"_requestFailed",value:function(e,t){h("REFER failed"),h('emit "requestFailed"'),this.emit("requestFailed",{response:e||null,cause:t})}},{key:"id",get:function(){return this._id}}]),t}(l)},function(e,t,n){"use strict";var r=a(n(10)),i=a(n(1)),o=a(n(2)),s=a(n(11)),u=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var l=n(24).EventEmitter,c=n(4),f=n(19),d=n(5),h=n(43),p=n(22),_=n(0)("JsSIP:Message");e.exports=function(e){function t(e){(0,i.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return n._ua=e,n._request=null,n._closed=!1,n._direction=null,n._local_identity=null,n._remote_identity=null,n._is_replied=!1,n._data={},n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"send",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e;if(void 0===e||void 0===t)throw new TypeError("Not enough arguments");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: "+String(i));var o=d.cloneArray(r.extraHeaders),s=r.eventHandlers||{},u=r.contentType||"text/plain";for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&this.on(a,s[a]);o.push("Content-Type: "+String(u)),this._request=new f.OutgoingRequest(c.MESSAGE,e,this._ua,null,o),t&&(this._request.body=t);var l=new h(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(e){n._receiveResponse(e)}});this._newMessage("local",this._request),l.send()}},{key:"init_incoming",value:function(e){this._request=e,this._newMessage("remote",e),this._is_replied||(this._is_replied=!0,e.reply(200)),this._close()}},{key:"accept",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d.cloneArray(e.extraHeaders),n=e.body;if("incoming"!==this._direction)throw new p.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,t,n)}},{key:"reject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status_code||480,n=e.reason_phrase,r=d.cloneArray(e.extraHeaders),i=e.body;if("incoming"!==this._direction)throw new p.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(t<300||t>=700)throw new TypeError("Invalid status_code: "+String(t));this._is_replied=!0,this._request.reply(t,n,r,i)}},{key:"_receiveResponse",value:function(e){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this._succeeded("remote",e);break;default:var t=d.sipErrorCause(e.status_code);this._failed("remote",e,t)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,c.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,c.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(e,t){"remote"===e?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):"local"===e&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newMessage(this,{originator:e,message:this,request:t})}},{key:"_failed",value:function(e,t,n){_("MESSAGE failed"),this._close(),_('emit "failed"'),this.emit("failed",{originator:e,response:t||null,cause:n})}},{key:"_succeeded",value:function(e,t){_("MESSAGE succeeded"),this._close(),_('emit "succeeded"'),this.emit("succeeded",{originator:e,response:t})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}]),t}(l)},function(e,t,n){"use strict";var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(91),u=n(0)("JsSIP:Transport"),a=n(0)("JsSIP:ERROR:Transport"),l=n(4);a.log=console.warn.bind(console);var c={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:l.CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:l.CONNECTION_RECOVERY_MAX_INTERVAL}};e.exports=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.recovery_options;if((0,r.default)(this,e),u("new()"),this.status=c.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=n,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1,void 0===t)throw new TypeError("Invalid argument. undefined 'sockets' argument");t instanceof Array||(t=[t]),t.forEach((function(e){if(!s.isSocket(e.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(e.weight&&!Number(e.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:e.socket,weight:e.weight||0,status:c.SOCKET_STATUS_READY})}),this),this._getSocket()}return(0,i.default)(e,[{key:"connect",value:function(){u("connect()"),this.isConnected()?u("Transport is already connected"):this.isConnecting()?u("Transport is connecting"):(this.close_requested=!1,this.status=c.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect()))}},{key:"disconnect",value:function(){u("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=c.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(e){if(u("send()"),!this.isConnected())return a("unable to send message, transport is not connected"),!1;var t=e.toString();return u("sending message:\n\n"+String(t)+"\n"),this.socket.send(t)}},{key:"isConnected",value:function(){return this.status===c.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===c.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var e=this;this.recover_attempts+=1;var t=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);t<this.recovery_options.min_interval?t=this.recovery_options.min_interval:t>this.recovery_options.max_interval&&(t=this.recovery_options.max_interval),u("reconnection attempt: "+String(this.recover_attempts)+". next connection attempt in "+String(t)+" seconds"),this.recovery_timer=setTimeout((function(){e.close_requested||e.isConnected()||e.isConnecting()||(e._getSocket(),e.connect())}),1e3*t)}},{key:"_getSocket",value:function(){var e=[];if(this.sockets.forEach((function(t){t.status!==c.SOCKET_STATUS_ERROR&&(0===e.length?e.push(t):t.weight>e[0].weight?e=[t]:t.weight===e[0].weight&&e.push(t))})),0===e.length)return this.sockets.forEach((function(e){e.status=c.SOCKET_STATUS_READY})),void this._getSocket();var t=Math.floor(Math.random()*e.length);this.socket=e[t].socket}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=c.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(e,t,n){this.status=c.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:t,reason:n}),this.close_requested||(this.sockets.forEach((function(e){this.socket===e.socket&&(e.status=c.SOCKET_STATUS_ERROR)}),this),this._reconnect(e))}},{key:"_onData",value:function(e){if("\r\n"!==e){if("string"!=typeof e){try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(e){return void u("received binary message failed to be converted into string, message discarded")}u("received binary message:\n\n"+e+"\n")}else u("received text message:\n\n"+e+"\n");this.ondata({transport:this,message:e})}else u("received message with CRLF Keep Alive response")}},{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}}]),e}()},function(e,t,n){"use strict";var r,i=n(17),o=(r=i)&&r.__esModule?r:{default:r};var s=n(13),u=n(19),a=n(0)("JsSIP:ERROR:Parser");function l(e,t){var n=t,r=0,i=0;if(e.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(-1===(i=e.indexOf("\r\n",n)))return i;!e.substring(i+2,i+4).match(/(^\r\n)/)&&e.charAt(i+2).match(/(^\s+)/)?n=i+2:r=i}return r}function c(e,t,n,r){var i=void 0,a=t.indexOf(":",n),l=t.substring(n,a).trim(),c=t.substring(a+1,r).trim();switch(l.toLowerCase()){case"via":case"v":e.addHeader("via",c),1===e.getHeaders("via").length?(i=e.parseHeader("Via"))&&(e.via=i,e.via_branch=i.branch):i=0;break;case"from":case"f":e.setHeader("from",c),(i=e.parseHeader("from"))&&(e.from=i,e.from_tag=i.getParam("tag"));break;case"to":case"t":e.setHeader("to",c),(i=e.parseHeader("to"))&&(e.to=i,e.to_tag=i.getParam("tag"));break;case"record-route":if(-1===(i=s.parse(c,"Record_Route")))i=void 0;else{var f=!0,d=!1,h=void 0;try{for(var p,_=(0,o.default)(i);!(f=(p=_.next()).done);f=!0){var v=p.value;e.addHeader("record-route",c.substring(v.possition,v.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=v.parsed}}catch(e){d=!0,h=e}finally{try{!f&&_.return&&_.return()}finally{if(d)throw h}}}break;case"call-id":case"i":e.setHeader("call-id",c),(i=e.parseHeader("call-id"))&&(e.call_id=c);break;case"contact":case"m":if(-1===(i=s.parse(c,"Contact")))i=void 0;else{var g=!0,m=!1,y=void 0;try{for(var S,T=(0,o.default)(i);!(g=(S=T.next()).done);g=!0){var E=S.value;e.addHeader("contact",c.substring(E.possition,E.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=E.parsed}}catch(e){m=!0,y=e}finally{try{!g&&T.return&&T.return()}finally{if(m)throw y}}}break;case"content-length":case"l":e.setHeader("content-length",c),i=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",c),i=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",c),(i=e.parseHeader("cseq"))&&(e.cseq=i.value),e instanceof u.IncomingResponse&&(e.method=i.method);break;case"max-forwards":e.setHeader("max-forwards",c),i=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",c),i=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",c),i=e.parseHeader("proxy-authenticate");break;case"session-expires":case"x":e.setHeader("session-expires",c),(i=e.parseHeader("session-expires"))&&(e.session_expires=i.expires,e.session_expires_refresher=i.refresher);break;case"refer-to":case"r":e.setHeader("refer-to",c),(i=e.parseHeader("refer-to"))&&(e.refer_to=i);break;case"replaces":e.setHeader("replaces",c),(i=e.parseHeader("replaces"))&&(e.replaces=i);break;case"event":case"o":e.setHeader("event",c),(i=e.parseHeader("event"))&&(e.event=i);break;default:e.addHeader(l,c),i=0}return void 0!==i||{error:'error parsing header "'+String(l)+'"'}}a.log=console.warn.bind(console),t.parseMessage=function(e,t){var n=void 0,r=void 0,i=e.indexOf("\r\n");if(-1!==i){var o=e.substring(0,i),f=s.parse(o,"Request_Response");if(-1!==f){f.status_code?((n=new u.IncomingResponse).status_code=f.status_code,n.reason_phrase=f.reason_phrase):((n=new u.IncomingRequest(t)).method=f.method,n.ruri=f.uri),n.data=e;for(var d=i+2;;){if(-2===(i=l(e,d))){r=d+2;break}if(-1===i)return void a("parseMessage() | malformed message");if(!0!==(f=c(n,e,d,i)))return void a("parseMessage() |",f.error);d=i+2}if(n.hasHeader("content-length")){var h=n.getHeader("content-length");n.body=e.substr(r,h)}else n.body=e.substring(r);return n}a('parseMessage() | error parsing first line of SIP message: "'+String(o)+'"')}else a("parseMessage() | no CRLF found, not a SIP message")}},function(e,t,n){"use strict";var r,i=n(17),o=(r=i)&&r.__esModule?r:{default:r};var s=n(4),u=n(19),a=n(5),l=n(0)("JsSIP:sanityCheck"),c=[function(){var e=!0,t=!1,n=void 0;try{for(var r,i=(0,o.default)(["from","to","call_id","cseq","via"]);!(e=(r=i.next()).done);e=!0){var s=r.value;if(!h.hasHeader(s))return l("missing mandatory header field : "+String(s)+", dropping the response"),!1}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}],f=[function(){if("sip"!==h.s("to").uri.scheme)return v(416),!1},function(){if(!h.to_tag&&h.call_id.substr(0,5)===p.configuration.jssip_id)return v(482),!1},function(){var e=a.str_utf8_length(h.body),t=h.getHeader("content-length");if(e<t)return v(400),!1},function(){var e=h.from_tag,t=h.call_id,n=h.cseq,r=void 0;if(h.to_tag)return;if(h.method===s.INVITE){if(p._transactions.ist[h.via_branch])return!1;for(var i in p._transactions.ist)if(Object.prototype.hasOwnProperty.call(p._transactions.ist,i)&&(r=p._transactions.ist[i]).request.from_tag===e&&r.request.call_id===t&&r.request.cseq===n)return v(482),!1}else{if(p._transactions.nist[h.via_branch])return!1;for(var o in p._transactions.nist)if(Object.prototype.hasOwnProperty.call(p._transactions.nist,o)&&(r=p._transactions.nist[o]).request.from_tag===e&&r.request.call_id===t&&r.request.cseq===n)return v(482),!1}}],d=[function(){if(h.getHeaders("via").length>1)return l("more than one Via header field present in the response, dropping the response"),!1},function(){var e=a.str_utf8_length(h.body),t=h.getHeader("content-length");if(e<t)return l("message body length is lower than the value in Content-Length header field, dropping the response"),!1}],h=void 0,p=void 0,_=void 0;function v(e){var t=h.getHeaders("via"),n=void 0,r="SIP/2.0 "+String(e)+" "+String(s.REASON_PHRASE[e])+"\r\n",i=!0,u=!1,l=void 0;try{for(var c,f=(0,o.default)(t);!(i=(c=f.next()).done);i=!0){var d=c.value;r+="Via: "+String(d)+"\r\n"}}catch(e){u=!0,l=e}finally{try{!i&&f.return&&f.return()}finally{if(u)throw l}}n=h.getHeader("To"),h.to_tag||(n+=";tag="+String(a.newTag())),r+="To: "+String(n)+"\r\n",r+="From: "+String(h.getHeader("From"))+"\r\n",r+="Call-ID: "+String(h.call_id)+"\r\n",r+="CSeq: "+String(h.cseq)+" "+String(h.method)+"\r\n",r+="\r\n",_.send(r)}e.exports=function(e,t,n){h=e,p=t,_=n;var r=!0,i=!1,s=void 0;try{for(var a,l=(0,o.default)(c);!(r=(a=l.next()).done);r=!0){if(!1===(0,a.value)())return!1}}catch(e){i=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw s}}if(h instanceof u.IncomingRequest){var v=!0,g=!1,m=void 0;try{for(var y,S=(0,o.default)(f);!(v=(y=S.next()).done);v=!0){if(!1===(0,y.value)())return!1}}catch(e){g=!0,m=e}finally{try{!v&&S.return&&S.return()}finally{if(g)throw m}}}else if(h instanceof u.IncomingResponse){var T=!0,E=!1,C=void 0;try{for(var b,A=(0,o.default)(d);!(T=(b=A.next()).done);T=!0){if(!1===(0,b.value)())return!1}}catch(e){E=!0,C=e}finally{try{!T&&A.return&&A.return()}finally{if(E)throw C}}}return!0}},function(e,t,n){"use strict";var r,i=n(17),o=(r=i)&&r.__esModule?r:{default:r};var s=n(5),u=n(4),a=n(13),l=n(23),c=n(91),f=n(22);t.settings={authorization_user:null,password:null,realm:null,ha1:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:u.UPDATE,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:u.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:u.CONNECTION_RECOVERY_MIN_INTERVAL,via_host:String(s.createRandomToken(12))+".invalid"};var d={mandatory:{sockets:function(e){var t=[];if(c.isSocket(e))t.push({socket:e});else{if(!Array.isArray(e)||!e.length)return;var n=!0,r=!1,i=void 0;try{for(var s,u=(0,o.default)(e);!(n=(s=u.next()).done);n=!0){var a=s.value;Object.prototype.hasOwnProperty.call(a,"socket")&&c.isSocket(a.socket)?t.push(a):c.isSocket(a)&&t.push({socket:a})}}catch(e){r=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}}return t},uri:function(e){/^sip:/i.test(e)||(e=String(u.SIP)+":"+String(e));var t=l.parse(e);return t&&t.user?t:void 0}},optional:{authorization_user:function(e){return-1===a.parse('"'+String(e)+'"',"quoted_string")?void 0:e},authorization_jwt:function(e){if("string"==typeof e)return e},user_agent:function(e){if("string"==typeof e)return e},connection_recovery_max_interval:function(e){if(s.isDecimal(e)){var t=Number(e);if(t>0)return t}},connection_recovery_min_interval:function(e){if(s.isDecimal(e)){var t=Number(e);if(t>0)return t}},contact_uri:function(e){if("string"==typeof e){var t=a.parse(e,"SIP_URI");if(-1!==t)return t}},display_name:function(e){return e},instance_id:function(e){return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===a.parse(e,"uuid")?void 0:e},no_answer_timeout:function(e){if(s.isDecimal(e)){var t=Number(e);if(t>0)return t}},session_timers:function(e){if("boolean"==typeof e)return e},session_timers_refresh_method:function(e){if("string"==typeof e&&((e=e.toUpperCase())===u.INVITE||e===u.UPDATE))return e},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){if("boolean"==typeof e)return e},register_expires:function(e){if(s.isDecimal(e)){var t=Number(e);if(t>0)return t}},registrar_server:function(e){/^sip:/i.test(e)||(e=String(u.SIP)+":"+String(e));var t=l.parse(e);return t?t.user?void 0:t:void 0},use_preloaded_route:function(e){if("boolean"==typeof e)return e}}};t.load=function(e,t){for(var n in d.mandatory){if(!t.hasOwnProperty(n))throw new f.ConfigurationError(n);var r=t[n],i=d.mandatory[n](r);if(void 0===i)throw new f.ConfigurationError(n,r);e[n]=i}for(var o in d.optional)if(t.hasOwnProperty(o)){var u=t[o];if(s.isEmpty(u))continue;var a=d.optional[o](u);if(void 0===a)throw new f.ConfigurationError(o,u);e[o]=a}}},function(e,t,n){"use strict";var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(13),u=n(0)("JsSIP:WebSocketInterface"),a=n(0)("JsSIP:ERROR:WebSocketInterface");a.log=console.warn.bind(console),e.exports=function(){function e(t){(0,r.default)(this,e),u('new() [url:"%s"]',t),this._url=t,this._sip_uri=null,this._via_transport=null,this._ws=null;var n=s.parse(t,"absoluteURI");if(-1===n)throw a("invalid WebSocket URI: "+String(t)),new TypeError("Invalid argument: "+String(t));if("wss"!==n.scheme&&"ws"!==n.scheme)throw a("invalid WebSocket URI scheme: "+String(n.scheme)),new TypeError("Invalid argument: "+String(t));this._sip_uri="sip:"+String(n.host)+(n.port?":"+String(n.port):"")+";transport=ws",this._via_transport=n.scheme.toUpperCase()}return(0,i.default)(e,[{key:"connect",value:function(){if(u("connect()"),this.isConnected())u("WebSocket "+String(this._url)+" is already connected");else if(this.isConnecting())u("WebSocket "+String(this._url)+" is connecting");else{this._ws&&this.disconnect(),u("connecting to WebSocket "+String(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(e){this._onError(e)}}}},{key:"disconnect",value:function(){u("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null)}},{key:"send",value:function(e){return u("send()"),this.isConnected()?(this._ws.send(e),!0):(a("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){u("WebSocket "+String(this._url)+" connected"),this.onconnect()}},{key:"_onClose",value:function(e){var t=e.wasClean,n=e.code,r=e.reason;u("WebSocket "+String(this._url)+" closed"),!1===t&&u("WebSocket abrupt disconnection");var i={socket:this,error:!t,code:n,reason:r};this.ondisconnect(i)}},{key:"_onMessage",value:function(e){var t=e.data;u("received WebSocket message"),this.ondata(t)}},{key:"_onError",value:function(e){a("WebSocket "+String(this._url)+" error: "+String(e))}},{key:"via_transport",get:function(){return this._via_transport},set:function(e){this._via_transport=e.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){(0,r.default)(this,e),this._events=[]}return(0,i.default)(e,[{key:"fire",value:function(e,t,n){var r=n;if(e in this._events)for(var i=0,o=this._events[e].length;i<o;i++)this._events[e][i].call(r,t);return this}},{key:"on",value:function(e,t){if("function"!=typeof t||!e)return this;if(e in this._events){for(var n=0,r=!1,i=this._events[e].length;n<i;n++)this._events[e][n]===t&&(r=!0);r||this._events[e].push(t)}else this._events[e]=[t];return this}},{key:"removeEvent",value:function(e,t){if(e in this._events)for(var n=0,r=this._events[e].length;n<r;n++)this._events[e][n]==t&&this._events[e].splice(n,1);return this}},{key:"clearEvent",value:function(e){return e in this._events&&(this._events[e]=[]),this}}]),e}();t.default=s},function(e,t,n){var r,i,o=n(93),s=n(94),u=0,a=0;e.exports=function(e,t,n){var l=t&&n||0,c=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var h=o();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),_=void 0!==e.nsecs?e.nsecs:a+1,v=p-u+(_-a)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||p>u)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,a=_,i=d;var g=(1e4*(268435455&(p+=122192928e5))+_)%4294967296;c[l++]=g>>>24&255,c[l++]=g>>>16&255,c[l++]=g>>>8&255,c[l++]=255&g;var m=p/4294967296*1e4&268435455;c[l++]=m>>>8&255,c[l++]=255&m,c[l++]=m>>>24&15|16,c[l++]=m>>>16&255,c[l++]=d>>>8|128,c[l++]=255&d;for(var y=0;y<6;++y)c[l+y]=f[y];return t||s(c)}},function(e,t,n){var r=n(93),i=n(94);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var u=0;u<16;++u)t[o+u]=s[u];return t||i(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(34)),i=f(n(16)),o=f(n(1)),s=f(n(2)),u=f(n(61)),a=f(n(60)),l=f(n(62)),c=f(n(92));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){(0,o.default)(this,e),this._instance=this,this.eventManager=l.default,this._operator={},this._ticket=null,this._phone=[],this._sessions=[],this._acid="",this._phoneStatus=a.default.PhoneStatus.WORK,this._memoryStore={connectPhoneCallback:[],_phoneQueueInfo:{}},this.socket={},this.connectCountFlag=!1,this.eventCallback={},this._audio=null,this.initDom()}return(0,s.default)(e,[{key:"initPhone",value:function(e,t,n){this._operator=u.default.getEnv();var r=this._operator,i=r.socketUrl,o=r.domain,s=r.deviceId,a=r.initStatus;if(i||t&&"function"==typeof t&&t({ack:"fail"}),a&&(this._phoneStatus=a),!("WebSocket"in window)&&!("MozWebSocket"in window))throw new Error("initConnection: this browser does not support websockets.");this._socketWithParamUrl=i+"?domain="+o+"&Deviceid="+s+"&identify=_"+(new Date).getTime()+"&token=",this.initWebsocket(t,n)}},{key:"initWebsocket",value:function(e,t){var n=this;n.socket=null,n.socket=new WebSocket(n._socketWithParamUrl),n.socket.onopen=function(t){n.eventManager.fire("phoneWebsocketStatus",a.default.PhoneConnectionStatus.CONNECTED),n.setHeartCheck(),n.connectCountFlag?n.setPhoneStatus({phoneStatus:n._phoneStatus}):e&&"function"==typeof e&&e({ack:"success"})},n.socket.onerror=function(e){n.eventManager.fire("phoneWebsocketStatus",a.default.PhoneConnectionStatus.DISCONNECTED)},n.socket.onclose=function(e){n.eventManager.fire("phoneWebsocketStatus",a.default.PhoneConnectionStatus.DISCONNECTED),n.initWebsocket()},n.socket.onmessage=function(e){n.messageHandler(JSON.parse(e.data))}}},{key:"initDom",value:function(){var e=document.createElement("audio");this._audio=e}},{key:"setHeartCheck",value:function(){var e=this;e.heartTimer&&clearInterval(e.heartTimer),e.heartTimer=setInterval((function(){var t=e.newRequestMsgInstance();t.content={id:"heartbeat"},e.socket.send((0,i.default)(t))}),1e4)}},{key:"phoneLogin",value:function(e,t){this.setPhoneStatus({phoneStatus:this._phoneStatus,reason:"bind"}),this.connectCountFlag=!0,t&&t({ack:"success"})}},{key:"messageHandler",value:function(e){if(console.log("messageHandler:message:",e),!e)return!1;"EventCallTrack"===e.eventType&&this.eventCallTrackMessageHandler(e),"EventLoginTrack"===e.eventType&&this.eventLoginTrackMessageHandler(e)}},{key:"eventLoginTrackMessageHandler",value:function(e){this._command?e.state&&("P"===e.state&&e.reason?this.eventManager.fire("phoneStatusChange",{name:this._command.content.reason}):this.eventManager.fire("phoneStatusChange",{name:"W"===this._command.content.state?"work":"logout"}),this._command=null):"P"===e.state&&e.reason?this.eventManager.fire("phoneStatusChange",{name:e.reason}):this.eventManager.fire("phoneStatusChange",{name:"W"===e.state?"work":"logout"})}},{key:"eventCallTrackMessageHandler",value:function(e){if(e.callState&&"CALL_INIT"===e.callState)this.sessionInit(e);else if(e.callState&&"CALL_INIT"!==e.callState){var t=this._sessions.find((function(t){return t.callId===e.callID}));t&&this.postProcessSession(t,e)}}},{key:"sessionInit",value:function(e){var t={};if(e.direct&&"O"===e.direct?(t.remote=e.dnis,t.time=(new Date).getTime(),t.direct="O"):e.direct&&"I"===e.direct&&(t.remote=e.ani,t.time=(new Date).getTime(),t.direct="I"),t.isHold=!1,t.isMute=!1,t.callId=e.callID,t.callType=a.default.CallType.PHONE,t.deviceId=e.devID,t.sipCallId=e.sipCallID,e.orgDnis&&(t.originalCallee=e.orgDnis),e.queueID&&(t.skillGroupCode=e.queueID),t.customer={acid:this._acid},e.uui){var n=e.uui,r=u.default.getQueryString("acid",n);r&&(this._acid=r,t.customer.acid=r)}this._sessions.push(t),e.direct&&"O"===e.direct?(t.callStatus=t.eventType=a.default.CallStatus.ORIGINATED,this.phoneEvent(t)):e.direct&&e.direct}},{key:"postProcessSession",value:function(e,t){if("CALL_DELIVER"===t.callState&&(e.callStatus=e.eventType="O"==e.direct?a.default.CallStatus.RINGING:a.default.CallStatus.ALERTING,e.sipCallId=t.sipCallID||"",this.phoneEvent(e)),"CALL_CONNECT"===t.callState&&(e.callStatus=e.eventType=a.default.CallStatus.ESTABLISHED,e.begin=(new Date).getTime(),this.phoneEvent(e),this.eventCallback.callConnectCallback&&this.eventCallback.callConnectCallback()),"CALL_CONNECTION_CLEARED"===t.callState&&this._sessions){var n=this._sessions.find((function(t){return t.remote===e.remote}));n&&n.callStatus&&(e.callStatus=e.eventType=a.default.CallStatus.CLEARED,e.end=(new Date).getTime(),this.phoneEvent(e)),this._sessions=this._sessions.filter((function(t){return t.remote!==e.remote}))}"CALL_HELD"===t.callState&&(e.eventType=a.default.CallStatus.HELD,e.isHold=!0,this.phoneEvent(e)),"CALL_RETRIEVED"===t.callState&&(e.eventType=a.default.CallStatus.HELD_RETRIEVED,e.isHold=!1,this.phoneEvent(e)),"CALL_MUTE"===t.callState&&(e.eventType=a.default.CallStatus.MUTE,e.isMute=!0,this.phoneEvent(e)),"CALL_UNMUTE"===t.callState&&(e.eventType=a.default.CallStatus.MUTE_RETRIEVED,e.isMute=!1,this.phoneEvent(e))}},{key:"phoneEvent",value:function(e){var t={};t.callStream=e.callStream,t.callStatus=e.callStatus,t.eventType=e.eventType,t.callType=e.callType,t.remote=e.remote,t.begin=e.begin,t.end=e.end,t.time=e.time,t.callId=e.callId,t.originalCallee=e.originalCallee,t.skillGroupCode=e.skillGroupCode,t.conferenceId=e.conferenceId,t.userList=e.userList,t.mute=!!e.hasOwnProperty("isMute")&&e.isMute,t.held=!!e.hasOwnProperty("isHold")&&e.isHold,t.customer=e.customer,t.deviceId=e.deviceId,t.direct=e.direct,t.channel="telephone",t.sipCallId=e.sipCallId,this.eventManager.fire("phoneEvent",t)}},{key:"setPhoneStatus",value:function(e){if(e&&e.phoneStatus){this._phoneStatus=e.phoneStatus;var t="";switch(e.phoneStatus){case a.default.PhoneStatus.PAUSE:case a.default.PhoneStatus.DEAL:case a.default.PhoneStatus.EAT:case a.default.PhoneStatus.TRAIN:t=e.phoneStatus,e.phoneStatus="P";break;case a.default.PhoneStatus.WORK:t="",e.phoneStatus="W";break;case a.default.PhoneStatus.LOGOUT:t="",e.phoneStatus="O"}e.reason||(e.reason=t);var n=this._operator.skillGroupCode.map((function(e){return e.code})),r=this.newRequestMsgInstance(),o={id:"setAgentState"};o.state=e.phoneStatus,o.reason=e.reason,o.agentgroup=n,this._operator.agent&&(o.agent=this._operator.agent),r.content=o,this._command=r,this.socket.send((0,i.default)(this._command))}}},{key:"makeCall",value:function(e,t){if(e&&e.remote){var n=this.newRequestMsgInstance(),r=e.uui?"&Queue="+e.uui+"@"+this._operator.domain:"";this.checkCurrentSession()||(this._acid=c.default.uuidv4()),r+="&acid="+this._acid;var o={id:"dial",dnis:e.remote,uui:r};n.content=o,this.eventCallback.callConnectCallback=null,this.eventCallback.callConnectCallback=t,this.socket.send((0,i.default)(n))}}},{key:"evaluation",value:function(e){var t=this.newRequestMsgInstance(),n="&Agent="+String(this._operator.deviceId)+"&CI=&Lan=cn";e.customer&&e.customer.acid&&(n="&acid="+e.customer.acid+n);var r={id:"ivrscore",dnis:e.target,uui:n};t.content=r,this.socket.send((0,i.default)(t))}},{key:"consult",value:function(e){if(e&&e.remote){var t=this.newRequestMsgInstance(),n={id:"consult",dnis:e.remote,uui:e.uui?"&Queue="+e.uui+"@"+this._operator.domain:""};t.content=n,this.socket.send((0,i.default)(t))}}},{key:"transfer",value:function(){var e=this.newRequestMsgInstance();e.content={id:"transfer"},this.socket.send((0,i.default)(e))}},{key:"answer",value:function(){var e=this.newRequestMsgInstance();e.content={id:"answer"},this.socket.send((0,i.default)(e))}},{key:"hangUp",value:function(){var e=this.newRequestMsgInstance();e.content={id:"hangup",hangupall:!1},this.socket.send((0,i.default)(e))}},{key:"hangUpWhenHasCurrentLine",value:function(e){}},{key:"hold",value:function(){var e=this.newRequestMsgInstance();e.content={id:"hold"},this.socket.send((0,i.default)(e))}},{key:"unhold",value:function(){var e=this.newRequestMsgInstance();e.content={id:"retrieve"},this.socket.send((0,i.default)(e))}},{key:"mute",value:function(){var e=this.newRequestMsgInstance();e.content={id:"mute"},this.socket.send((0,i.default)(e))}},{key:"unmute",value:function(){var e=this.newRequestMsgInstance();e.content={id:"unmute"},this.socket.send((0,i.default)(e))}},{key:"refer",value:function(){this.transfer()}},{key:"sendDTMF",value:function(e){}},{key:"multiCall",value:function(){var e=[],t=this._sessions;t.forEach((function(t){t&&t.connection.getReceivers().forEach((function(t){e.push(t.track)}))}));var n=new AudioContext,i=new MediaStream;t.forEach((function(t){if(t){var r=n.createMediaStreamDestination();t.connection.getReceivers().forEach((function(t){e.forEach((function(e){(i.addTrack(t.track),t.track.id!==e.id)&&n.createMediaStreamSource(new MediaStream([e])).connect(r)}))})),t.connection.getSenders().forEach((function(e){n.createMediaStreamSource(new MediaStream([e.track])).connect(r)})),t.connection.getSenders()[0].replaceTrack(r.stream.getTracks()[0])}}));var o=this._audio;return o.srcObject=i,o.play()||r.default.resolve()}},{key:"disconnect",value:function(){this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.onmessage=null,this.heartTimer&&clearInterval(this.heartTimer),this.heartTimer=null,this.socket.close(),this.socket=null,this.connectCountFlag=!1,this.eventManager.fire("phoneWebsocketStatus",a.default.PhoneConnectionStatus.DISCONNECTED)}},{key:"newRequestMsgInstance",value:function(){var e={token:"",type:"request"};return e.timestamp=(new Date).getTime(),e.customid=e.timestamp,e}},{key:"checkCurrentSession",value:function(){return this._sessions.findIndex((function(e){return e.callStatus!==a.default.CallStatus.CLEARED}))>-1}},{key:"getInstance",value:function(){return this}}]),e}();t.default=new d}]);